function Dw(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function jw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var vd={exports:{}},Ua={},Ed={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hg;function Lw(){if(hg)return Ve;hg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=I&&O[I]||O["@@iterator"],typeof O=="function"?O:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,V={};function C(O,H,de){this.props=O,this.context=H,this.refs=V,this.updater=de||j}C.prototype.isReactComponent={},C.prototype.setState=function(O,H){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,H,"setState")},C.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Q(){}Q.prototype=C.prototype;function G(O,H,de){this.props=O,this.context=H,this.refs=V,this.updater=de||j}var ee=G.prototype=new Q;ee.constructor=G,W(ee,C.prototype),ee.isPureReactComponent=!0;var oe=Array.isArray,De=Object.prototype.hasOwnProperty,Se={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function k(O,H,de){var Pe,je={},J=null,le=null;if(H!=null)for(Pe in H.ref!==void 0&&(le=H.ref),H.key!==void 0&&(J=""+H.key),H)De.call(H,Pe)&&!b.hasOwnProperty(Pe)&&(je[Pe]=H[Pe]);var ce=arguments.length-2;if(ce===1)je.children=de;else if(1<ce){for(var fe=Array(ce),xe=0;xe<ce;xe++)fe[xe]=arguments[xe+2];je.children=fe}if(O&&O.defaultProps)for(Pe in ce=O.defaultProps,ce)je[Pe]===void 0&&(je[Pe]=ce[Pe]);return{$$typeof:r,type:O,key:J,ref:le,props:je,_owner:Se.current}}function D(O,H){return{$$typeof:r,type:O.type,key:H,ref:O.ref,props:O.props,_owner:O._owner}}function T(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function A(O){var H={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(de){return H[de]})}var N=/\/+/g;function R(O,H){return typeof O=="object"&&O!==null&&O.key!=null?A(""+O.key):H.toString(36)}function Te(O,H,de,Pe,je){var J=typeof O;(J==="undefined"||J==="boolean")&&(O=null);var le=!1;if(O===null)le=!0;else switch(J){case"string":case"number":le=!0;break;case"object":switch(O.$$typeof){case r:case e:le=!0}}if(le)return le=O,je=je(le),O=Pe===""?"."+R(le,0):Pe,oe(je)?(de="",O!=null&&(de=O.replace(N,"$&/")+"/"),Te(je,H,de,"",function(xe){return xe})):je!=null&&(T(je)&&(je=D(je,de+(!je.key||le&&le.key===je.key?"":(""+je.key).replace(N,"$&/")+"/")+O)),H.push(je)),1;if(le=0,Pe=Pe===""?".":Pe+":",oe(O))for(var ce=0;ce<O.length;ce++){J=O[ce];var fe=Pe+R(J,ce);le+=Te(J,H,de,fe,je)}else if(fe=S(O),typeof fe=="function")for(O=fe.call(O),ce=0;!(J=O.next()).done;)J=J.value,fe=Pe+R(J,ce++),le+=Te(J,H,de,fe,je);else if(J==="object")throw H=String(O),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return le}function nt(O,H,de){if(O==null)return O;var Pe=[],je=0;return Te(O,Pe,"","",function(J){return H.call(de,J,je++)}),Pe}function He(O){if(O._status===-1){var H=O._result;H=H(),H.then(function(de){(O._status===0||O._status===-1)&&(O._status=1,O._result=de)},function(de){(O._status===0||O._status===-1)&&(O._status=2,O._result=de)}),O._status===-1&&(O._status=0,O._result=H)}if(O._status===1)return O._result.default;throw O._result}var Le={current:null},B={transition:null},re={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:B,ReactCurrentOwner:Se};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:nt,forEach:function(O,H,de){nt(O,function(){H.apply(this,arguments)},de)},count:function(O){var H=0;return nt(O,function(){H++}),H},toArray:function(O){return nt(O,function(H){return H})||[]},only:function(O){if(!T(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ve.Component=C,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=G,Ve.StrictMode=i,Ve.Suspense=m,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Ve.act=Y,Ve.cloneElement=function(O,H,de){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Pe=W({},O.props),je=O.key,J=O.ref,le=O._owner;if(H!=null){if(H.ref!==void 0&&(J=H.ref,le=Se.current),H.key!==void 0&&(je=""+H.key),O.type&&O.type.defaultProps)var ce=O.type.defaultProps;for(fe in H)De.call(H,fe)&&!b.hasOwnProperty(fe)&&(Pe[fe]=H[fe]===void 0&&ce!==void 0?ce[fe]:H[fe])}var fe=arguments.length-2;if(fe===1)Pe.children=de;else if(1<fe){ce=Array(fe);for(var xe=0;xe<fe;xe++)ce[xe]=arguments[xe+2];Pe.children=ce}return{$$typeof:r,type:O.type,key:je,ref:J,props:Pe,_owner:le}},Ve.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},Ve.createElement=k,Ve.createFactory=function(O){var H=k.bind(null,O);return H.type=O,H},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(O){return{$$typeof:p,render:O}},Ve.isValidElement=T,Ve.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:He}},Ve.memo=function(O,H){return{$$typeof:_,type:O,compare:H===void 0?null:H}},Ve.startTransition=function(O){var H=B.transition;B.transition={};try{O()}finally{B.transition=H}},Ve.unstable_act=Y,Ve.useCallback=function(O,H){return Le.current.useCallback(O,H)},Ve.useContext=function(O){return Le.current.useContext(O)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(O){return Le.current.useDeferredValue(O)},Ve.useEffect=function(O,H){return Le.current.useEffect(O,H)},Ve.useId=function(){return Le.current.useId()},Ve.useImperativeHandle=function(O,H,de){return Le.current.useImperativeHandle(O,H,de)},Ve.useInsertionEffect=function(O,H){return Le.current.useInsertionEffect(O,H)},Ve.useLayoutEffect=function(O,H){return Le.current.useLayoutEffect(O,H)},Ve.useMemo=function(O,H){return Le.current.useMemo(O,H)},Ve.useReducer=function(O,H,de){return Le.current.useReducer(O,H,de)},Ve.useRef=function(O){return Le.current.useRef(O)},Ve.useState=function(O){return Le.current.useState(O)},Ve.useSyncExternalStore=function(O,H,de){return Le.current.useSyncExternalStore(O,H,de)},Ve.useTransition=function(){return Le.current.useTransition()},Ve.version="18.3.1",Ve}var dg;function df(){return dg||(dg=1,Ed.exports=Lw()),Ed.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg;function Vw(){if(fg)return Ua;fg=1;var r=df(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,_){var E,I={},S=null,j=null;_!==void 0&&(S=""+_),m.key!==void 0&&(S=""+m.key),m.ref!==void 0&&(j=m.ref);for(E in m)i.call(m,E)&&!l.hasOwnProperty(E)&&(I[E]=m[E]);if(p&&p.defaultProps)for(E in m=p.defaultProps,m)I[E]===void 0&&(I[E]=m[E]);return{$$typeof:e,type:p,key:S,ref:j,props:I,_owner:o.current}}return Ua.Fragment=t,Ua.jsx=h,Ua.jsxs=h,Ua}var pg;function Ow(){return pg||(pg=1,vd.exports=Vw()),vd.exports}var d=Ow(),F=df();const bw=jw(F),Mw=Dw({__proto__:null,default:bw},[F]);var Bu={},wd={exports:{}},fn={},Td={exports:{}},Id={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg;function Fw(){return mg||(mg=1,function(r){function e(B,re){var Y=B.length;B.push(re);e:for(;0<Y;){var O=Y-1>>>1,H=B[O];if(0<o(H,re))B[O]=re,B[Y]=H,Y=O;else break e}}function t(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var re=B[0],Y=B.pop();if(Y!==re){B[0]=Y;e:for(var O=0,H=B.length,de=H>>>1;O<de;){var Pe=2*(O+1)-1,je=B[Pe],J=Pe+1,le=B[J];if(0>o(je,Y))J<H&&0>o(le,je)?(B[O]=le,B[J]=Y,O=J):(B[O]=je,B[Pe]=Y,O=Pe);else if(J<H&&0>o(le,Y))B[O]=le,B[J]=Y,O=J;else break e}}return re}function o(B,re){var Y=B.sortIndex-re.sortIndex;return Y!==0?Y:B.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var m=[],_=[],E=1,I=null,S=3,j=!1,W=!1,V=!1,C=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(B){for(var re=t(_);re!==null;){if(re.callback===null)i(_);else if(re.startTime<=B)i(_),re.sortIndex=re.expirationTime,e(m,re);else break;re=t(_)}}function oe(B){if(V=!1,ee(B),!W)if(t(m)!==null)W=!0,He(De);else{var re=t(_);re!==null&&Le(oe,re.startTime-B)}}function De(B,re){W=!1,V&&(V=!1,Q(k),k=-1),j=!0;var Y=S;try{for(ee(re),I=t(m);I!==null&&(!(I.expirationTime>re)||B&&!A());){var O=I.callback;if(typeof O=="function"){I.callback=null,S=I.priorityLevel;var H=O(I.expirationTime<=re);re=r.unstable_now(),typeof H=="function"?I.callback=H:I===t(m)&&i(m),ee(re)}else i(m);I=t(m)}if(I!==null)var de=!0;else{var Pe=t(_);Pe!==null&&Le(oe,Pe.startTime-re),de=!1}return de}finally{I=null,S=Y,j=!1}}var Se=!1,b=null,k=-1,D=5,T=-1;function A(){return!(r.unstable_now()-T<D)}function N(){if(b!==null){var B=r.unstable_now();T=B;var re=!0;try{re=b(!0,B)}finally{re?R():(Se=!1,b=null)}}else Se=!1}var R;if(typeof G=="function")R=function(){G(N)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,nt=Te.port2;Te.port1.onmessage=N,R=function(){nt.postMessage(null)}}else R=function(){C(N,0)};function He(B){b=B,Se||(Se=!0,R())}function Le(B,re){k=C(function(){B(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(B){B.callback=null},r.unstable_continueExecution=function(){W||j||(W=!0,He(De))},r.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<B?Math.floor(1e3/B):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(m)},r.unstable_next=function(B){switch(S){case 1:case 2:case 3:var re=3;break;default:re=S}var Y=S;S=re;try{return B()}finally{S=Y}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(B,re){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Y=S;S=B;try{return re()}finally{S=Y}},r.unstable_scheduleCallback=function(B,re,Y){var O=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?O+Y:O):Y=O,B){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Y+H,B={id:E++,callback:re,priorityLevel:B,startTime:Y,expirationTime:H,sortIndex:-1},Y>O?(B.sortIndex=Y,e(_,B),t(m)===null&&B===t(_)&&(V?(Q(k),k=-1):V=!0,Le(oe,Y-O))):(B.sortIndex=H,e(m,B),W||j||(W=!0,He(De))),B},r.unstable_shouldYield=A,r.unstable_wrapCallback=function(B){var re=S;return function(){var Y=S;S=re;try{return B.apply(this,arguments)}finally{S=Y}}}}(Id)),Id}var gg;function Uw(){return gg||(gg=1,Td.exports=Fw()),Td.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg;function Bw(){if(yg)return fn;yg=1;var r=df(),e=Uw();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},I={};function S(n){return m.call(I,n)?!0:m.call(E,n)?!1:_.test(n)?I[n]=!0:(E[n]=!0,!1)}function j(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W(n,s,a,c){if(s===null||typeof s>"u"||j(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function V(n,s,a,c,f,y,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=w}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){C[n]=new V(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];C[s]=new V(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){C[n]=new V(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){C[n]=new V(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){C[n]=new V(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){C[n]=new V(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){C[n]=new V(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){C[n]=new V(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){C[n]=new V(n,5,!1,n.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function G(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(Q,G);C[s]=new V(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(Q,G);C[s]=new V(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(Q,G);C[s]=new V(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){C[n]=new V(n,1,!1,n.toLowerCase(),null,!1,!1)}),C.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){C[n]=new V(n,1,!1,n.toLowerCase(),null,!0,!0)});function ee(n,s,a,c){var f=C.hasOwnProperty(s)?C[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(W(s,a,f,c)&&(a=null),c||f===null?S(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var oe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,De=Symbol.for("react.element"),Se=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),A=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),nt=Symbol.for("react.memo"),He=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),B=Symbol.iterator;function re(n){return n===null||typeof n!="object"?null:(n=B&&n[B]||n["@@iterator"],typeof n=="function"?n:null)}var Y=Object.assign,O;function H(n){if(O===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||""}return`
`+O+n}var de=!1;function Pe(n,s){if(!n||de)return"";de=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(q){var c=q}Reflect.construct(n,[],s)}else{try{s.call()}catch(q){c=q}n.call(s.prototype)}else{try{throw Error()}catch(q){c=q}n()}}catch(q){if(q&&c&&typeof q.stack=="string"){for(var f=q.stack.split(`
`),y=c.stack.split(`
`),w=f.length-1,P=y.length-1;1<=w&&0<=P&&f[w]!==y[P];)P--;for(;1<=w&&0<=P;w--,P--)if(f[w]!==y[P]){if(w!==1||P!==1)do if(w--,P--,0>P||f[w]!==y[P]){var L=`
`+f[w].replace(" at new "," at ");return n.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",n.displayName)),L}while(1<=w&&0<=P);break}}}finally{de=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?H(n):""}function je(n){switch(n.tag){case 5:return H(n.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return n=Pe(n.type,!1),n;case 11:return n=Pe(n.type.render,!1),n;case 1:return n=Pe(n.type,!0),n;default:return""}}function J(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case Se:return"Portal";case D:return"Profiler";case k:return"StrictMode";case R:return"Suspense";case Te:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case A:return(n.displayName||"Context")+".Consumer";case T:return(n._context.displayName||"Context")+".Provider";case N:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case nt:return s=n.displayName||null,s!==null?s:J(n.type)||"Memo";case He:s=n._payload,n=n._init;try{return J(n(s))}catch{}}return null}function le(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J(s);case 8:return s===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ce(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function fe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function xe(n){var s=fe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,y=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,y.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ke(n){n._valueTracker||(n._valueTracker=xe(n))}function Rt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=fe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function rn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Et(n,s){var a=s.checked;return Y({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function sn(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=ce(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ho(n,s){s=s.checked,s!=null&&ee(n,"checked",s,!1)}function Ko(n,s){Ho(n,s);var a=ce(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?ks(n,s.type,a):s.hasOwnProperty("defaultValue")&&ks(n,s.type,ce(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Cl(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ks(n,s,a){(s!=="number"||rn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Tr=Array.isArray;function Ir(n,s,a,c){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+ce(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Go(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return Y({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Rs(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Tr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:ce(a)}}function As(n,s){var a=ce(s.value),c=ce(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Qo(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function wt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?wt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var xr,Yo=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,f)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(xr=xr||document.createElement("div"),xr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=xr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Yr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$i=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(n){$i.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Wi[s]=Wi[n]})});function Xo(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Wi.hasOwnProperty(n)&&Wi[n]?(""+s).trim():s+"px"}function Jo(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=Xo(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var Zo=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ea(n,s){if(s){if(Zo[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ta(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qi=null;function Ps(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ns=null,Sn=null,nr=null;function Ds(n){if(n=Sa(n)){if(typeof Ns!="function")throw Error(t(280));var s=n.stateNode;s&&(s=nu(s),Ns(n.stateNode,n.type,s))}}function rr(n){Sn?nr?nr.push(n):nr=[n]:Sn=n}function na(){if(Sn){var n=Sn,s=nr;if(nr=Sn=null,Ds(n),s)for(n=0;n<s.length;n++)Ds(s[n])}}function Hi(n,s){return n(s)}function ra(){}var Sr=!1;function ia(n,s,a){if(Sr)return n(s,a);Sr=!0;try{return Hi(n,s,a)}finally{Sr=!1,(Sn!==null||nr!==null)&&(ra(),na())}}function ht(n,s){var a=n.stateNode;if(a===null)return null;var c=nu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var js=!1;if(p)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){js=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{js=!1}function Ki(n,s,a,c,f,y,w,P,L){var q=Array.prototype.slice.call(arguments,3);try{s.apply(a,q)}catch(ne){this.onError(ne)}}var Gi=!1,Ls=null,Mn=!1,sa=null,Kc={onError:function(n){Gi=!0,Ls=n}};function Vs(n,s,a,c,f,y,w,P,L){Gi=!1,Ls=null,Ki.apply(Kc,arguments)}function kl(n,s,a,c,f,y,w,P,L){if(Vs.apply(this,arguments),Gi){if(Gi){var q=Ls;Gi=!1,Ls=null}else throw Error(t(198));Mn||(Mn=!0,sa=q)}}function Fn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Qi(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Un(n){if(Fn(n)!==n)throw Error(t(188))}function Rl(n){var s=n.alternate;if(!s){if(s=Fn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var f=a.return;if(f===null)break;var y=f.alternate;if(y===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===a)return Un(f),n;if(y===c)return Un(f),s;y=y.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=y;else{for(var w=!1,P=f.child;P;){if(P===a){w=!0,a=f,c=y;break}if(P===c){w=!0,c=f,a=y;break}P=P.sibling}if(!w){for(P=y.child;P;){if(P===a){w=!0,a=y,c=f;break}if(P===c){w=!0,c=y,a=f;break}P=P.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function oa(n){return n=Rl(n),n!==null?Os(n):null}function Os(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Os(n);if(s!==null)return s;n=n.sibling}return null}var bs=e.unstable_scheduleCallback,aa=e.unstable_cancelCallback,Al=e.unstable_shouldYield,Gc=e.unstable_requestPaint,Xe=e.unstable_now,Pl=e.unstable_getCurrentPriorityLevel,Yi=e.unstable_ImmediatePriority,Xr=e.unstable_UserBlockingPriority,Cn=e.unstable_NormalPriority,la=e.unstable_LowPriority,Nl=e.unstable_IdlePriority,Xi=null,gn=null;function Dl(n){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Xi,n,void 0,(n.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Ll,ua=Math.log,jl=Math.LN2;function Ll(n){return n>>>=0,n===0?32:31-(ua(n)/jl|0)|0}var Ms=64,Fs=4194304;function Jr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ji(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,y=n.pingedLanes,w=a&268435455;if(w!==0){var P=w&~f;P!==0?c=Jr(P):(y&=w,y!==0&&(c=Jr(y)))}else w=a&~f,w!==0?c=Jr(w):y!==0&&(c=Jr(y));if(c===0)return 0;if(s!==0&&s!==c&&!(s&f)&&(f=c&-c,y=s&-s,f>=y||f===16&&(y&4194240)!==0))return s;if(c&4&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-Jt(s),f=1<<a,c|=n[a],s&=~f;return c}function Qc(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,y=n.pendingLanes;0<y;){var w=31-Jt(y),P=1<<w,L=f[w];L===-1?(!(P&a)||P&c)&&(f[w]=Qc(P,s)):L<=s&&(n.expiredLanes|=P),y&=~P}}function yn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Zi(){var n=Ms;return Ms<<=1,!(Ms&4194240)&&(Ms=64),n}function Zr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function ei(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Jt(s),n[s]=a}function Qe(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-Jt(a),y=1<<f;s[f]=0,c[f]=-1,n[f]=-1,a&=~y}}function ti(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-Jt(a),f=1<<c;f&s|n[c]&s&&(n[c]|=s),a&=~f}}var Fe=0;function ni(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Vl,Us,Ol,bl,Ml,ca=!1,ir=[],Vt=null,Bn=null,zn=null,ri=new Map,kn=new Map,sr=[],Yc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fl(n,s){switch(n){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":ri.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":kn.delete(s.pointerId)}}function on(n,s,a,c,f,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:y,targetContainers:[f]},s!==null&&(s=Sa(s),s!==null&&Us(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function Xc(n,s,a,c,f){switch(s){case"focusin":return Vt=on(Vt,n,s,a,c,f),!0;case"dragenter":return Bn=on(Bn,n,s,a,c,f),!0;case"mouseover":return zn=on(zn,n,s,a,c,f),!0;case"pointerover":var y=f.pointerId;return ri.set(y,on(ri.get(y)||null,n,s,a,c,f)),!0;case"gotpointercapture":return y=f.pointerId,kn.set(y,on(kn.get(y)||null,n,s,a,c,f)),!0}return!1}function Ul(n){var s=is(n.target);if(s!==null){var a=Fn(s);if(a!==null){if(s=a.tag,s===13){if(s=Qi(a),s!==null){n.blockedOn=s,Ml(n.priority,function(){Ol(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function kr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Bs(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);qi=c,a.target.dispatchEvent(c),qi=null}else return s=Sa(a),s!==null&&Us(s),n.blockedOn=a,!1;s.shift()}return!0}function es(n,s,a){kr(n)&&a.delete(s)}function Bl(){ca=!1,Vt!==null&&kr(Vt)&&(Vt=null),Bn!==null&&kr(Bn)&&(Bn=null),zn!==null&&kr(zn)&&(zn=null),ri.forEach(es),kn.forEach(es)}function Wn(n,s){n.blockedOn===s&&(n.blockedOn=null,ca||(ca=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bl)))}function $n(n){function s(f){return Wn(f,n)}if(0<ir.length){Wn(ir[0],n);for(var a=1;a<ir.length;a++){var c=ir[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Vt!==null&&Wn(Vt,n),Bn!==null&&Wn(Bn,n),zn!==null&&Wn(zn,n),ri.forEach(s),kn.forEach(s),a=0;a<sr.length;a++)c=sr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<sr.length&&(a=sr[0],a.blockedOn===null);)Ul(a),a.blockedOn===null&&sr.shift()}var Rr=oe.ReactCurrentBatchConfig,ii=!0;function rt(n,s,a,c){var f=Fe,y=Rr.transition;Rr.transition=null;try{Fe=1,ha(n,s,a,c)}finally{Fe=f,Rr.transition=y}}function Jc(n,s,a,c){var f=Fe,y=Rr.transition;Rr.transition=null;try{Fe=4,ha(n,s,a,c)}finally{Fe=f,Rr.transition=y}}function ha(n,s,a,c){if(ii){var f=Bs(n,s,a,c);if(f===null)uh(n,s,c,ts,a),Fl(n,c);else if(Xc(f,n,s,a,c))c.stopPropagation();else if(Fl(n,c),s&4&&-1<Yc.indexOf(n)){for(;f!==null;){var y=Sa(f);if(y!==null&&Vl(y),y=Bs(n,s,a,c),y===null&&uh(n,s,c,ts,a),y===f)break;f=y}f!==null&&c.stopPropagation()}else uh(n,s,c,null,a)}}var ts=null;function Bs(n,s,a,c){if(ts=null,n=Ps(c),n=is(n),n!==null)if(s=Fn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Qi(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return ts=n,null}function da(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pl()){case Yi:return 1;case Xr:return 4;case Cn:case la:return 16;case Nl:return 536870912;default:return 16}default:return 16}}var _n=null,zs=null,an=null;function fa(){if(an)return an;var n,s=zs,a=s.length,c,f="value"in _n?_n.value:_n.textContent,y=f.length;for(n=0;n<a&&s[n]===f[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===f[y-c];c++);return an=f.slice(n,1<c?1-c:void 0)}function Ws(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function or(){return!0}function pa(){return!1}function Ot(n){function s(a,c,f,y,w){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(a=n[P],this[P]=a?a(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?or:pa,this.isPropagationStopped=pa,this}return Y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=or)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=or)},persist:function(){},isPersistent:or}),s}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$s=Ot(qn),ar=Y({},qn,{view:0,detail:0}),Zc=Ot(ar),qs,Ar,si,ns=Y({},ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==si&&(si&&n.type==="mousemove"?(qs=n.screenX-si.screenX,Ar=n.screenY-si.screenY):Ar=qs=0,si=n),qs)},movementY:function(n){return"movementY"in n?n.movementY:Ar}}),Hs=Ot(ns),ma=Y({},ns,{dataTransfer:0}),zl=Ot(ma),Ks=Y({},ar,{relatedTarget:0}),Gs=Ot(Ks),Wl=Y({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),Pr=Ot(Wl),$l=Y({},qn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ql=Ot($l),Hl=Y({},qn,{data:0}),ga=Ot(Hl),Qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Kl[n])?!!s[n]:!1}function lr(){return Gl}var u=Y({},ar,{key:function(n){if(n.key){var s=Qs[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ws(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Zt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lr,charCode:function(n){return n.type==="keypress"?Ws(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ws(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),g=Ot(u),v=Y({},ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x=Ot(v),U=Y({},ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lr}),K=Ot(U),ae=Y({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ge=Ot(ae),It=Y({},ns,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=Ot(It),At=[9,13,27,32],pt=p&&"CompositionEvent"in window,Rn=null;p&&"documentMode"in document&&(Rn=document.documentMode);var vn=p&&"TextEvent"in window&&!Rn,rs=p&&(!pt||Rn&&8<Rn&&11>=Rn),Ys=" ",sp=!1;function op(n,s){switch(n){case"keyup":return At.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ap(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xs=!1;function AE(n,s){switch(n){case"compositionend":return ap(s);case"keypress":return s.which!==32?null:(sp=!0,Ys);case"textInput":return n=s.data,n===Ys&&sp?null:n;default:return null}}function PE(n,s){if(Xs)return n==="compositionend"||!pt&&op(n,s)?(n=fa(),an=zs=_n=null,Xs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return rs&&s.locale!=="ko"?null:s.data;default:return null}}var NE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!NE[n.type]:s==="textarea"}function up(n,s,a,c){rr(c),s=Zl(s,"onChange"),0<s.length&&(a=new $s("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var ya=null,_a=null;function DE(n){kp(n,0)}function Ql(n){var s=no(n);if(Rt(s))return n}function jE(n,s){if(n==="change")return s}var cp=!1;if(p){var eh;if(p){var th="oninput"in document;if(!th){var hp=document.createElement("div");hp.setAttribute("oninput","return;"),th=typeof hp.oninput=="function"}eh=th}else eh=!1;cp=eh&&(!document.documentMode||9<document.documentMode)}function dp(){ya&&(ya.detachEvent("onpropertychange",fp),_a=ya=null)}function fp(n){if(n.propertyName==="value"&&Ql(_a)){var s=[];up(s,_a,n,Ps(n)),ia(DE,s)}}function LE(n,s,a){n==="focusin"?(dp(),ya=s,_a=a,ya.attachEvent("onpropertychange",fp)):n==="focusout"&&dp()}function VE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ql(_a)}function OE(n,s){if(n==="click")return Ql(s)}function bE(n,s){if(n==="input"||n==="change")return Ql(s)}function ME(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Hn=typeof Object.is=="function"?Object.is:ME;function va(n,s){if(Hn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!m.call(s,f)||!Hn(n[f],s[f]))return!1}return!0}function pp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function mp(n,s){var a=pp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=pp(a)}}function gp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?gp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function yp(){for(var n=window,s=rn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=rn(n.document)}return s}function nh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function FE(n){var s=yp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&gp(a.ownerDocument.documentElement,a)){if(c!==null&&nh(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,y=Math.min(c.start,f);c=c.end===void 0?y:Math.min(c.end,f),!n.extend&&y>c&&(f=c,c=y,y=f),f=mp(a,y);var w=mp(a,c);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),y>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var UE=p&&"documentMode"in document&&11>=document.documentMode,Js=null,rh=null,Ea=null,ih=!1;function _p(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ih||Js==null||Js!==rn(c)||(c=Js,"selectionStart"in c&&nh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ea&&va(Ea,c)||(Ea=c,c=Zl(rh,"onSelect"),0<c.length&&(s=new $s("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=Js)))}function Yl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Zs={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionend:Yl("Transition","TransitionEnd")},sh={},vp={};p&&(vp=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function Xl(n){if(sh[n])return sh[n];if(!Zs[n])return n;var s=Zs[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in vp)return sh[n]=s[a];return n}var Ep=Xl("animationend"),wp=Xl("animationiteration"),Tp=Xl("animationstart"),Ip=Xl("transitionend"),xp=new Map,Sp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(n,s){xp.set(n,s),l(s,[n])}for(var oh=0;oh<Sp.length;oh++){var ah=Sp[oh],BE=ah.toLowerCase(),zE=ah[0].toUpperCase()+ah.slice(1);oi(BE,"on"+zE)}oi(Ep,"onAnimationEnd"),oi(wp,"onAnimationIteration"),oi(Tp,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(Ip,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WE=new Set("cancel close invalid load scroll toggle".split(" ").concat(wa));function Cp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,kl(c,s,void 0,n),n.currentTarget=null}function kp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var y=void 0;if(s)for(var w=c.length-1;0<=w;w--){var P=c[w],L=P.instance,q=P.currentTarget;if(P=P.listener,L!==y&&f.isPropagationStopped())break e;Cp(f,P,q),y=L}else for(w=0;w<c.length;w++){if(P=c[w],L=P.instance,q=P.currentTarget,P=P.listener,L!==y&&f.isPropagationStopped())break e;Cp(f,P,q),y=L}}}if(Mn)throw n=sa,Mn=!1,sa=null,n}function Ze(n,s){var a=s[mh];a===void 0&&(a=s[mh]=new Set);var c=n+"__bubble";a.has(c)||(Rp(s,n,2,!1),a.add(c))}function lh(n,s,a){var c=0;s&&(c|=4),Rp(a,n,c,s)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Ta(n){if(!n[Jl]){n[Jl]=!0,i.forEach(function(a){a!=="selectionchange"&&(WE.has(a)||lh(a,!1,n),lh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Jl]||(s[Jl]=!0,lh("selectionchange",!1,s))}}function Rp(n,s,a,c){switch(da(s)){case 1:var f=rt;break;case 4:f=Jc;break;default:f=ha}a=f.bind(null,s,a,n),f=void 0,!js||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function uh(n,s,a,c,f){var y=c;if(!(s&1)&&!(s&2)&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var P=c.stateNode.containerInfo;if(P===f||P.nodeType===8&&P.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var L=w.tag;if((L===3||L===4)&&(L=w.stateNode.containerInfo,L===f||L.nodeType===8&&L.parentNode===f))return;w=w.return}for(;P!==null;){if(w=is(P),w===null)return;if(L=w.tag,L===5||L===6){c=y=w;continue e}P=P.parentNode}}c=c.return}ia(function(){var q=y,ne=Ps(a),ie=[];e:{var te=xp.get(n);if(te!==void 0){var ue=$s,ge=n;switch(n){case"keypress":if(Ws(a)===0)break e;case"keydown":case"keyup":ue=g;break;case"focusin":ge="focus",ue=Gs;break;case"focusout":ge="blur",ue=Gs;break;case"beforeblur":case"afterblur":ue=Gs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Hs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=zl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=K;break;case Ep:case wp:case Tp:ue=Pr;break;case Ip:ue=Ge;break;case"scroll":ue=Zc;break;case"wheel":ue=Be;break;case"copy":case"cut":case"paste":ue=ql;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=x}var ye=(s&4)!==0,dt=!ye&&n==="scroll",z=ye?te!==null?te+"Capture":null:te;ye=[];for(var M=q,$;M!==null;){$=M;var se=$.stateNode;if($.tag===5&&se!==null&&($=se,z!==null&&(se=ht(M,z),se!=null&&ye.push(Ia(M,se,$)))),dt)break;M=M.return}0<ye.length&&(te=new ue(te,ge,null,a,ne),ie.push({event:te,listeners:ye}))}}if(!(s&7)){e:{if(te=n==="mouseover"||n==="pointerover",ue=n==="mouseout"||n==="pointerout",te&&a!==qi&&(ge=a.relatedTarget||a.fromElement)&&(is(ge)||ge[Nr]))break e;if((ue||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,ue?(ge=a.relatedTarget||a.toElement,ue=q,ge=ge?is(ge):null,ge!==null&&(dt=Fn(ge),ge!==dt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(ue=null,ge=q),ue!==ge)){if(ye=Hs,se="onMouseLeave",z="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(ye=x,se="onPointerLeave",z="onPointerEnter",M="pointer"),dt=ue==null?te:no(ue),$=ge==null?te:no(ge),te=new ye(se,M+"leave",ue,a,ne),te.target=dt,te.relatedTarget=$,se=null,is(ne)===q&&(ye=new ye(z,M+"enter",ge,a,ne),ye.target=$,ye.relatedTarget=dt,se=ye),dt=se,ue&&ge)t:{for(ye=ue,z=ge,M=0,$=ye;$;$=eo($))M++;for($=0,se=z;se;se=eo(se))$++;for(;0<M-$;)ye=eo(ye),M--;for(;0<$-M;)z=eo(z),$--;for(;M--;){if(ye===z||z!==null&&ye===z.alternate)break t;ye=eo(ye),z=eo(z)}ye=null}else ye=null;ue!==null&&Ap(ie,te,ue,ye,!1),ge!==null&&dt!==null&&Ap(ie,dt,ge,ye,!0)}}e:{if(te=q?no(q):window,ue=te.nodeName&&te.nodeName.toLowerCase(),ue==="select"||ue==="input"&&te.type==="file")var _e=jE;else if(lp(te))if(cp)_e=bE;else{_e=VE;var Ee=LE}else(ue=te.nodeName)&&ue.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(_e=OE);if(_e&&(_e=_e(n,q))){up(ie,_e,a,ne);break e}Ee&&Ee(n,te,q),n==="focusout"&&(Ee=te._wrapperState)&&Ee.controlled&&te.type==="number"&&ks(te,"number",te.value)}switch(Ee=q?no(q):window,n){case"focusin":(lp(Ee)||Ee.contentEditable==="true")&&(Js=Ee,rh=q,Ea=null);break;case"focusout":Ea=rh=Js=null;break;case"mousedown":ih=!0;break;case"contextmenu":case"mouseup":case"dragend":ih=!1,_p(ie,a,ne);break;case"selectionchange":if(UE)break;case"keydown":case"keyup":_p(ie,a,ne)}var we;if(pt)e:{switch(n){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Xs?op(n,a)&&(ke="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(rs&&a.locale!=="ko"&&(Xs||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Xs&&(we=fa()):(_n=ne,zs="value"in _n?_n.value:_n.textContent,Xs=!0)),Ee=Zl(q,ke),0<Ee.length&&(ke=new ga(ke,n,null,a,ne),ie.push({event:ke,listeners:Ee}),we?ke.data=we:(we=ap(a),we!==null&&(ke.data=we)))),(we=vn?AE(n,a):PE(n,a))&&(q=Zl(q,"onBeforeInput"),0<q.length&&(ne=new ga("onBeforeInput","beforeinput",null,a,ne),ie.push({event:ne,listeners:q}),ne.data=we))}kp(ie,s)})}function Ia(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Zl(n,s){for(var a=s+"Capture",c=[];n!==null;){var f=n,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=ht(n,a),y!=null&&c.unshift(Ia(n,y,f)),y=ht(n,s),y!=null&&c.push(Ia(n,y,f))),n=n.return}return c}function eo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ap(n,s,a,c,f){for(var y=s._reactName,w=[];a!==null&&a!==c;){var P=a,L=P.alternate,q=P.stateNode;if(L!==null&&L===c)break;P.tag===5&&q!==null&&(P=q,f?(L=ht(a,y),L!=null&&w.unshift(Ia(a,L,P))):f||(L=ht(a,y),L!=null&&w.push(Ia(a,L,P)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var $E=/\r\n?/g,qE=/\u0000|\uFFFD/g;function Pp(n){return(typeof n=="string"?n:""+n).replace($E,`
`).replace(qE,"")}function eu(n,s,a){if(s=Pp(s),Pp(n)!==s&&a)throw Error(t(425))}function tu(){}var ch=null,hh=null;function dh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var fh=typeof setTimeout=="function"?setTimeout:void 0,HE=typeof clearTimeout=="function"?clearTimeout:void 0,Np=typeof Promise=="function"?Promise:void 0,KE=typeof queueMicrotask=="function"?queueMicrotask:typeof Np<"u"?function(n){return Np.resolve(null).then(n).catch(GE)}:fh;function GE(n){setTimeout(function(){throw n})}function ph(n,s){var a=s,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),$n(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);$n(s)}function ai(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Dp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var to=Math.random().toString(36).slice(2),ur="__reactFiber$"+to,xa="__reactProps$"+to,Nr="__reactContainer$"+to,mh="__reactEvents$"+to,QE="__reactListeners$"+to,YE="__reactHandles$"+to;function is(n){var s=n[ur];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Nr]||a[ur]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Dp(n);n!==null;){if(a=n[ur])return a;n=Dp(n)}return s}n=a,a=n.parentNode}return null}function Sa(n){return n=n[ur]||n[Nr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function no(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function nu(n){return n[xa]||null}var gh=[],ro=-1;function li(n){return{current:n}}function et(n){0>ro||(n.current=gh[ro],gh[ro]=null,ro--)}function Je(n,s){ro++,gh[ro]=n.current,n.current=s}var ui={},Wt=li(ui),ln=li(!1),ss=ui;function io(n,s){var a=n.type.contextTypes;if(!a)return ui;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in a)f[y]=s[y];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function un(n){return n=n.childContextTypes,n!=null}function ru(){et(ln),et(Wt)}function jp(n,s,a){if(Wt.current!==ui)throw Error(t(168));Je(Wt,s),Je(ln,a)}function Lp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,le(n)||"Unknown",f));return Y({},a,c)}function iu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ui,ss=Wt.current,Je(Wt,n),Je(ln,ln.current),!0}function Vp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Lp(n,s,ss),c.__reactInternalMemoizedMergedChildContext=n,et(ln),et(Wt),Je(Wt,n)):et(ln),Je(ln,a)}var Dr=null,su=!1,yh=!1;function Op(n){Dr===null?Dr=[n]:Dr.push(n)}function XE(n){su=!0,Op(n)}function ci(){if(!yh&&Dr!==null){yh=!0;var n=0,s=Fe;try{var a=Dr;for(Fe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Dr=null,su=!1}catch(f){throw Dr!==null&&(Dr=Dr.slice(n+1)),bs(Yi,ci),f}finally{Fe=s,yh=!1}}return null}var so=[],oo=0,ou=null,au=0,An=[],Pn=0,os=null,jr=1,Lr="";function as(n,s){so[oo++]=au,so[oo++]=ou,ou=n,au=s}function bp(n,s,a){An[Pn++]=jr,An[Pn++]=Lr,An[Pn++]=os,os=n;var c=jr;n=Lr;var f=32-Jt(c)-1;c&=~(1<<f),a+=1;var y=32-Jt(s)+f;if(30<y){var w=f-f%5;y=(c&(1<<w)-1).toString(32),c>>=w,f-=w,jr=1<<32-Jt(s)+f|a<<f|c,Lr=y+n}else jr=1<<y|a<<f|c,Lr=n}function _h(n){n.return!==null&&(as(n,1),bp(n,1,0))}function vh(n){for(;n===ou;)ou=so[--oo],so[oo]=null,au=so[--oo],so[oo]=null;for(;n===os;)os=An[--Pn],An[Pn]=null,Lr=An[--Pn],An[Pn]=null,jr=An[--Pn],An[Pn]=null}var En=null,wn=null,it=!1,Kn=null;function Mp(n,s){var a=Ln(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Fp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,En=n,wn=ai(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,En=n,wn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=os!==null?{id:jr,overflow:Lr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Ln(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,En=n,wn=null,!0):!1;default:return!1}}function Eh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function wh(n){if(it){var s=wn;if(s){var a=s;if(!Fp(n,s)){if(Eh(n))throw Error(t(418));s=ai(a.nextSibling);var c=En;s&&Fp(n,s)?Mp(c,a):(n.flags=n.flags&-4097|2,it=!1,En=n)}}else{if(Eh(n))throw Error(t(418));n.flags=n.flags&-4097|2,it=!1,En=n}}}function Up(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;En=n}function lu(n){if(n!==En)return!1;if(!it)return Up(n),it=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!dh(n.type,n.memoizedProps)),s&&(s=wn)){if(Eh(n))throw Bp(),Error(t(418));for(;s;)Mp(n,s),s=ai(s.nextSibling)}if(Up(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){wn=ai(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}wn=null}}else wn=En?ai(n.stateNode.nextSibling):null;return!0}function Bp(){for(var n=wn;n;)n=ai(n.nextSibling)}function ao(){wn=En=null,it=!1}function Th(n){Kn===null?Kn=[n]:Kn.push(n)}var JE=oe.ReactCurrentBatchConfig;function Ca(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(w){var P=f.refs;w===null?delete P[y]:P[y]=w},s._stringRef=y,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function uu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function zp(n){var s=n._init;return s(n._payload)}function Wp(n){function s(z,M){if(n){var $=z.deletions;$===null?(z.deletions=[M],z.flags|=16):$.push(M)}}function a(z,M){if(!n)return null;for(;M!==null;)s(z,M),M=M.sibling;return null}function c(z,M){for(z=new Map;M!==null;)M.key!==null?z.set(M.key,M):z.set(M.index,M),M=M.sibling;return z}function f(z,M){return z=_i(z,M),z.index=0,z.sibling=null,z}function y(z,M,$){return z.index=$,n?($=z.alternate,$!==null?($=$.index,$<M?(z.flags|=2,M):$):(z.flags|=2,M)):(z.flags|=1048576,M)}function w(z){return n&&z.alternate===null&&(z.flags|=2),z}function P(z,M,$,se){return M===null||M.tag!==6?(M=fd($,z.mode,se),M.return=z,M):(M=f(M,$),M.return=z,M)}function L(z,M,$,se){var _e=$.type;return _e===b?ne(z,M,$.props.children,se,$.key):M!==null&&(M.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===He&&zp(_e)===M.type)?(se=f(M,$.props),se.ref=Ca(z,M,$),se.return=z,se):(se=ju($.type,$.key,$.props,null,z.mode,se),se.ref=Ca(z,M,$),se.return=z,se)}function q(z,M,$,se){return M===null||M.tag!==4||M.stateNode.containerInfo!==$.containerInfo||M.stateNode.implementation!==$.implementation?(M=pd($,z.mode,se),M.return=z,M):(M=f(M,$.children||[]),M.return=z,M)}function ne(z,M,$,se,_e){return M===null||M.tag!==7?(M=ms($,z.mode,se,_e),M.return=z,M):(M=f(M,$),M.return=z,M)}function ie(z,M,$){if(typeof M=="string"&&M!==""||typeof M=="number")return M=fd(""+M,z.mode,$),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case De:return $=ju(M.type,M.key,M.props,null,z.mode,$),$.ref=Ca(z,null,M),$.return=z,$;case Se:return M=pd(M,z.mode,$),M.return=z,M;case He:var se=M._init;return ie(z,se(M._payload),$)}if(Tr(M)||re(M))return M=ms(M,z.mode,$,null),M.return=z,M;uu(z,M)}return null}function te(z,M,$,se){var _e=M!==null?M.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return _e!==null?null:P(z,M,""+$,se);if(typeof $=="object"&&$!==null){switch($.$$typeof){case De:return $.key===_e?L(z,M,$,se):null;case Se:return $.key===_e?q(z,M,$,se):null;case He:return _e=$._init,te(z,M,_e($._payload),se)}if(Tr($)||re($))return _e!==null?null:ne(z,M,$,se,null);uu(z,$)}return null}function ue(z,M,$,se,_e){if(typeof se=="string"&&se!==""||typeof se=="number")return z=z.get($)||null,P(M,z,""+se,_e);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case De:return z=z.get(se.key===null?$:se.key)||null,L(M,z,se,_e);case Se:return z=z.get(se.key===null?$:se.key)||null,q(M,z,se,_e);case He:var Ee=se._init;return ue(z,M,$,Ee(se._payload),_e)}if(Tr(se)||re(se))return z=z.get($)||null,ne(M,z,se,_e,null);uu(M,se)}return null}function ge(z,M,$,se){for(var _e=null,Ee=null,we=M,ke=M=0,Dt=null;we!==null&&ke<$.length;ke++){we.index>ke?(Dt=we,we=null):Dt=we.sibling;var $e=te(z,we,$[ke],se);if($e===null){we===null&&(we=Dt);break}n&&we&&$e.alternate===null&&s(z,we),M=y($e,M,ke),Ee===null?_e=$e:Ee.sibling=$e,Ee=$e,we=Dt}if(ke===$.length)return a(z,we),it&&as(z,ke),_e;if(we===null){for(;ke<$.length;ke++)we=ie(z,$[ke],se),we!==null&&(M=y(we,M,ke),Ee===null?_e=we:Ee.sibling=we,Ee=we);return it&&as(z,ke),_e}for(we=c(z,we);ke<$.length;ke++)Dt=ue(we,z,ke,$[ke],se),Dt!==null&&(n&&Dt.alternate!==null&&we.delete(Dt.key===null?ke:Dt.key),M=y(Dt,M,ke),Ee===null?_e=Dt:Ee.sibling=Dt,Ee=Dt);return n&&we.forEach(function(vi){return s(z,vi)}),it&&as(z,ke),_e}function ye(z,M,$,se){var _e=re($);if(typeof _e!="function")throw Error(t(150));if($=_e.call($),$==null)throw Error(t(151));for(var Ee=_e=null,we=M,ke=M=0,Dt=null,$e=$.next();we!==null&&!$e.done;ke++,$e=$.next()){we.index>ke?(Dt=we,we=null):Dt=we.sibling;var vi=te(z,we,$e.value,se);if(vi===null){we===null&&(we=Dt);break}n&&we&&vi.alternate===null&&s(z,we),M=y(vi,M,ke),Ee===null?_e=vi:Ee.sibling=vi,Ee=vi,we=Dt}if($e.done)return a(z,we),it&&as(z,ke),_e;if(we===null){for(;!$e.done;ke++,$e=$.next())$e=ie(z,$e.value,se),$e!==null&&(M=y($e,M,ke),Ee===null?_e=$e:Ee.sibling=$e,Ee=$e);return it&&as(z,ke),_e}for(we=c(z,we);!$e.done;ke++,$e=$.next())$e=ue(we,z,ke,$e.value,se),$e!==null&&(n&&$e.alternate!==null&&we.delete($e.key===null?ke:$e.key),M=y($e,M,ke),Ee===null?_e=$e:Ee.sibling=$e,Ee=$e);return n&&we.forEach(function(Nw){return s(z,Nw)}),it&&as(z,ke),_e}function dt(z,M,$,se){if(typeof $=="object"&&$!==null&&$.type===b&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case De:e:{for(var _e=$.key,Ee=M;Ee!==null;){if(Ee.key===_e){if(_e=$.type,_e===b){if(Ee.tag===7){a(z,Ee.sibling),M=f(Ee,$.props.children),M.return=z,z=M;break e}}else if(Ee.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===He&&zp(_e)===Ee.type){a(z,Ee.sibling),M=f(Ee,$.props),M.ref=Ca(z,Ee,$),M.return=z,z=M;break e}a(z,Ee);break}else s(z,Ee);Ee=Ee.sibling}$.type===b?(M=ms($.props.children,z.mode,se,$.key),M.return=z,z=M):(se=ju($.type,$.key,$.props,null,z.mode,se),se.ref=Ca(z,M,$),se.return=z,z=se)}return w(z);case Se:e:{for(Ee=$.key;M!==null;){if(M.key===Ee)if(M.tag===4&&M.stateNode.containerInfo===$.containerInfo&&M.stateNode.implementation===$.implementation){a(z,M.sibling),M=f(M,$.children||[]),M.return=z,z=M;break e}else{a(z,M);break}else s(z,M);M=M.sibling}M=pd($,z.mode,se),M.return=z,z=M}return w(z);case He:return Ee=$._init,dt(z,M,Ee($._payload),se)}if(Tr($))return ge(z,M,$,se);if(re($))return ye(z,M,$,se);uu(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,M!==null&&M.tag===6?(a(z,M.sibling),M=f(M,$),M.return=z,z=M):(a(z,M),M=fd($,z.mode,se),M.return=z,z=M),w(z)):a(z,M)}return dt}var lo=Wp(!0),$p=Wp(!1),cu=li(null),hu=null,uo=null,Ih=null;function xh(){Ih=uo=hu=null}function Sh(n){var s=cu.current;et(cu),n._currentValue=s}function Ch(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function co(n,s){hu=n,Ih=uo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(cn=!0),n.firstContext=null)}function Nn(n){var s=n._currentValue;if(Ih!==n)if(n={context:n,memoizedValue:s,next:null},uo===null){if(hu===null)throw Error(t(308));uo=n,hu.dependencies={lanes:0,firstContext:n}}else uo=uo.next=n;return s}var ls=null;function kh(n){ls===null?ls=[n]:ls.push(n)}function qp(n,s,a,c){var f=s.interleaved;return f===null?(a.next=a,kh(s)):(a.next=f.next,f.next=a),s.interleaved=a,Vr(n,c)}function Vr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var hi=!1;function Rh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Or(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function di(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,We&2){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,Vr(n,a)}return f=c.interleaved,f===null?(s.next=s,kh(c)):(s.next=f.next,f.next=s),c.interleaved=s,Vr(n,a)}function du(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ti(n,a)}}function Kp(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?f=y=w:y=y.next=w,a=a.next}while(a!==null);y===null?f=y=s:y=y.next=s}else f=y=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function fu(n,s,a,c){var f=n.updateQueue;hi=!1;var y=f.firstBaseUpdate,w=f.lastBaseUpdate,P=f.shared.pending;if(P!==null){f.shared.pending=null;var L=P,q=L.next;L.next=null,w===null?y=q:w.next=q,w=L;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,P=ne.lastBaseUpdate,P!==w&&(P===null?ne.firstBaseUpdate=q:P.next=q,ne.lastBaseUpdate=L))}if(y!==null){var ie=f.baseState;w=0,ne=q=L=null,P=y;do{var te=P.lane,ue=P.eventTime;if((c&te)===te){ne!==null&&(ne=ne.next={eventTime:ue,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var ge=n,ye=P;switch(te=s,ue=a,ye.tag){case 1:if(ge=ye.payload,typeof ge=="function"){ie=ge.call(ue,ie,te);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ye.payload,te=typeof ge=="function"?ge.call(ue,ie,te):ge,te==null)break e;ie=Y({},ie,te);break e;case 2:hi=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,te=f.effects,te===null?f.effects=[P]:te.push(P))}else ue={eventTime:ue,lane:te,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ne===null?(q=ne=ue,L=ie):ne=ne.next=ue,w|=te;if(P=P.next,P===null){if(P=f.shared.pending,P===null)break;te=P,P=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);if(ne===null&&(L=ie),f.baseState=L,f.firstBaseUpdate=q,f.lastBaseUpdate=ne,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else y===null&&(f.shared.lanes=0);hs|=w,n.lanes=w,n.memoizedState=ie}}function Gp(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var ka={},cr=li(ka),Ra=li(ka),Aa=li(ka);function us(n){if(n===ka)throw Error(t(174));return n}function Ah(n,s){switch(Je(Aa,s),Je(Ra,n),Je(cr,ka),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Tt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Tt(s,n)}et(cr),Je(cr,s)}function ho(){et(cr),et(Ra),et(Aa)}function Qp(n){us(Aa.current);var s=us(cr.current),a=Tt(s,n.type);s!==a&&(Je(Ra,n),Je(cr,a))}function Ph(n){Ra.current===n&&(et(cr),et(Ra))}var st=li(0);function pu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Nh=[];function Dh(){for(var n=0;n<Nh.length;n++)Nh[n]._workInProgressVersionPrimary=null;Nh.length=0}var mu=oe.ReactCurrentDispatcher,jh=oe.ReactCurrentBatchConfig,cs=0,ot=null,xt=null,Pt=null,gu=!1,Pa=!1,Na=0,ZE=0;function $t(){throw Error(t(321))}function Lh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Hn(n[a],s[a]))return!1;return!0}function Vh(n,s,a,c,f,y){if(cs=y,ot=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,mu.current=n===null||n.memoizedState===null?rw:iw,n=a(c,f),Pa){y=0;do{if(Pa=!1,Na=0,25<=y)throw Error(t(301));y+=1,Pt=xt=null,s.updateQueue=null,mu.current=sw,n=a(c,f)}while(Pa)}if(mu.current=vu,s=xt!==null&&xt.next!==null,cs=0,Pt=xt=ot=null,gu=!1,s)throw Error(t(300));return n}function Oh(){var n=Na!==0;return Na=0,n}function hr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ot.memoizedState=Pt=n:Pt=Pt.next=n,Pt}function Dn(){if(xt===null){var n=ot.alternate;n=n!==null?n.memoizedState:null}else n=xt.next;var s=Pt===null?ot.memoizedState:Pt.next;if(s!==null)Pt=s,xt=n;else{if(n===null)throw Error(t(310));xt=n,n={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Pt===null?ot.memoizedState=Pt=n:Pt=Pt.next=n}return Pt}function Da(n,s){return typeof s=="function"?s(n):s}function bh(n){var s=Dn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=xt,f=c.baseQueue,y=a.pending;if(y!==null){if(f!==null){var w=f.next;f.next=y.next,y.next=w}c.baseQueue=f=y,a.pending=null}if(f!==null){y=f.next,c=c.baseState;var P=w=null,L=null,q=y;do{var ne=q.lane;if((cs&ne)===ne)L!==null&&(L=L.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),c=q.hasEagerState?q.eagerState:n(c,q.action);else{var ie={lane:ne,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};L===null?(P=L=ie,w=c):L=L.next=ie,ot.lanes|=ne,hs|=ne}q=q.next}while(q!==null&&q!==y);L===null?w=c:L.next=P,Hn(c,s.memoizedState)||(cn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=L,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do y=f.lane,ot.lanes|=y,hs|=y,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Mh(n){var s=Dn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,y=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do y=n(y,w.action),w=w.next;while(w!==f);Hn(y,s.memoizedState)||(cn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,c]}function Yp(){}function Xp(n,s){var a=ot,c=Dn(),f=s(),y=!Hn(c.memoizedState,f);if(y&&(c.memoizedState=f,cn=!0),c=c.queue,Fh(em.bind(null,a,c,n),[n]),c.getSnapshot!==s||y||Pt!==null&&Pt.memoizedState.tag&1){if(a.flags|=2048,ja(9,Zp.bind(null,a,c,f,s),void 0,null),Nt===null)throw Error(t(349));cs&30||Jp(a,s,f)}return f}function Jp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ot.updateQueue,s===null?(s={lastEffect:null,stores:null},ot.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Zp(n,s,a,c){s.value=a,s.getSnapshot=c,tm(s)&&nm(n)}function em(n,s,a){return a(function(){tm(s)&&nm(n)})}function tm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Hn(n,a)}catch{return!0}}function nm(n){var s=Vr(n,1);s!==null&&Xn(s,n,1,-1)}function rm(n){var s=hr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:n},s.queue=n,n=n.dispatch=nw.bind(null,ot,n),[s.memoizedState,n]}function ja(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=ot.updateQueue,s===null?(s={lastEffect:null,stores:null},ot.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function im(){return Dn().memoizedState}function yu(n,s,a,c){var f=hr();ot.flags|=n,f.memoizedState=ja(1|s,a,void 0,c===void 0?null:c)}function _u(n,s,a,c){var f=Dn();c=c===void 0?null:c;var y=void 0;if(xt!==null){var w=xt.memoizedState;if(y=w.destroy,c!==null&&Lh(c,w.deps)){f.memoizedState=ja(s,a,y,c);return}}ot.flags|=n,f.memoizedState=ja(1|s,a,y,c)}function sm(n,s){return yu(8390656,8,n,s)}function Fh(n,s){return _u(2048,8,n,s)}function om(n,s){return _u(4,2,n,s)}function am(n,s){return _u(4,4,n,s)}function lm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function um(n,s,a){return a=a!=null?a.concat([n]):null,_u(4,4,lm.bind(null,s,n),a)}function Uh(){}function cm(n,s){var a=Dn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Lh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function hm(n,s){var a=Dn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Lh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function dm(n,s,a){return cs&21?(Hn(a,s)||(a=Zi(),ot.lanes|=a,hs|=a,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,cn=!0),n.memoizedState=a)}function ew(n,s){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var c=jh.transition;jh.transition={};try{n(!1),s()}finally{Fe=a,jh.transition=c}}function fm(){return Dn().memoizedState}function tw(n,s,a){var c=gi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},pm(n))mm(s,a);else if(a=qp(n,s,a,c),a!==null){var f=tn();Xn(a,n,c,f),gm(a,s,c)}}function nw(n,s,a){var c=gi(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(pm(n))mm(s,f);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var w=s.lastRenderedState,P=y(w,a);if(f.hasEagerState=!0,f.eagerState=P,Hn(P,w)){var L=s.interleaved;L===null?(f.next=f,kh(s)):(f.next=L.next,L.next=f),s.interleaved=f;return}}catch{}finally{}a=qp(n,s,f,c),a!==null&&(f=tn(),Xn(a,n,c,f),gm(a,s,c))}}function pm(n){var s=n.alternate;return n===ot||s!==null&&s===ot}function mm(n,s){Pa=gu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function gm(n,s,a){if(a&4194240){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ti(n,a)}}var vu={readContext:Nn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},rw={readContext:Nn,useCallback:function(n,s){return hr().memoizedState=[n,s===void 0?null:s],n},useContext:Nn,useEffect:sm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,yu(4194308,4,lm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return yu(4194308,4,n,s)},useInsertionEffect:function(n,s){return yu(4,2,n,s)},useMemo:function(n,s){var a=hr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=hr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=tw.bind(null,ot,n),[c.memoizedState,n]},useRef:function(n){var s=hr();return n={current:n},s.memoizedState=n},useState:rm,useDebugValue:Uh,useDeferredValue:function(n){return hr().memoizedState=n},useTransition:function(){var n=rm(!1),s=n[0];return n=ew.bind(null,n[1]),hr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=ot,f=hr();if(it){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Nt===null)throw Error(t(349));cs&30||Jp(c,s,a)}f.memoizedState=a;var y={value:a,getSnapshot:s};return f.queue=y,sm(em.bind(null,c,y,n),[n]),c.flags|=2048,ja(9,Zp.bind(null,c,y,a,s),void 0,null),a},useId:function(){var n=hr(),s=Nt.identifierPrefix;if(it){var a=Lr,c=jr;a=(c&~(1<<32-Jt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Na++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=ZE++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},iw={readContext:Nn,useCallback:cm,useContext:Nn,useEffect:Fh,useImperativeHandle:um,useInsertionEffect:om,useLayoutEffect:am,useMemo:hm,useReducer:bh,useRef:im,useState:function(){return bh(Da)},useDebugValue:Uh,useDeferredValue:function(n){var s=Dn();return dm(s,xt.memoizedState,n)},useTransition:function(){var n=bh(Da)[0],s=Dn().memoizedState;return[n,s]},useMutableSource:Yp,useSyncExternalStore:Xp,useId:fm,unstable_isNewReconciler:!1},sw={readContext:Nn,useCallback:cm,useContext:Nn,useEffect:Fh,useImperativeHandle:um,useInsertionEffect:om,useLayoutEffect:am,useMemo:hm,useReducer:Mh,useRef:im,useState:function(){return Mh(Da)},useDebugValue:Uh,useDeferredValue:function(n){var s=Dn();return xt===null?s.memoizedState=n:dm(s,xt.memoizedState,n)},useTransition:function(){var n=Mh(Da)[0],s=Dn().memoizedState;return[n,s]},useMutableSource:Yp,useSyncExternalStore:Xp,useId:fm,unstable_isNewReconciler:!1};function Gn(n,s){if(n&&n.defaultProps){s=Y({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Bh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:Y({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Eu={isMounted:function(n){return(n=n._reactInternals)?Fn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=tn(),f=gi(n),y=Or(c,f);y.payload=s,a!=null&&(y.callback=a),s=di(n,y,f),s!==null&&(Xn(s,n,f,c),du(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=tn(),f=gi(n),y=Or(c,f);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=di(n,y,f),s!==null&&(Xn(s,n,f,c),du(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=tn(),c=gi(n),f=Or(a,c);f.tag=2,s!=null&&(f.callback=s),s=di(n,f,c),s!==null&&(Xn(s,n,c,a),du(s,n,c))}};function ym(n,s,a,c,f,y,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,y,w):s.prototype&&s.prototype.isPureReactComponent?!va(a,c)||!va(f,y):!0}function _m(n,s,a){var c=!1,f=ui,y=s.contextType;return typeof y=="object"&&y!==null?y=Nn(y):(f=un(s)?ss:Wt.current,c=s.contextTypes,y=(c=c!=null)?io(n,f):ui),s=new s(a,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Eu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=y),s}function vm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Eu.enqueueReplaceState(s,s.state,null)}function zh(n,s,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Rh(n);var y=s.contextType;typeof y=="object"&&y!==null?f.context=Nn(y):(y=un(s)?ss:Wt.current,f.context=io(n,y)),f.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Bh(n,s,y,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Eu.enqueueReplaceState(f,f.state,null),fu(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function fo(n,s){try{var a="",c=s;do a+=je(c),c=c.return;while(c);var f=a}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:f,digest:null}}function Wh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function $h(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var ow=typeof WeakMap=="function"?WeakMap:Map;function Em(n,s,a){a=Or(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){ku||(ku=!0,sd=c),$h(n,s)},a}function wm(n,s,a){a=Or(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){$h(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){$h(n,s),typeof c!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Tm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new ow;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),n=Ew.bind(null,n,s,a),s.then(n,n))}function Im(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function xm(n,s,a,c,f){return n.mode&1?(n.flags|=65536,n.lanes=f,n):(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Or(-1,1),s.tag=2,di(a,s,1))),a.lanes|=1),n)}var aw=oe.ReactCurrentOwner,cn=!1;function en(n,s,a,c){s.child=n===null?$p(s,null,a,c):lo(s,n.child,a,c)}function Sm(n,s,a,c,f){a=a.render;var y=s.ref;return co(s,f),c=Vh(n,s,a,c,y,f),a=Oh(),n!==null&&!cn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,br(n,s,f)):(it&&a&&_h(s),s.flags|=1,en(n,s,c,f),s.child)}function Cm(n,s,a,c,f){if(n===null){var y=a.type;return typeof y=="function"&&!dd(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=y,km(n,s,y,c,f)):(n=ju(a.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!(n.lanes&f)){var w=y.memoizedProps;if(a=a.compare,a=a!==null?a:va,a(w,c)&&n.ref===s.ref)return br(n,s,f)}return s.flags|=1,n=_i(y,c),n.ref=s.ref,n.return=s,s.child=n}function km(n,s,a,c,f){if(n!==null){var y=n.memoizedProps;if(va(y,c)&&n.ref===s.ref)if(cn=!1,s.pendingProps=c=y,(n.lanes&f)!==0)n.flags&131072&&(cn=!0);else return s.lanes=n.lanes,br(n,s,f)}return qh(n,s,a,c,f)}function Rm(n,s,a){var c=s.pendingProps,f=c.children,y=n!==null?n.memoizedState:null;if(c.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(mo,Tn),Tn|=a;else{if(!(a&1073741824))return n=y!==null?y.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Je(mo,Tn),Tn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=y!==null?y.baseLanes:a,Je(mo,Tn),Tn|=c}else y!==null?(c=y.baseLanes|a,s.memoizedState=null):c=a,Je(mo,Tn),Tn|=c;return en(n,s,f,a),s.child}function Am(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function qh(n,s,a,c,f){var y=un(a)?ss:Wt.current;return y=io(s,y),co(s,f),a=Vh(n,s,a,c,y,f),c=Oh(),n!==null&&!cn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,br(n,s,f)):(it&&c&&_h(s),s.flags|=1,en(n,s,a,f),s.child)}function Pm(n,s,a,c,f){if(un(a)){var y=!0;iu(s)}else y=!1;if(co(s,f),s.stateNode===null)Tu(n,s),_m(s,a,c),zh(s,a,c,f),c=!0;else if(n===null){var w=s.stateNode,P=s.memoizedProps;w.props=P;var L=w.context,q=a.contextType;typeof q=="object"&&q!==null?q=Nn(q):(q=un(a)?ss:Wt.current,q=io(s,q));var ne=a.getDerivedStateFromProps,ie=typeof ne=="function"||typeof w.getSnapshotBeforeUpdate=="function";ie||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==c||L!==q)&&vm(s,w,c,q),hi=!1;var te=s.memoizedState;w.state=te,fu(s,c,w,f),L=s.memoizedState,P!==c||te!==L||ln.current||hi?(typeof ne=="function"&&(Bh(s,a,ne,c),L=s.memoizedState),(P=hi||ym(s,a,P,c,te,L,q))?(ie||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=L),w.props=c,w.state=L,w.context=q,c=P):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Hp(n,s),P=s.memoizedProps,q=s.type===s.elementType?P:Gn(s.type,P),w.props=q,ie=s.pendingProps,te=w.context,L=a.contextType,typeof L=="object"&&L!==null?L=Nn(L):(L=un(a)?ss:Wt.current,L=io(s,L));var ue=a.getDerivedStateFromProps;(ne=typeof ue=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==ie||te!==L)&&vm(s,w,c,L),hi=!1,te=s.memoizedState,w.state=te,fu(s,c,w,f);var ge=s.memoizedState;P!==ie||te!==ge||ln.current||hi?(typeof ue=="function"&&(Bh(s,a,ue,c),ge=s.memoizedState),(q=hi||ym(s,a,q,c,te,ge,L)||!1)?(ne||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ge,L),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ge,L)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ge),w.props=c,w.state=ge,w.context=L,c=q):(typeof w.componentDidUpdate!="function"||P===n.memoizedProps&&te===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&te===n.memoizedState||(s.flags|=1024),c=!1)}return Hh(n,s,a,c,y,f)}function Hh(n,s,a,c,f,y){Am(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return f&&Vp(s,a,!1),br(n,s,y);c=s.stateNode,aw.current=s;var P=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=lo(s,n.child,null,y),s.child=lo(s,null,P,y)):en(n,s,P,y),s.memoizedState=c.state,f&&Vp(s,a,!0),s.child}function Nm(n){var s=n.stateNode;s.pendingContext?jp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&jp(n,s.context,!1),Ah(n,s.containerInfo)}function Dm(n,s,a,c,f){return ao(),Th(f),s.flags|=256,en(n,s,a,c),s.child}var Kh={dehydrated:null,treeContext:null,retryLane:0};function Gh(n){return{baseLanes:n,cachePool:null,transitions:null}}function jm(n,s,a){var c=s.pendingProps,f=st.current,y=!1,w=(s.flags&128)!==0,P;if((P=w)||(P=n!==null&&n.memoizedState===null?!1:(f&2)!==0),P?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Je(st,f&1),n===null)return wh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(w=c.children,n=c.fallback,y?(c=s.mode,y=s.child,w={mode:"hidden",children:w},!(c&1)&&y!==null?(y.childLanes=0,y.pendingProps=w):y=Lu(w,c,0,null),n=ms(n,c,a,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=Gh(a),s.memoizedState=Kh,n):Qh(s,w));if(f=n.memoizedState,f!==null&&(P=f.dehydrated,P!==null))return lw(n,s,w,c,P,f,a);if(y){y=c.fallback,w=s.mode,f=n.child,P=f.sibling;var L={mode:"hidden",children:c.children};return!(w&1)&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=L,s.deletions=null):(c=_i(f,L),c.subtreeFlags=f.subtreeFlags&14680064),P!==null?y=_i(P,y):(y=ms(y,w,a,null),y.flags|=2),y.return=s,c.return=s,c.sibling=y,s.child=c,c=y,y=s.child,w=n.child.memoizedState,w=w===null?Gh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=n.childLanes&~a,s.memoizedState=Kh,c}return y=n.child,n=y.sibling,c=_i(y,{mode:"visible",children:c.children}),!(s.mode&1)&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Qh(n,s){return s=Lu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function wu(n,s,a,c){return c!==null&&Th(c),lo(s,n.child,null,a),n=Qh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function lw(n,s,a,c,f,y,w){if(a)return s.flags&256?(s.flags&=-257,c=Wh(Error(t(422))),wu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=c.fallback,f=s.mode,c=Lu({mode:"visible",children:c.children},f,0,null),y=ms(y,f,w,null),y.flags|=2,c.return=s,y.return=s,c.sibling=y,s.child=c,s.mode&1&&lo(s,n.child,null,w),s.child.memoizedState=Gh(w),s.memoizedState=Kh,y);if(!(s.mode&1))return wu(n,s,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var P=c.dgst;return c=P,y=Error(t(419)),c=Wh(y,c,void 0),wu(n,s,w,c)}if(P=(w&n.childLanes)!==0,cn||P){if(c=Nt,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(c.suspendedLanes|w)?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,Vr(n,f),Xn(c,n,f,-1))}return hd(),c=Wh(Error(t(421))),wu(n,s,w,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=ww.bind(null,n),f._reactRetry=s,null):(n=y.treeContext,wn=ai(f.nextSibling),En=s,it=!0,Kn=null,n!==null&&(An[Pn++]=jr,An[Pn++]=Lr,An[Pn++]=os,jr=n.id,Lr=n.overflow,os=s),s=Qh(s,c.children),s.flags|=4096,s)}function Lm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Ch(n.return,s,a)}function Yh(n,s,a,c,f){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=a,y.tailMode=f)}function Vm(n,s,a){var c=s.pendingProps,f=c.revealOrder,y=c.tail;if(en(n,s,c.children,a),c=st.current,c&2)c=c&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Lm(n,a,s);else if(n.tag===19)Lm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Je(st,c),!(s.mode&1))s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&pu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Yh(s,!1,f,a,y);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&pu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Yh(s,!0,a,null,y);break;case"together":Yh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Tu(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function br(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),hs|=s.lanes,!(a&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=_i(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=_i(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function uw(n,s,a){switch(s.tag){case 3:Nm(s),ao();break;case 5:Qp(s);break;case 1:un(s.type)&&iu(s);break;case 4:Ah(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;Je(cu,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Je(st,st.current&1),s.flags|=128,null):a&s.child.childLanes?jm(n,s,a):(Je(st,st.current&1),n=br(n,s,a),n!==null?n.sibling:null);Je(st,st.current&1);break;case 19:if(c=(a&s.childLanes)!==0,n.flags&128){if(c)return Vm(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Je(st,st.current),c)break;return null;case 22:case 23:return s.lanes=0,Rm(n,s,a)}return br(n,s,a)}var Om,Xh,bm,Mm;Om=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Xh=function(){},bm=function(n,s,a,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,us(cr.current);var y=null;switch(a){case"input":f=Et(n,f),c=Et(n,c),y=[];break;case"select":f=Y({},f,{value:void 0}),c=Y({},c,{value:void 0}),y=[];break;case"textarea":f=Go(n,f),c=Go(n,c),y=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=tu)}ea(a,c);var w;a=null;for(q in f)if(!c.hasOwnProperty(q)&&f.hasOwnProperty(q)&&f[q]!=null)if(q==="style"){var P=f[q];for(w in P)P.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?y||(y=[]):(y=y||[]).push(q,null));for(q in c){var L=c[q];if(P=f!=null?f[q]:void 0,c.hasOwnProperty(q)&&L!==P&&(L!=null||P!=null))if(q==="style")if(P){for(w in P)!P.hasOwnProperty(w)||L&&L.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in L)L.hasOwnProperty(w)&&P[w]!==L[w]&&(a||(a={}),a[w]=L[w])}else a||(y||(y=[]),y.push(q,a)),a=L;else q==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,P=P?P.__html:void 0,L!=null&&P!==L&&(y=y||[]).push(q,L)):q==="children"?typeof L!="string"&&typeof L!="number"||(y=y||[]).push(q,""+L):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(L!=null&&q==="onScroll"&&Ze("scroll",n),y||P===L||(y=[])):(y=y||[]).push(q,L))}a&&(y=y||[]).push("style",a);var q=y;(s.updateQueue=q)&&(s.flags|=4)}},Mm=function(n,s,a,c){a!==c&&(s.flags|=4)};function La(n,s){if(!it)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function qt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function cw(n,s,a){var c=s.pendingProps;switch(vh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(s),null;case 1:return un(s.type)&&ru(),qt(s),null;case 3:return c=s.stateNode,ho(),et(ln),et(Wt),Dh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(lu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Kn!==null&&(ld(Kn),Kn=null))),Xh(n,s),qt(s),null;case 5:Ph(s);var f=us(Aa.current);if(a=s.type,n!==null&&s.stateNode!=null)bm(n,s,a,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return qt(s),null}if(n=us(cr.current),lu(s)){c=s.stateNode,a=s.type;var y=s.memoizedProps;switch(c[ur]=s,c[xa]=y,n=(s.mode&1)!==0,a){case"dialog":Ze("cancel",c),Ze("close",c);break;case"iframe":case"object":case"embed":Ze("load",c);break;case"video":case"audio":for(f=0;f<wa.length;f++)Ze(wa[f],c);break;case"source":Ze("error",c);break;case"img":case"image":case"link":Ze("error",c),Ze("load",c);break;case"details":Ze("toggle",c);break;case"input":sn(c,y),Ze("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!y.multiple},Ze("invalid",c);break;case"textarea":Rs(c,y),Ze("invalid",c)}ea(a,y),f=null;for(var w in y)if(y.hasOwnProperty(w)){var P=y[w];w==="children"?typeof P=="string"?c.textContent!==P&&(y.suppressHydrationWarning!==!0&&eu(c.textContent,P,n),f=["children",P]):typeof P=="number"&&c.textContent!==""+P&&(y.suppressHydrationWarning!==!0&&eu(c.textContent,P,n),f=["children",""+P]):o.hasOwnProperty(w)&&P!=null&&w==="onScroll"&&Ze("scroll",c)}switch(a){case"input":Ke(c),Cl(c,y,!0);break;case"textarea":Ke(c),Qo(c);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(c.onclick=tu)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=wt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[ur]=s,n[xa]=c,Om(n,s,!1,!1),s.stateNode=n;e:{switch(w=ta(a,c),a){case"dialog":Ze("cancel",n),Ze("close",n),f=c;break;case"iframe":case"object":case"embed":Ze("load",n),f=c;break;case"video":case"audio":for(f=0;f<wa.length;f++)Ze(wa[f],n);f=c;break;case"source":Ze("error",n),f=c;break;case"img":case"image":case"link":Ze("error",n),Ze("load",n),f=c;break;case"details":Ze("toggle",n),f=c;break;case"input":sn(n,c),f=Et(n,c),Ze("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=Y({},c,{value:void 0}),Ze("invalid",n);break;case"textarea":Rs(n,c),f=Go(n,c),Ze("invalid",n);break;default:f=c}ea(a,f),P=f;for(y in P)if(P.hasOwnProperty(y)){var L=P[y];y==="style"?Jo(n,L):y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Yo(n,L)):y==="children"?typeof L=="string"?(a!=="textarea"||L!=="")&&Yr(n,L):typeof L=="number"&&Yr(n,""+L):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?L!=null&&y==="onScroll"&&Ze("scroll",n):L!=null&&ee(n,y,L,w))}switch(a){case"input":Ke(n),Cl(n,c,!1);break;case"textarea":Ke(n),Qo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+ce(c.value));break;case"select":n.multiple=!!c.multiple,y=c.value,y!=null?Ir(n,!!c.multiple,y,!1):c.defaultValue!=null&&Ir(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=tu)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return qt(s),null;case 6:if(n&&s.stateNode!=null)Mm(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=us(Aa.current),us(cr.current),lu(s)){if(c=s.stateNode,a=s.memoizedProps,c[ur]=s,(y=c.nodeValue!==a)&&(n=En,n!==null))switch(n.tag){case 3:eu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&eu(c.nodeValue,a,(n.mode&1)!==0)}y&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[ur]=s,s.stateNode=c}return qt(s),null;case 13:if(et(st),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(it&&wn!==null&&s.mode&1&&!(s.flags&128))Bp(),ao(),s.flags|=98560,y=!1;else if(y=lu(s),c!==null&&c.dehydrated!==null){if(n===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[ur]=s}else ao(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;qt(s),y=!1}else Kn!==null&&(ld(Kn),Kn=null),y=!0;if(!y)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,s.mode&1&&(n===null||st.current&1?St===0&&(St=3):hd())),s.updateQueue!==null&&(s.flags|=4),qt(s),null);case 4:return ho(),Xh(n,s),n===null&&Ta(s.stateNode.containerInfo),qt(s),null;case 10:return Sh(s.type._context),qt(s),null;case 17:return un(s.type)&&ru(),qt(s),null;case 19:if(et(st),y=s.memoizedState,y===null)return qt(s),null;if(c=(s.flags&128)!==0,w=y.rendering,w===null)if(c)La(y,!1);else{if(St!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(w=pu(n),w!==null){for(s.flags|=128,La(y,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)y=a,n=c,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,n=w.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Je(st,st.current&1|2),s.child}n=n.sibling}y.tail!==null&&Xe()>go&&(s.flags|=128,c=!0,La(y,!1),s.lanes=4194304)}else{if(!c)if(n=pu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),La(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!it)return qt(s),null}else 2*Xe()-y.renderingStartTime>go&&a!==1073741824&&(s.flags|=128,c=!0,La(y,!1),s.lanes=4194304);y.isBackwards?(w.sibling=s.child,s.child=w):(a=y.last,a!==null?a.sibling=w:s.child=w,y.last=w)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Xe(),s.sibling=null,a=st.current,Je(st,c?a&1|2:a&1),s):(qt(s),null);case 22:case 23:return cd(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&s.mode&1?Tn&1073741824&&(qt(s),s.subtreeFlags&6&&(s.flags|=8192)):qt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function hw(n,s){switch(vh(s),s.tag){case 1:return un(s.type)&&ru(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ho(),et(ln),et(Wt),Dh(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return Ph(s),null;case 13:if(et(st),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ao()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return et(st),null;case 4:return ho(),null;case 10:return Sh(s.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var Iu=!1,Ht=!1,dw=typeof WeakSet=="function"?WeakSet:Set,pe=null;function po(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ct(n,s,c)}else a.current=null}function Jh(n,s,a){try{a()}catch(c){ct(n,s,c)}}var Fm=!1;function fw(n,s){if(ch=ii,n=yp(),nh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var w=0,P=-1,L=-1,q=0,ne=0,ie=n,te=null;t:for(;;){for(var ue;ie!==a||f!==0&&ie.nodeType!==3||(P=w+f),ie!==y||c!==0&&ie.nodeType!==3||(L=w+c),ie.nodeType===3&&(w+=ie.nodeValue.length),(ue=ie.firstChild)!==null;)te=ie,ie=ue;for(;;){if(ie===n)break t;if(te===a&&++q===f&&(P=w),te===y&&++ne===c&&(L=w),(ue=ie.nextSibling)!==null)break;ie=te,te=ie.parentNode}ie=ue}a=P===-1||L===-1?null:{start:P,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(hh={focusedElem:n,selectionRange:a},ii=!1,pe=s;pe!==null;)if(s=pe,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,pe=n;else for(;pe!==null;){s=pe;try{var ge=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ye=ge.memoizedProps,dt=ge.memoizedState,z=s.stateNode,M=z.getSnapshotBeforeUpdate(s.elementType===s.type?ye:Gn(s.type,ye),dt);z.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var $=s.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){ct(s,s.return,se)}if(n=s.sibling,n!==null){n.return=s.return,pe=n;break}pe=s.return}return ge=Fm,Fm=!1,ge}function Va(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var y=f.destroy;f.destroy=void 0,y!==void 0&&Jh(s,a,y)}f=f.next}while(f!==c)}}function xu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Zh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Um(n){var s=n.alternate;s!==null&&(n.alternate=null,Um(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[ur],delete s[xa],delete s[mh],delete s[QE],delete s[YE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Bm(n){return n.tag===5||n.tag===3||n.tag===4}function zm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Bm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ed(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=tu));else if(c!==4&&(n=n.child,n!==null))for(ed(n,s,a),n=n.sibling;n!==null;)ed(n,s,a),n=n.sibling}function td(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(td(n,s,a),n=n.sibling;n!==null;)td(n,s,a),n=n.sibling}var bt=null,Qn=!1;function fi(n,s,a){for(a=a.child;a!==null;)Wm(n,s,a),a=a.sibling}function Wm(n,s,a){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Xi,a)}catch{}switch(a.tag){case 5:Ht||po(a,s);case 6:var c=bt,f=Qn;bt=null,fi(n,s,a),bt=c,Qn=f,bt!==null&&(Qn?(n=bt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):bt.removeChild(a.stateNode));break;case 18:bt!==null&&(Qn?(n=bt,a=a.stateNode,n.nodeType===8?ph(n.parentNode,a):n.nodeType===1&&ph(n,a),$n(n)):ph(bt,a.stateNode));break;case 4:c=bt,f=Qn,bt=a.stateNode.containerInfo,Qn=!0,fi(n,s,a),bt=c,Qn=f;break;case 0:case 11:case 14:case 15:if(!Ht&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var y=f,w=y.destroy;y=y.tag,w!==void 0&&(y&2||y&4)&&Jh(a,s,w),f=f.next}while(f!==c)}fi(n,s,a);break;case 1:if(!Ht&&(po(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(P){ct(a,s,P)}fi(n,s,a);break;case 21:fi(n,s,a);break;case 22:a.mode&1?(Ht=(c=Ht)||a.memoizedState!==null,fi(n,s,a),Ht=c):fi(n,s,a);break;default:fi(n,s,a)}}function $m(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new dw),s.forEach(function(c){var f=Tw.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function Yn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var y=n,w=s,P=w;e:for(;P!==null;){switch(P.tag){case 5:bt=P.stateNode,Qn=!1;break e;case 3:bt=P.stateNode.containerInfo,Qn=!0;break e;case 4:bt=P.stateNode.containerInfo,Qn=!0;break e}P=P.return}if(bt===null)throw Error(t(160));Wm(y,w,f),bt=null,Qn=!1;var L=f.alternate;L!==null&&(L.return=null),f.return=null}catch(q){ct(f,s,q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)qm(s,n),s=s.sibling}function qm(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Yn(s,n),dr(n),c&4){try{Va(3,n,n.return),xu(3,n)}catch(ye){ct(n,n.return,ye)}try{Va(5,n,n.return)}catch(ye){ct(n,n.return,ye)}}break;case 1:Yn(s,n),dr(n),c&512&&a!==null&&po(a,a.return);break;case 5:if(Yn(s,n),dr(n),c&512&&a!==null&&po(a,a.return),n.flags&32){var f=n.stateNode;try{Yr(f,"")}catch(ye){ct(n,n.return,ye)}}if(c&4&&(f=n.stateNode,f!=null)){var y=n.memoizedProps,w=a!==null?a.memoizedProps:y,P=n.type,L=n.updateQueue;if(n.updateQueue=null,L!==null)try{P==="input"&&y.type==="radio"&&y.name!=null&&Ho(f,y),ta(P,w);var q=ta(P,y);for(w=0;w<L.length;w+=2){var ne=L[w],ie=L[w+1];ne==="style"?Jo(f,ie):ne==="dangerouslySetInnerHTML"?Yo(f,ie):ne==="children"?Yr(f,ie):ee(f,ne,ie,q)}switch(P){case"input":Ko(f,y);break;case"textarea":As(f,y);break;case"select":var te=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var ue=y.value;ue!=null?Ir(f,!!y.multiple,ue,!1):te!==!!y.multiple&&(y.defaultValue!=null?Ir(f,!!y.multiple,y.defaultValue,!0):Ir(f,!!y.multiple,y.multiple?[]:"",!1))}f[xa]=y}catch(ye){ct(n,n.return,ye)}}break;case 6:if(Yn(s,n),dr(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,y=n.memoizedProps;try{f.nodeValue=y}catch(ye){ct(n,n.return,ye)}}break;case 3:if(Yn(s,n),dr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{$n(s.containerInfo)}catch(ye){ct(n,n.return,ye)}break;case 4:Yn(s,n),dr(n);break;case 13:Yn(s,n),dr(n),f=n.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(id=Xe())),c&4&&$m(n);break;case 22:if(ne=a!==null&&a.memoizedState!==null,n.mode&1?(Ht=(q=Ht)||ne,Yn(s,n),Ht=q):Yn(s,n),dr(n),c&8192){if(q=n.memoizedState!==null,(n.stateNode.isHidden=q)&&!ne&&n.mode&1)for(pe=n,ne=n.child;ne!==null;){for(ie=pe=ne;pe!==null;){switch(te=pe,ue=te.child,te.tag){case 0:case 11:case 14:case 15:Va(4,te,te.return);break;case 1:po(te,te.return);var ge=te.stateNode;if(typeof ge.componentWillUnmount=="function"){c=te,a=te.return;try{s=c,ge.props=s.memoizedProps,ge.state=s.memoizedState,ge.componentWillUnmount()}catch(ye){ct(c,a,ye)}}break;case 5:po(te,te.return);break;case 22:if(te.memoizedState!==null){Gm(ie);continue}}ue!==null?(ue.return=te,pe=ue):Gm(ie)}ne=ne.sibling}e:for(ne=null,ie=n;;){if(ie.tag===5){if(ne===null){ne=ie;try{f=ie.stateNode,q?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(P=ie.stateNode,L=ie.memoizedProps.style,w=L!=null&&L.hasOwnProperty("display")?L.display:null,P.style.display=Xo("display",w))}catch(ye){ct(n,n.return,ye)}}}else if(ie.tag===6){if(ne===null)try{ie.stateNode.nodeValue=q?"":ie.memoizedProps}catch(ye){ct(n,n.return,ye)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===n)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===n)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===n)break e;ne===ie&&(ne=null),ie=ie.return}ne===ie&&(ne=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:Yn(s,n),dr(n),c&4&&$m(n);break;case 21:break;default:Yn(s,n),dr(n)}}function dr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Bm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Yr(f,""),c.flags&=-33);var y=zm(n);td(n,y,f);break;case 3:case 4:var w=c.stateNode.containerInfo,P=zm(n);ed(n,P,w);break;default:throw Error(t(161))}}catch(L){ct(n,n.return,L)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function pw(n,s,a){pe=n,Hm(n)}function Hm(n,s,a){for(var c=(n.mode&1)!==0;pe!==null;){var f=pe,y=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||Iu;if(!w){var P=f.alternate,L=P!==null&&P.memoizedState!==null||Ht;P=Iu;var q=Ht;if(Iu=w,(Ht=L)&&!q)for(pe=f;pe!==null;)w=pe,L=w.child,w.tag===22&&w.memoizedState!==null?Qm(f):L!==null?(L.return=w,pe=L):Qm(f);for(;y!==null;)pe=y,Hm(y),y=y.sibling;pe=f,Iu=P,Ht=q}Km(n)}else f.subtreeFlags&8772&&y!==null?(y.return=f,pe=y):Km(n)}}function Km(n){for(;pe!==null;){var s=pe;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Ht||xu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Ht)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Gn(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&Gp(s,y,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Gp(s,w,a)}break;case 5:var P=s.stateNode;if(a===null&&s.flags&4){a=P;var L=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&a.focus();break;case"img":L.src&&(a.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var q=s.alternate;if(q!==null){var ne=q.memoizedState;if(ne!==null){var ie=ne.dehydrated;ie!==null&&$n(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ht||s.flags&512&&Zh(s)}catch(te){ct(s,s.return,te)}}if(s===n){pe=null;break}if(a=s.sibling,a!==null){a.return=s.return,pe=a;break}pe=s.return}}function Gm(n){for(;pe!==null;){var s=pe;if(s===n){pe=null;break}var a=s.sibling;if(a!==null){a.return=s.return,pe=a;break}pe=s.return}}function Qm(n){for(;pe!==null;){var s=pe;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{xu(4,s)}catch(L){ct(s,a,L)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(L){ct(s,f,L)}}var y=s.return;try{Zh(s)}catch(L){ct(s,y,L)}break;case 5:var w=s.return;try{Zh(s)}catch(L){ct(s,w,L)}}}catch(L){ct(s,s.return,L)}if(s===n){pe=null;break}var P=s.sibling;if(P!==null){P.return=s.return,pe=P;break}pe=s.return}}var mw=Math.ceil,Su=oe.ReactCurrentDispatcher,nd=oe.ReactCurrentOwner,jn=oe.ReactCurrentBatchConfig,We=0,Nt=null,mt=null,Mt=0,Tn=0,mo=li(0),St=0,Oa=null,hs=0,Cu=0,rd=0,ba=null,hn=null,id=0,go=1/0,Mr=null,ku=!1,sd=null,pi=null,Ru=!1,mi=null,Au=0,Ma=0,od=null,Pu=-1,Nu=0;function tn(){return We&6?Xe():Pu!==-1?Pu:Pu=Xe()}function gi(n){return n.mode&1?We&2&&Mt!==0?Mt&-Mt:JE.transition!==null?(Nu===0&&(Nu=Zi()),Nu):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:da(n.type)),n):1}function Xn(n,s,a,c){if(50<Ma)throw Ma=0,od=null,Error(t(185));ei(n,a,c),(!(We&2)||n!==Nt)&&(n===Nt&&(!(We&2)&&(Cu|=a),St===4&&yi(n,Mt)),dn(n,c),a===1&&We===0&&!(s.mode&1)&&(go=Xe()+500,su&&ci()))}function dn(n,s){var a=n.callbackNode;Cr(n,s);var c=Ji(n,n===Nt?Mt:0);if(c===0)a!==null&&aa(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&aa(a),s===1)n.tag===0?XE(Xm.bind(null,n)):Op(Xm.bind(null,n)),KE(function(){!(We&6)&&ci()}),a=null;else{switch(ni(c)){case 1:a=Yi;break;case 4:a=Xr;break;case 16:a=Cn;break;case 536870912:a=Nl;break;default:a=Cn}a=sg(a,Ym.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Ym(n,s){if(Pu=-1,Nu=0,We&6)throw Error(t(327));var a=n.callbackNode;if(yo()&&n.callbackNode!==a)return null;var c=Ji(n,n===Nt?Mt:0);if(c===0)return null;if(c&30||c&n.expiredLanes||s)s=Du(n,c);else{s=c;var f=We;We|=2;var y=Zm();(Nt!==n||Mt!==s)&&(Mr=null,go=Xe()+500,fs(n,s));do try{_w();break}catch(P){Jm(n,P)}while(!0);xh(),Su.current=y,We=f,mt!==null?s=0:(Nt=null,Mt=0,s=St)}if(s!==0){if(s===2&&(f=yn(n),f!==0&&(c=f,s=ad(n,f))),s===1)throw a=Oa,fs(n,0),yi(n,c),dn(n,Xe()),a;if(s===6)yi(n,c);else{if(f=n.current.alternate,!(c&30)&&!gw(f)&&(s=Du(n,c),s===2&&(y=yn(n),y!==0&&(c=y,s=ad(n,y))),s===1))throw a=Oa,fs(n,0),yi(n,c),dn(n,Xe()),a;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ps(n,hn,Mr);break;case 3:if(yi(n,c),(c&130023424)===c&&(s=id+500-Xe(),10<s)){if(Ji(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){tn(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=fh(ps.bind(null,n,hn,Mr),s);break}ps(n,hn,Mr);break;case 4:if(yi(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var w=31-Jt(c);y=1<<w,w=s[w],w>f&&(f=w),c&=~y}if(c=f,c=Xe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*mw(c/1960))-c,10<c){n.timeoutHandle=fh(ps.bind(null,n,hn,Mr),c);break}ps(n,hn,Mr);break;case 5:ps(n,hn,Mr);break;default:throw Error(t(329))}}}return dn(n,Xe()),n.callbackNode===a?Ym.bind(null,n):null}function ad(n,s){var a=ba;return n.current.memoizedState.isDehydrated&&(fs(n,s).flags|=256),n=Du(n,s),n!==2&&(s=hn,hn=a,s!==null&&ld(s)),n}function ld(n){hn===null?hn=n:hn.push.apply(hn,n)}function gw(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],y=f.getSnapshot;f=f.value;try{if(!Hn(y(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yi(n,s){for(s&=~rd,s&=~Cu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-Jt(s),c=1<<a;n[a]=-1,s&=~c}}function Xm(n){if(We&6)throw Error(t(327));yo();var s=Ji(n,0);if(!(s&1))return dn(n,Xe()),null;var a=Du(n,s);if(n.tag!==0&&a===2){var c=yn(n);c!==0&&(s=c,a=ad(n,c))}if(a===1)throw a=Oa,fs(n,0),yi(n,s),dn(n,Xe()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ps(n,hn,Mr),dn(n,Xe()),null}function ud(n,s){var a=We;We|=1;try{return n(s)}finally{We=a,We===0&&(go=Xe()+500,su&&ci())}}function ds(n){mi!==null&&mi.tag===0&&!(We&6)&&yo();var s=We;We|=1;var a=jn.transition,c=Fe;try{if(jn.transition=null,Fe=1,n)return n()}finally{Fe=c,jn.transition=a,We=s,!(We&6)&&ci()}}function cd(){Tn=mo.current,et(mo)}function fs(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,HE(a)),mt!==null)for(a=mt.return;a!==null;){var c=a;switch(vh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ru();break;case 3:ho(),et(ln),et(Wt),Dh();break;case 5:Ph(c);break;case 4:ho();break;case 13:et(st);break;case 19:et(st);break;case 10:Sh(c.type._context);break;case 22:case 23:cd()}a=a.return}if(Nt=n,mt=n=_i(n.current,null),Mt=Tn=s,St=0,Oa=null,rd=Cu=hs=0,hn=ba=null,ls!==null){for(s=0;s<ls.length;s++)if(a=ls[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,y=a.pending;if(y!==null){var w=y.next;y.next=f,c.next=w}a.pending=c}ls=null}return n}function Jm(n,s){do{var a=mt;try{if(xh(),mu.current=vu,gu){for(var c=ot.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}gu=!1}if(cs=0,Pt=xt=ot=null,Pa=!1,Na=0,nd.current=null,a===null||a.return===null){St=1,Oa=s,mt=null;break}e:{var y=n,w=a.return,P=a,L=s;if(s=Mt,P.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var q=L,ne=P,ie=ne.tag;if(!(ne.mode&1)&&(ie===0||ie===11||ie===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ue=Im(w);if(ue!==null){ue.flags&=-257,xm(ue,w,P,y,s),ue.mode&1&&Tm(y,q,s),s=ue,L=q;var ge=s.updateQueue;if(ge===null){var ye=new Set;ye.add(L),s.updateQueue=ye}else ge.add(L);break e}else{if(!(s&1)){Tm(y,q,s),hd();break e}L=Error(t(426))}}else if(it&&P.mode&1){var dt=Im(w);if(dt!==null){!(dt.flags&65536)&&(dt.flags|=256),xm(dt,w,P,y,s),Th(fo(L,P));break e}}y=L=fo(L,P),St!==4&&(St=2),ba===null?ba=[y]:ba.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var z=Em(y,L,s);Kp(y,z);break e;case 1:P=L;var M=y.type,$=y.stateNode;if(!(y.flags&128)&&(typeof M.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(pi===null||!pi.has($)))){y.flags|=65536,s&=-s,y.lanes|=s;var se=wm(y,P,s);Kp(y,se);break e}}y=y.return}while(y!==null)}tg(a)}catch(_e){s=_e,mt===a&&a!==null&&(mt=a=a.return);continue}break}while(!0)}function Zm(){var n=Su.current;return Su.current=vu,n===null?vu:n}function hd(){(St===0||St===3||St===2)&&(St=4),Nt===null||!(hs&268435455)&&!(Cu&268435455)||yi(Nt,Mt)}function Du(n,s){var a=We;We|=2;var c=Zm();(Nt!==n||Mt!==s)&&(Mr=null,fs(n,s));do try{yw();break}catch(f){Jm(n,f)}while(!0);if(xh(),We=a,Su.current=c,mt!==null)throw Error(t(261));return Nt=null,Mt=0,St}function yw(){for(;mt!==null;)eg(mt)}function _w(){for(;mt!==null&&!Al();)eg(mt)}function eg(n){var s=ig(n.alternate,n,Tn);n.memoizedProps=n.pendingProps,s===null?tg(n):mt=s,nd.current=null}function tg(n){var s=n;do{var a=s.alternate;if(n=s.return,s.flags&32768){if(a=hw(a,s),a!==null){a.flags&=32767,mt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{St=6,mt=null;return}}else if(a=cw(a,s,Tn),a!==null){mt=a;return}if(s=s.sibling,s!==null){mt=s;return}mt=s=n}while(s!==null);St===0&&(St=5)}function ps(n,s,a){var c=Fe,f=jn.transition;try{jn.transition=null,Fe=1,vw(n,s,a,c)}finally{jn.transition=f,Fe=c}return null}function vw(n,s,a,c){do yo();while(mi!==null);if(We&6)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var y=a.lanes|a.childLanes;if(Qe(n,y),n===Nt&&(mt=Nt=null,Mt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Ru||(Ru=!0,sg(Cn,function(){return yo(),null})),y=(a.flags&15990)!==0,a.subtreeFlags&15990||y){y=jn.transition,jn.transition=null;var w=Fe;Fe=1;var P=We;We|=4,nd.current=null,fw(n,a),qm(a,n),FE(hh),ii=!!ch,hh=ch=null,n.current=a,pw(a),Gc(),We=P,Fe=w,jn.transition=y}else n.current=a;if(Ru&&(Ru=!1,mi=n,Au=f),y=n.pendingLanes,y===0&&(pi=null),Dl(a.stateNode),dn(n,Xe()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(ku)throw ku=!1,n=sd,sd=null,n;return Au&1&&n.tag!==0&&yo(),y=n.pendingLanes,y&1?n===od?Ma++:(Ma=0,od=n):Ma=0,ci(),null}function yo(){if(mi!==null){var n=ni(Au),s=jn.transition,a=Fe;try{if(jn.transition=null,Fe=16>n?16:n,mi===null)var c=!1;else{if(n=mi,mi=null,Au=0,We&6)throw Error(t(331));var f=We;for(We|=4,pe=n.current;pe!==null;){var y=pe,w=y.child;if(pe.flags&16){var P=y.deletions;if(P!==null){for(var L=0;L<P.length;L++){var q=P[L];for(pe=q;pe!==null;){var ne=pe;switch(ne.tag){case 0:case 11:case 15:Va(8,ne,y)}var ie=ne.child;if(ie!==null)ie.return=ne,pe=ie;else for(;pe!==null;){ne=pe;var te=ne.sibling,ue=ne.return;if(Um(ne),ne===q){pe=null;break}if(te!==null){te.return=ue,pe=te;break}pe=ue}}}var ge=y.alternate;if(ge!==null){var ye=ge.child;if(ye!==null){ge.child=null;do{var dt=ye.sibling;ye.sibling=null,ye=dt}while(ye!==null)}}pe=y}}if(y.subtreeFlags&2064&&w!==null)w.return=y,pe=w;else e:for(;pe!==null;){if(y=pe,y.flags&2048)switch(y.tag){case 0:case 11:case 15:Va(9,y,y.return)}var z=y.sibling;if(z!==null){z.return=y.return,pe=z;break e}pe=y.return}}var M=n.current;for(pe=M;pe!==null;){w=pe;var $=w.child;if(w.subtreeFlags&2064&&$!==null)$.return=w,pe=$;else e:for(w=M;pe!==null;){if(P=pe,P.flags&2048)try{switch(P.tag){case 0:case 11:case 15:xu(9,P)}}catch(_e){ct(P,P.return,_e)}if(P===w){pe=null;break e}var se=P.sibling;if(se!==null){se.return=P.return,pe=se;break e}pe=P.return}}if(We=f,ci(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Xi,n)}catch{}c=!0}return c}finally{Fe=a,jn.transition=s}}return!1}function ng(n,s,a){s=fo(a,s),s=Em(n,s,1),n=di(n,s,1),s=tn(),n!==null&&(ei(n,1,s),dn(n,s))}function ct(n,s,a){if(n.tag===3)ng(n,n,a);else for(;s!==null;){if(s.tag===3){ng(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(pi===null||!pi.has(c))){n=fo(a,n),n=wm(s,n,1),s=di(s,n,1),n=tn(),s!==null&&(ei(s,1,n),dn(s,n));break}}s=s.return}}function Ew(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=tn(),n.pingedLanes|=n.suspendedLanes&a,Nt===n&&(Mt&a)===a&&(St===4||St===3&&(Mt&130023424)===Mt&&500>Xe()-id?fs(n,0):rd|=a),dn(n,s)}function rg(n,s){s===0&&(n.mode&1?(s=Fs,Fs<<=1,!(Fs&130023424)&&(Fs=4194304)):s=1);var a=tn();n=Vr(n,s),n!==null&&(ei(n,s,a),dn(n,a))}function ww(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),rg(n,a)}function Tw(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),rg(n,a)}var ig;ig=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||ln.current)cn=!0;else{if(!(n.lanes&a)&&!(s.flags&128))return cn=!1,uw(n,s,a);cn=!!(n.flags&131072)}else cn=!1,it&&s.flags&1048576&&bp(s,au,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Tu(n,s),n=s.pendingProps;var f=io(s,Wt.current);co(s,a),f=Vh(null,s,c,n,f,a);var y=Oh();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,un(c)?(y=!0,iu(s)):y=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Rh(s),f.updater=Eu,s.stateNode=f,f._reactInternals=s,zh(s,c,n,a),s=Hh(null,s,c,!0,y,a)):(s.tag=0,it&&y&&_h(s),en(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Tu(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=xw(c),n=Gn(c,n),f){case 0:s=qh(null,s,c,n,a);break e;case 1:s=Pm(null,s,c,n,a);break e;case 11:s=Sm(null,s,c,n,a);break e;case 14:s=Cm(null,s,c,Gn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Gn(c,f),qh(n,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Gn(c,f),Pm(n,s,c,f,a);case 3:e:{if(Nm(s),n===null)throw Error(t(387));c=s.pendingProps,y=s.memoizedState,f=y.element,Hp(n,s),fu(s,c,null,a);var w=s.memoizedState;if(c=w.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){f=fo(Error(t(423)),s),s=Dm(n,s,c,a,f);break e}else if(c!==f){f=fo(Error(t(424)),s),s=Dm(n,s,c,a,f);break e}else for(wn=ai(s.stateNode.containerInfo.firstChild),En=s,it=!0,Kn=null,a=$p(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ao(),c===f){s=br(n,s,a);break e}en(n,s,c,a)}s=s.child}return s;case 5:return Qp(s),n===null&&wh(s),c=s.type,f=s.pendingProps,y=n!==null?n.memoizedProps:null,w=f.children,dh(c,f)?w=null:y!==null&&dh(c,y)&&(s.flags|=32),Am(n,s),en(n,s,w,a),s.child;case 6:return n===null&&wh(s),null;case 13:return jm(n,s,a);case 4:return Ah(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=lo(s,null,c,a):en(n,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Gn(c,f),Sm(n,s,c,f,a);case 7:return en(n,s,s.pendingProps,a),s.child;case 8:return en(n,s,s.pendingProps.children,a),s.child;case 12:return en(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,y=s.memoizedProps,w=f.value,Je(cu,c._currentValue),c._currentValue=w,y!==null)if(Hn(y.value,w)){if(y.children===f.children&&!ln.current){s=br(n,s,a);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var P=y.dependencies;if(P!==null){w=y.child;for(var L=P.firstContext;L!==null;){if(L.context===c){if(y.tag===1){L=Or(-1,a&-a),L.tag=2;var q=y.updateQueue;if(q!==null){q=q.shared;var ne=q.pending;ne===null?L.next=L:(L.next=ne.next,ne.next=L),q.pending=L}}y.lanes|=a,L=y.alternate,L!==null&&(L.lanes|=a),Ch(y.return,a,s),P.lanes|=a;break}L=L.next}}else if(y.tag===10)w=y.type===s.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(t(341));w.lanes|=a,P=w.alternate,P!==null&&(P.lanes|=a),Ch(w,a,s),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===s){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}en(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,co(s,a),f=Nn(f),c=c(f),s.flags|=1,en(n,s,c,a),s.child;case 14:return c=s.type,f=Gn(c,s.pendingProps),f=Gn(c.type,f),Cm(n,s,c,f,a);case 15:return km(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Gn(c,f),Tu(n,s),s.tag=1,un(c)?(n=!0,iu(s)):n=!1,co(s,a),_m(s,c,f),zh(s,c,f,a),Hh(null,s,c,!0,n,a);case 19:return Vm(n,s,a);case 22:return Rm(n,s,a)}throw Error(t(156,s.tag))};function sg(n,s){return bs(n,s)}function Iw(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(n,s,a,c){return new Iw(n,s,a,c)}function dd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function xw(n){if(typeof n=="function")return dd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===N)return 11;if(n===nt)return 14}return 2}function _i(n,s){var a=n.alternate;return a===null?(a=Ln(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function ju(n,s,a,c,f,y){var w=2;if(c=n,typeof n=="function")dd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case b:return ms(a.children,f,y,s);case k:w=8,f|=8;break;case D:return n=Ln(12,a,s,f|2),n.elementType=D,n.lanes=y,n;case R:return n=Ln(13,a,s,f),n.elementType=R,n.lanes=y,n;case Te:return n=Ln(19,a,s,f),n.elementType=Te,n.lanes=y,n;case Le:return Lu(a,f,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case T:w=10;break e;case A:w=9;break e;case N:w=11;break e;case nt:w=14;break e;case He:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Ln(w,a,s,f),s.elementType=n,s.type=c,s.lanes=y,s}function ms(n,s,a,c){return n=Ln(7,n,c,s),n.lanes=a,n}function Lu(n,s,a,c){return n=Ln(22,n,c,s),n.elementType=Le,n.lanes=a,n.stateNode={isHidden:!1},n}function fd(n,s,a){return n=Ln(6,n,null,s),n.lanes=a,n}function pd(n,s,a){return s=Ln(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Sw(n,s,a,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zr(0),this.expirationTimes=Zr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zr(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function md(n,s,a,c,f,y,w,P,L){return n=new Sw(n,s,a,P,L),s===1?(s=1,y===!0&&(s|=8)):s=0,y=Ln(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rh(y),n}function Cw(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Se,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function og(n){if(!n)return ui;n=n._reactInternals;e:{if(Fn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(un(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(un(a))return Lp(n,a,s)}return s}function ag(n,s,a,c,f,y,w,P,L){return n=md(a,c,!0,n,f,y,w,P,L),n.context=og(null),a=n.current,c=tn(),f=gi(a),y=Or(c,f),y.callback=s??null,di(a,y,f),n.current.lanes=f,ei(n,f,c),dn(n,c),n}function Vu(n,s,a,c){var f=s.current,y=tn(),w=gi(f);return a=og(a),s.context===null?s.context=a:s.pendingContext=a,s=Or(y,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=di(f,s,w),n!==null&&(Xn(n,f,w,y),du(n,f,w)),w}function Ou(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function lg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function gd(n,s){lg(n,s),(n=n.alternate)&&lg(n,s)}function kw(){return null}var ug=typeof reportError=="function"?reportError:function(n){console.error(n)};function yd(n){this._internalRoot=n}bu.prototype.render=yd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Vu(n,s,null,null)},bu.prototype.unmount=yd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ds(function(){Vu(null,n,null,null)}),s[Nr]=null}};function bu(n){this._internalRoot=n}bu.prototype.unstable_scheduleHydration=function(n){if(n){var s=bl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<sr.length&&s!==0&&s<sr[a].priority;a++);sr.splice(a,0,n),a===0&&Ul(n)}};function _d(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Mu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function cg(){}function Rw(n,s,a,c,f){if(f){if(typeof c=="function"){var y=c;c=function(){var q=Ou(w);y.call(q)}}var w=ag(s,c,n,0,null,!1,!1,"",cg);return n._reactRootContainer=w,n[Nr]=w.current,Ta(n.nodeType===8?n.parentNode:n),ds(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var P=c;c=function(){var q=Ou(L);P.call(q)}}var L=md(n,0,!1,null,null,!1,!1,"",cg);return n._reactRootContainer=L,n[Nr]=L.current,Ta(n.nodeType===8?n.parentNode:n),ds(function(){Vu(s,L,a,c)}),L}function Fu(n,s,a,c,f){var y=a._reactRootContainer;if(y){var w=y;if(typeof f=="function"){var P=f;f=function(){var L=Ou(w);P.call(L)}}Vu(s,w,n,f)}else w=Rw(a,s,n,f,c);return Ou(w)}Vl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Jr(s.pendingLanes);a!==0&&(ti(s,a|1),dn(s,Xe()),!(We&6)&&(go=Xe()+500,ci()))}break;case 13:ds(function(){var c=Vr(n,1);if(c!==null){var f=tn();Xn(c,n,1,f)}}),gd(n,1)}},Us=function(n){if(n.tag===13){var s=Vr(n,134217728);if(s!==null){var a=tn();Xn(s,n,134217728,a)}gd(n,134217728)}},Ol=function(n){if(n.tag===13){var s=gi(n),a=Vr(n,s);if(a!==null){var c=tn();Xn(a,n,s,c)}gd(n,s)}},bl=function(){return Fe},Ml=function(n,s){var a=Fe;try{return Fe=n,s()}finally{Fe=a}},Ns=function(n,s,a){switch(s){case"input":if(Ko(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var f=nu(c);if(!f)throw Error(t(90));Rt(c),Ko(c,f)}}}break;case"textarea":As(n,a);break;case"select":s=a.value,s!=null&&Ir(n,!!a.multiple,s,!1)}},Hi=ud,ra=ds;var Aw={usingClientEntryPoint:!1,Events:[Sa,no,nu,rr,na,ud]},Fa={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pw={bundleType:Fa.bundleType,version:Fa.version,rendererPackageName:Fa.rendererPackageName,rendererConfig:Fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=oa(n),n===null?null:n.stateNode},findFiberByHostInstance:Fa.findFiberByHostInstance||kw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uu.isDisabled&&Uu.supportsFiber)try{Xi=Uu.inject(Pw),gn=Uu}catch{}}return fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Aw,fn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_d(s))throw Error(t(200));return Cw(n,s,null,a)},fn.createRoot=function(n,s){if(!_d(n))throw Error(t(299));var a=!1,c="",f=ug;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=md(n,1,!1,null,null,a,!1,c,f),n[Nr]=s.current,Ta(n.nodeType===8?n.parentNode:n),new yd(s)},fn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=oa(s),n=n===null?null:n.stateNode,n},fn.flushSync=function(n){return ds(n)},fn.hydrate=function(n,s,a){if(!Mu(s))throw Error(t(200));return Fu(null,n,s,!0,a)},fn.hydrateRoot=function(n,s,a){if(!_d(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,y="",w=ug;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=ag(s,null,n,1,a??null,f,!1,y,w),n[Nr]=s.current,Ta(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new bu(s)},fn.render=function(n,s,a){if(!Mu(s))throw Error(t(200));return Fu(null,n,s,!1,a)},fn.unmountComponentAtNode=function(n){if(!Mu(n))throw Error(t(40));return n._reactRootContainer?(ds(function(){Fu(null,null,n,!1,function(){n._reactRootContainer=null,n[Nr]=null})}),!0):!1},fn.unstable_batchedUpdates=ud,fn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Mu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Fu(n,s,a,!1,c)},fn.version="18.3.1-next-f1338f8080-20240426",fn}var _g;function Gy(){if(_g)return wd.exports;_g=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),wd.exports=Bw(),wd.exports}var vg;function zw(){if(vg)return Bu;vg=1;var r=Gy();return Bu.createRoot=r.createRoot,Bu.hydrateRoot=r.hydrateRoot,Bu}var Ww=zw(),Eg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},$w=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],p=r[t++],m=((o&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Yy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,p=h?r[o+1]:0,m=o+2<r.length,_=m?r[o+2]:0,E=l>>2,I=(l&3)<<4|p>>4;let S=(p&15)<<2|_>>6,j=_&63;m||(j=64,h||(S=64)),i.push(t[E],t[I],t[S],t[j])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Qy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):$w(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const _=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||_==null||I==null)throw new qw;const S=l<<2|p>>4;if(i.push(S),_!==64){const j=p<<4&240|_>>2;if(i.push(j),I!==64){const W=_<<6&192|I;i.push(W)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class qw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hw=function(r){const e=Qy(r);return Yy.encodeByteArray(e,!0)},ic=function(r){return Hw(r).replace(/\./g,"")},Xy=function(r){try{return Yy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=()=>Kw().__FIREBASE_DEFAULTS__,Qw=()=>{if(typeof process>"u"||typeof Eg>"u")return;const r=Eg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Yw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Xy(r[1]);return e&&JSON.parse(e)},wc=()=>{try{return Gw()||Qw()||Yw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Jy=r=>{var e,t;return(t=(e=wc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},Xw=r=>{const e=Jy(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Zy=()=>{var r;return(r=wc())===null||r===void 0?void 0:r.config},e_=r=>{var e;return(e=wc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[ic(JSON.stringify(t)),ic(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function tT(){var r;const e=(r=wc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function iT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sT(){const r=Xt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function oT(){return!tT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aT(){try{return typeof indexedDB=="object"}catch{return!1}}function lT(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="FirebaseError";class Qr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=uT,Object.setPrototypeOf(this,Qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ul.prototype.create)}}class ul{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?cT(l,i):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new Qr(o,p,i)}}function cT(r,e){return r.replace(hT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const hT=/\{\$([^}]+)}/g;function dT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ja(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(wg(l)&&wg(h)){if(!Ja(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function wg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ba(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function za(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function fT(r,e){const t=new pT(r,e);return t.subscribe.bind(t)}class pT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");mT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=xd),o.error===void 0&&(o.error=xd),o.complete===void 0&&(o.complete=xd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function xd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(r){return r&&r._delegate?r._delegate:r}class vs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Jw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_T(e))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gs){return this.instances.has(e)}getOptions(e=gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=gs){return this.component?this.component.multipleInstances?e:gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yT(r){return r===gs?void 0:r}function _T(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(be||(be={}));const ET={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},wT=be.INFO,TT={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},IT=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=TT[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ff{constructor(e){this.name=e,this._logLevel=wT,this._logHandler=IT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ET[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const xT=(r,e)=>e.some(t=>r instanceof t);let Tg,Ig;function ST(){return Tg||(Tg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CT(){return Ig||(Ig=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t_=new WeakMap,Md=new WeakMap,n_=new WeakMap,Sd=new WeakMap,pf=new WeakMap;function kT(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Ri(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&t_.set(t,r)}).catch(()=>{}),pf.set(e,r),e}function RT(r){if(Md.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Md.set(r,e)}let Fd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Md.get(r);if(e==="objectStoreNames")return r.objectStoreNames||n_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ri(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function AT(r){Fd=r(Fd)}function PT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Cd(this),e,...t);return n_.set(i,e.sort?e.sort():[e]),Ri(i)}:CT().includes(r)?function(...e){return r.apply(Cd(this),e),Ri(t_.get(this))}:function(...e){return Ri(r.apply(Cd(this),e))}}function NT(r){return typeof r=="function"?PT(r):(r instanceof IDBTransaction&&RT(r),xT(r,ST())?new Proxy(r,Fd):r)}function Ri(r){if(r instanceof IDBRequest)return kT(r);if(Sd.has(r))return Sd.get(r);const e=NT(r);return e!==r&&(Sd.set(r,e),pf.set(e,r)),e}const Cd=r=>pf.get(r);function DT(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),p=Ri(h);return i&&h.addEventListener("upgradeneeded",m=>{i(Ri(h.result),m.oldVersion,m.newVersion,Ri(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),p.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),p}const jT=["get","getKey","getAll","getAllKeys","count"],LT=["put","add","delete","clear"],kd=new Map;function xg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(kd.get(e))return kd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=LT.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||jT.includes(t)))return;const l=async function(h,...p){const m=this.transaction(h,o?"readwrite":"readonly");let _=m.store;return i&&(_=_.index(p.shift())),(await Promise.all([_[t](...p),o&&m.done]))[0]};return kd.set(e,l),l}AT(r=>({...r,get:(e,t,i)=>xg(e,t)||r.get(e,t,i),has:(e,t)=>!!xg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OT(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function OT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ud="@firebase/app",Sg="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new ff("@firebase/app"),bT="@firebase/app-compat",MT="@firebase/analytics-compat",FT="@firebase/analytics",UT="@firebase/app-check-compat",BT="@firebase/app-check",zT="@firebase/auth",WT="@firebase/auth-compat",$T="@firebase/database",qT="@firebase/data-connect",HT="@firebase/database-compat",KT="@firebase/functions",GT="@firebase/functions-compat",QT="@firebase/installations",YT="@firebase/installations-compat",XT="@firebase/messaging",JT="@firebase/messaging-compat",ZT="@firebase/performance",eI="@firebase/performance-compat",tI="@firebase/remote-config",nI="@firebase/remote-config-compat",rI="@firebase/storage",iI="@firebase/storage-compat",sI="@firebase/firestore",oI="@firebase/vertexai",aI="@firebase/firestore-compat",lI="firebase",uI="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="[DEFAULT]",cI={[Ud]:"fire-core",[bT]:"fire-core-compat",[FT]:"fire-analytics",[MT]:"fire-analytics-compat",[BT]:"fire-app-check",[UT]:"fire-app-check-compat",[zT]:"fire-auth",[WT]:"fire-auth-compat",[$T]:"fire-rtdb",[qT]:"fire-data-connect",[HT]:"fire-rtdb-compat",[KT]:"fire-fn",[GT]:"fire-fn-compat",[QT]:"fire-iid",[YT]:"fire-iid-compat",[XT]:"fire-fcm",[JT]:"fire-fcm-compat",[ZT]:"fire-perf",[eI]:"fire-perf-compat",[tI]:"fire-rc",[nI]:"fire-rc-compat",[rI]:"fire-gcs",[iI]:"fire-gcs-compat",[sI]:"fire-fst",[aI]:"fire-fst-compat",[oI]:"fire-vertex","fire-js":"fire-js",[lI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new Map,hI=new Map,zd=new Map;function Cg(r,e){try{r.container.addComponent(e)}catch(t){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ko(r){const e=r.name;if(zd.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;zd.set(e,r);for(const t of sc.values())Cg(t,r);for(const t of hI.values())Cg(t,r);return!0}function mf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function mr(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new ul("app","Firebase",dI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=uI;function r_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Bd,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Ai.create("bad-app-name",{appName:String(o)});if(t||(t=Zy()),!t)throw Ai.create("no-options");const l=sc.get(o);if(l){if(Ja(t,l.options)&&Ja(i,l.config))return l;throw Ai.create("duplicate-app",{appName:o})}const h=new vT(o);for(const m of zd.values())h.addComponent(m);const p=new fI(t,i,h);return sc.set(o,p),p}function i_(r=Bd){const e=sc.get(r);if(!e&&r===Bd&&Zy())return r_();if(!e)throw Ai.create("no-app",{appName:r});return e}function Pi(r,e,t){var i;let o=(i=cI[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(p.join(" "));return}ko(new vs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="firebase-heartbeat-database",mI=1,Za="firebase-heartbeat-store";let Rd=null;function s_(){return Rd||(Rd=DT(pI,mI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Za)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ai.create("idb-open",{originalErrorMessage:r.message})})),Rd}async function gI(r){try{const t=(await s_()).transaction(Za),i=await t.objectStore(Za).get(o_(r));return await t.done,i}catch(e){if(e instanceof Qr)qr.warn(e.message);else{const t=Ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qr.warn(t.message)}}}async function kg(r,e){try{const i=(await s_()).transaction(Za,"readwrite");await i.objectStore(Za).put(e,o_(r)),await i.done}catch(t){if(t instanceof Qr)qr.warn(t.message);else{const i=Ai.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});qr.warn(i.message)}}}function o_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=1024,_I=30*24*60*60*1e3;class vI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Rg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const p=new Date(h.date).valueOf();return Date.now()-p<=_I}),this._storage.overwrite(this._heartbeatsCache))}catch(i){qr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Rg(),{heartbeatsToSend:i,unsentEntries:o}=EI(this._heartbeatsCache.heartbeats),l=ic(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return qr.warn(t),""}}}function Rg(){return new Date().toISOString().substring(0,10)}function EI(r,e=yI){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Ag(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Ag(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class wI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aT()?lT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await gI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return kg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return kg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Ag(r){return ic(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(r){ko(new vs("platform-logger",e=>new VT(e),"PRIVATE")),ko(new vs("heartbeat",e=>new vI(e),"PRIVATE")),Pi(Ud,Sg,r),Pi(Ud,Sg,"esm2017"),Pi("fire-js","")}TI("");var II="firebase",xI="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pi(II,xI,"app");function gf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function a_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SI=a_,l_=new ul("auth","Firebase",a_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new ff("@firebase/auth");function CI(r,...e){oc.logLevel<=be.WARN&&oc.warn(`Auth (${bo}): ${r}`,...e)}function Gu(r,...e){oc.logLevel<=be.ERROR&&oc.error(`Auth (${bo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(r,...e){throw yf(r,...e)}function gr(r,...e){return yf(r,...e)}function u_(r,e,t){const i=Object.assign(Object.assign({},SI()),{[e]:t});return new ul("auth","Firebase",i).create(e,{appName:r.name})}function zr(r){return u_(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return l_.create(r,...e)}function Ce(r,e,...t){if(!r)throw yf(e,...t)}function Fr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Gu(e),new Error(e)}function Hr(r,e){r||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function kI(){return Pg()==="http:"||Pg()==="https:"}function Pg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kI()||rT()||"connection"in navigator)?navigator.onLine:!0}function AI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hr(t>e,"Short delay should be less than long delay!"),this.isMobile=eT()||iT()}get(){return RI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(r,e){Hr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=new hl(3e4,6e4);function Mi(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Fi(r,e,t,i,o={}){return h_(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const p=cl(Object.assign({key:r.config.apiKey},h)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const _=Object.assign({method:e,headers:m},l);return nT()||(_.referrerPolicy="no-referrer"),c_.fetch()(d_(r,r.config.apiHost,t,p),_)})}async function h_(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},PI),e);try{const o=new jI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw zu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const p=l.ok?h.errorMessage:h.error.message,[m,_]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw zu(r,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw zu(r,"email-already-in-use",h);if(m==="USER_DISABLED")throw zu(r,"user-disabled",h);const E=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw u_(r,E,_);Jn(r,E)}}catch(o){if(o instanceof Qr)throw o;Jn(r,"network-request-failed",{message:String(o)})}}async function dl(r,e,t,i,o={}){const l=await Fi(r,e,t,i,o);return"mfaPendingCredential"in l&&Jn(r,"multi-factor-auth-required",{_serverResponse:l}),l}function d_(r,e,t,i){const o=`${e}${t}?${i}`;return r.config.emulator?_f(r.config,o):`${r.config.apiScheme}://${o}`}function DI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(gr(this.auth,"network-request-failed")),NI.get())})}}function zu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=gr(r,e,i);return o.customData._tokenResponse=t,o}function Ng(r){return r!==void 0&&r.enterprise!==void 0}class LI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return DI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VI(r,e){return Fi(r,"GET","/v2/recaptchaConfig",Mi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(r,e){return Fi(r,"POST","/v1/accounts:delete",e)}async function f_(r,e){return Fi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bI(r,e=!1){const t=Lt(r),i=await t.getIdToken(e),o=vf(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Ka(Ad(o.auth_time)),issuedAtTime:Ka(Ad(o.iat)),expirationTime:Ka(Ad(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Ad(r){return Number(r)*1e3}function vf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Gu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Xy(t);return o?JSON.parse(o):(Gu("Failed to decode base64 JWT payload"),null)}catch(o){return Gu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Dg(r){const e=vf(r);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Qr&&MI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function MI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ka(this.lastLoginAt),this.creationTime=Ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(r){var e;const t=r.auth,i=await r.getIdToken(),o=await el(r,f_(t,{idToken:i}));Ce(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?p_(l.providerUserInfo):[],p=BI(r.providerData,h),m=r.isAnonymous,_=!(r.email&&l.passwordHash)&&!(p!=null&&p.length),E=m?_:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new $d(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,I)}async function UI(r){const e=Lt(r);await ac(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BI(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function p_(r){return r.map(e=>{var{providerId:t}=e,i=gf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(r,e){const t=await h_(r,{},async()=>{const i=cl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=d_(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();return p["Content-Type"]="application/x-www-form-urlencoded",c_.fetch()(h,{method:"POST",headers:p,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function WI(r,e){return Fi(r,"POST","/v2/accounts:revokeToken",Mi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Dg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=Dg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await zI(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Io;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ce(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(r,e){Ce(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ur{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=gf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new $d(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await el(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bI(this,e)}reload(){return UI(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ur(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ac(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mr(this.auth.app))return Promise.reject(zr(this.auth));const e=await this.getIdToken();return await el(this,OI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,p,m,_,E;const I=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,j=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,W=(h=t.photoURL)!==null&&h!==void 0?h:void 0,V=(p=t.tenantId)!==null&&p!==void 0?p:void 0,C=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,Q=(_=t.createdAt)!==null&&_!==void 0?_:void 0,G=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ee,emailVerified:oe,isAnonymous:De,providerData:Se,stsTokenManager:b}=t;Ce(ee&&b,e,"internal-error");const k=Io.fromJSON(this.name,b);Ce(typeof ee=="string",e,"internal-error"),Ei(I,e.name),Ei(S,e.name),Ce(typeof oe=="boolean",e,"internal-error"),Ce(typeof De=="boolean",e,"internal-error"),Ei(j,e.name),Ei(W,e.name),Ei(V,e.name),Ei(C,e.name),Ei(Q,e.name),Ei(G,e.name);const D=new Ur({uid:ee,auth:e,email:S,emailVerified:oe,displayName:I,isAnonymous:De,photoURL:W,phoneNumber:j,tenantId:V,stsTokenManager:k,createdAt:Q,lastLoginAt:G});return Se&&Array.isArray(Se)&&(D.providerData=Se.map(T=>Object.assign({},T))),C&&(D._redirectEventId=C),D}static async _fromIdTokenResponse(e,t,i=!1){const o=new Io;o.updateFromServerResponse(t);const l=new Ur({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ac(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?p_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Io;p.updateFromIdToken(i);const m=new Ur({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new $d(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,_),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new Map;function Br(r){Hr(r instanceof Function,"Expected a class definition");let e=jg.get(r);return e?(Hr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,jg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}m_.type="NONE";const Lg=m_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(r,e,t){return`firebase:${r}:${e}:${t}`}class xo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Qu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Qu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ur._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new xo(Br(Lg),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let l=o[0]||Br(Lg);const h=Qu(i,e.config.apiKey,e.name);let p=null;for(const _ of t)try{const E=await _._get(h);if(E){const I=Ur._fromJSON(e,E);_!==l&&(p=I),l=_;break}}catch{}const m=o.filter(_=>_._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new xo(l,e,i):(l=m[0],p&&await l._set(h,p.toJSON()),await Promise.all(t.map(async _=>{if(_!==l)try{await _._remove(h)}catch{}})),new xo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(v_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(g_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(w_(e))return"Blackberry";if(T_(e))return"Webos";if(y_(e))return"Safari";if((e.includes("chrome/")||__(e))&&!e.includes("edge/"))return"Chrome";if(E_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function g_(r=Xt()){return/firefox\//i.test(r)}function y_(r=Xt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function __(r=Xt()){return/crios\//i.test(r)}function v_(r=Xt()){return/iemobile/i.test(r)}function E_(r=Xt()){return/android/i.test(r)}function w_(r=Xt()){return/blackberry/i.test(r)}function T_(r=Xt()){return/webos/i.test(r)}function Ef(r=Xt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function $I(r=Xt()){var e;return Ef(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qI(){return sT()&&document.documentMode===10}function I_(r=Xt()){return Ef(r)||E_(r)||T_(r)||w_(r)||/windows phone/i.test(r)||v_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(r,e=[]){let t;switch(r){case"Browser":t=Vg(Xt());break;case"Worker":t=`${Vg(Xt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,p)=>{try{const m=e(l);h(m)}catch(m){p(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(r,e={}){return Fi(r,"GET","/v2/passwordPolicy",Mi(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=6;class QI{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:GI,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,p;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(p=m.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Og(this),this.idTokenSubscription=new Og(this),this.beforeStateQueue=new HI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Br(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await f_(this,{idToken:e}),i=await Ur._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(mr(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===p)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ac(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mr(this.app))return Promise.reject(zr(this));const t=e?Lt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mr(this.app)?Promise.reject(zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mr(this.app)?Promise.reject(zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KI(this),t=new QI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ul("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await WI(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Br(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[Br(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(p,this,"internal-error"),p.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&CI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Is(r){return Lt(r)}class Og{constructor(e){this.auth=e,this.observer=null,this.addObserver=fT(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XI(r){Tc=r}function S_(r){return Tc.loadJS(r)}function JI(){return Tc.recaptchaEnterpriseScript}function ZI(){return Tc.gapiScript}function ex(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class tx{constructor(){this.enterprise=new nx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class nx{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const rx="recaptcha-enterprise",C_="NO_RECAPTCHA";class ix{constructor(e){this.type=rx,this.auth=Is(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,p)=>{VI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const _=new LI(m);return l.tenantId==null?l._agentRecaptchaConfig=_:l._tenantRecaptchaConfigs[l.tenantId]=_,h(_.siteKey)}}).catch(m=>{p(m)})})}function o(l,h,p){const m=window.grecaptcha;Ng(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(_=>{h(_)}).catch(()=>{h(C_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tx().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(p=>{if(!t&&Ng(window.grecaptcha))o(p,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=JI();m.length!==0&&(m+=p),S_(m).then(()=>{o(p,l,h)}).catch(_=>{h(_)})}}).catch(p=>{h(p)})})}}async function bg(r,e,t,i=!1,o=!1){const l=new ix(r);let h;if(o)h=C_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const p=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const m=p.phoneEnrollmentInfo.phoneNumber,_=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:_,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const m=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function qd(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await bg(r,e,t,t==="getOobCode");return i(r,h)}else return i(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await bg(r,e,t,t==="getOobCode");return i(r,p)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(r,e){const t=mf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ja(l,e??{}))return o;Jn(o,"already-initialized")}return t.initialize({options:e})}function ox(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Br);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ax(r,e,t){const i=Is(r);Ce(i._canInitEmulator,i,"emulator-config-failed"),Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=k_(e),{host:h,port:p}=lx(e),m=p===null?"":`:${p}`;i.config.emulator={url:`${l}//${h}${m}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),ux()}function k_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function lx(r){const e=k_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Mg(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Mg(h)}}}function Mg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function ux(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,t){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function cx(r,e){return Fi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(r,e){return dl(r,"POST","/v1/accounts:signInWithPassword",Mi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dx(r,e){return dl(r,"POST","/v1/accounts:signInWithEmailLink",Mi(r,e))}async function fx(r,e){return dl(r,"POST","/v1/accounts:signInWithEmailLink",Mi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends wf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new tl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new tl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qd(e,t,"signInWithPassword",hx);case"emailLink":return dx(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qd(e,i,"signUpPassword",cx);case"emailLink":return fx(e,{idToken:t,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(r,e){return dl(r,"POST","/v1/accounts:signInWithIdp",Mi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="http://localhost";class Es extends wf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Es(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=gf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new Es(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return So(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,So(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,So(e,t)}buildRequest(){const e={requestUri:px,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gx(r){const e=Ba(za(r)).link,t=e?Ba(za(e)).deep_link_id:null,i=Ba(za(r)).deep_link_id;return(i?Ba(za(i)).link:null)||i||t||e||r}class Tf{constructor(e){var t,i,o,l,h,p;const m=Ba(za(e)),_=(t=m.apiKey)!==null&&t!==void 0?t:null,E=(i=m.oobCode)!==null&&i!==void 0?i:null,I=mx((o=m.mode)!==null&&o!==void 0?o:null);Ce(_&&E&&I,"argument-error"),this.apiKey=_,this.operation=I,this.code=E,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=m.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(p=m.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=gx(e);try{return new Tf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.providerId=Mo.PROVIDER_ID}static credential(e,t){return tl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Tf.parseLink(t);return Ce(i,"argument-error"),tl._fromEmailAndCode(e,i.code,i.tenantId)}}Mo.PROVIDER_ID="password";Mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends R_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends fl{constructor(){super("facebook.com")}static credential(e){return Es._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Es._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ti.credential(t,i)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends fl{constructor(){super("github.com")}static credential(e){return Es._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends fl{constructor(){super("twitter.com")}static credential(e,t){return Es._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return xi.credential(t,i)}catch{return null}}}xi.TWITTER_SIGN_IN_METHOD="twitter.com";xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(r,e){return dl(r,"POST","/v1/accounts:signUp",Mi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Ur._fromIdTokenResponse(e,i,o),h=Fg(i);return new ws({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Fg(i);return new ws({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Fg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends Qr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,lc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new lc(e,t,i,o)}}function A_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?lc._fromErrorAndOperation(r,l,e,i):l})}async function _x(r,e,t=!1){const i=await el(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ws._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vx(r,e,t=!1){const{auth:i}=r;if(mr(i.app))return Promise.reject(zr(i));const o="reauthenticate";try{const l=await el(r,A_(i,o,e,r),t);Ce(l.idToken,i,"internal-error");const h=vf(l.idToken);Ce(h,i,"internal-error");const{sub:p}=h;return Ce(r.uid===p,i,"user-mismatch"),ws._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Jn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P_(r,e,t=!1){if(mr(r.app))return Promise.reject(zr(r));const i="signIn",o=await A_(r,i,e),l=await ws._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function Ex(r,e){return P_(Is(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N_(r){const e=Is(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function D_(r,e,t){if(mr(r.app))return Promise.reject(zr(r));const i=Is(r),h=await qd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yx).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&N_(r),m}),p=await ws._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function j_(r,e,t){return mr(r.app)?Promise.reject(zr(r)):Ex(Lt(r),Mo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&N_(r),i})}function wx(r,e,t,i){return Lt(r).onIdTokenChanged(e,t,i)}function Tx(r,e,t){return Lt(r).beforeAuthStateChanged(e,t)}function Ix(r,e,t,i){return Lt(r).onAuthStateChanged(e,t,i)}function Ic(r){return Lt(r).signOut()}const uc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uc,"1"),this.storage.removeItem(uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=1e3,Sx=10;class V_ extends L_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);qI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Sx):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},xx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}V_.type="LOCAL";const Cx=V_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_ extends L_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}O_.type="SESSION";const b_=O_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new xc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(h).map(async _=>_(t.origin,l)),m=await kx(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((p,m)=>{const _=If("",20);o.port1.start();const E=setTimeout(()=>{m(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(I){const S=I;if(S.data.eventId===_)switch(S.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(S.data.response);break;default:clearTimeout(E),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(){return window}function Ax(r){yr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(){return typeof yr().WorkerGlobalScope<"u"&&typeof yr().importScripts=="function"}async function Px(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nx(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function Dx(){return M_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="firebaseLocalStorageDb",jx=1,cc="firebaseLocalStorage",U_="fbase_key";class pl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sc(r,e){return r.transaction([cc],e?"readwrite":"readonly").objectStore(cc)}function Lx(){const r=indexedDB.deleteDatabase(F_);return new pl(r).toPromise()}function Hd(){const r=indexedDB.open(F_,jx);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(cc,{keyPath:U_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(cc)?e(i):(i.close(),await Lx(),e(await Hd()))})})}async function Ug(r,e,t){const i=Sc(r,!0).put({[U_]:e,value:t});return new pl(i).toPromise()}async function Vx(r,e){const t=Sc(r,!1).get(e),i=await new pl(t).toPromise();return i===void 0?null:i.value}function Bg(r,e){const t=Sc(r,!0).delete(e);return new pl(t).toPromise()}const Ox=800,bx=3;class B_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>bx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return M_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xc._getInstance(Dx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Px(),!this.activeServiceWorker)return;this.sender=new Rx(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hd();return await Ug(e,uc,"1"),await Bg(e,uc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ug(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Vx(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Bg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Sc(o,!1).getAll();return new pl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ox)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}B_.type="LOCAL";const Mx=B_;new hl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(r,e){return e?Br(e):(Ce(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf extends wf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,t){return So(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ux(r){return P_(r.auth,new xf(r),r.bypassAuthState)}function Bx(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),vx(t,new xf(r),r.bypassAuthState)}async function zx(r){const{auth:e,user:t}=r;return Ce(t,e,"internal-error"),_x(t,new xf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:p}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ux;case"linkViaPopup":case"linkViaRedirect":return zx;case"reauthViaPopup":case"reauthViaRedirect":return Bx;default:Jn(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=new hl(2e3,1e4);class To extends z_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,To.currentPopupAction&&To.currentPopupAction.cancel(),To.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=If();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,To.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Wx.get())};e()}}To.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="pendingRedirect",Yu=new Map;class qx extends z_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Yu.get(this.auth._key());if(!e){try{const i=await Hx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Yu.set(this.auth._key(),e)}return this.bypassAuthState||Yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Hx(r,e){const t=Qx(e),i=Gx(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Kx(r,e){Yu.set(r._key(),e)}function Gx(r){return Br(r._redirectPersistence)}function Qx(r){return Qu($x,r.config.apiKey,r.name)}async function Yx(r,e,t=!1){if(mr(r.app))return Promise.reject(zr(r));const i=Is(r),o=Fx(i,e),h=await new qx(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=10*60*1e3;class Jx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Zx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!W_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(gr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Xx&&this.cachedEventUids.clear(),this.cachedEventUids.has(zg(e))}saveEventToCache(e){this.cachedEventUids.add(zg(e)),this.lastProcessedEventTime=Date.now()}}function zg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function W_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Zx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(r,e={}){return Fi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nS=/^https?/;async function rS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await eS(r);for(const t of e)try{if(iS(t))return}catch{}Jn(r,"unauthorized-domain")}function iS(r){const e=Wd(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!nS.test(t))return!1;if(tS.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=new hl(3e4,6e4);function Wg(){const r=yr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function oS(r){return new Promise((e,t)=>{var i,o,l;function h(){Wg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wg(),t(gr(r,"network-request-failed"))},timeout:sS.get()})}if(!((o=(i=yr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=yr().gapi)===null||l===void 0)&&l.load)h();else{const p=ex("iframefcb");return yr()[p]=()=>{gapi.load?h():t(gr(r,"network-request-failed"))},S_(`${ZI()}?onload=${p}`).catch(m=>t(m))}}).catch(e=>{throw Xu=null,e})}let Xu=null;function aS(r){return Xu=Xu||oS(r),Xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=new hl(5e3,15e3),uS="__/auth/iframe",cS="emulator/auth/iframe",hS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fS(r){const e=r.config;Ce(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?_f(e,cS):`https://${r.config.authDomain}/${uS}`,i={apiKey:e.apiKey,appName:r.name,v:bo},o=dS.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${cl(i).slice(1)}`}async function pS(r){const e=await aS(r),t=yr().gapi;return Ce(t,r,"internal-error"),e.open({where:document.body,url:fS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hS,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=gr(r,"network-request-failed"),p=yr().setTimeout(()=>{l(h)},lS.get());function m(){yr().clearTimeout(p),o(i)}i.ping(m).then(m,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gS=500,yS=600,_S="_blank",vS="http://localhost";class $g{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ES(r,e,t,i=gS,o=yS){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const m=Object.assign(Object.assign({},mS),{width:i.toString(),height:o.toString(),top:l,left:h}),_=Xt().toLowerCase();t&&(p=__(_)?_S:t),g_(_)&&(e=e||vS,m.scrollbars="yes");const E=Object.entries(m).reduce((S,[j,W])=>`${S}${j}=${W},`,"");if($I(_)&&p!=="_self")return wS(e||"",p),new $g(null);const I=window.open(e||"",p,E);Ce(I,r,"popup-blocked");try{I.focus()}catch{}return new $g(I)}function wS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="__/auth/handler",IS="emulator/auth/handler",xS=encodeURIComponent("fac");async function qg(r,e,t,i,o,l){Ce(r.config.authDomain,r,"auth-domain-config-required"),Ce(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:bo,eventId:o};if(e instanceof R_){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",dT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))h[E]=I}if(e instanceof fl){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const p=h;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const m=await r._getAppCheckToken(),_=m?`#${xS}=${encodeURIComponent(m)}`:"";return`${SS(r)}?${cl(p).slice(1)}${_}`}function SS({config:r}){return r.emulator?_f(r,IS):`https://${r.authDomain}/${TS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="webStorageSupport";class CS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b_,this._completeRedirectFn=Yx,this._overrideRedirectResult=Kx}async _openPopup(e,t,i,o){var l;Hr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await qg(e,t,i,Wd(),o);return ES(e,h,If())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await qg(e,t,i,Wd(),o);return Ax(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Hr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await pS(e),i=new Jx(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pd,{type:Pd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Pd];h!==void 0&&t(!!h),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return I_()||y_()||Ef()}}const kS=CS;var Hg="@firebase/auth",Kg="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PS(r){ko(new vs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Ce(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:h,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x_(r)},_=new YI(i,o,l,m);return ox(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ko(new vs("auth-internal",e=>{const t=Is(e.getProvider("auth").getImmediate());return(i=>new RS(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pi(Hg,Kg,AS(r)),Pi(Hg,Kg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=5*60,DS=e_("authIdTokenMaxAge")||NS;let Gg=null;const jS=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>DS)return;const o=t==null?void 0:t.token;Gg!==o&&(Gg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Cc(r=i_()){const e=mf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=sx(r,{popupRedirectResolver:kS,persistence:[Mx,Cx,b_]}),i=e_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=jS(l.toString());Tx(t,h,()=>h(t.currentUser)),wx(t,p=>h(p))}}const o=Jy("auth");return o&&ax(t,`http://${o}`),t}function LS(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}XI({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=gr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",LS().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PS("Browser");var Qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ni,$_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,k){function D(){}D.prototype=k.prototype,b.D=k.prototype,b.prototype=new D,b.prototype.constructor=b,b.C=function(T,A,N){for(var R=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)R[Te-2]=arguments[Te];return k.prototype[A].apply(T,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,k,D){D||(D=0);var T=Array(16);if(typeof k=="string")for(var A=0;16>A;++A)T[A]=k.charCodeAt(D++)|k.charCodeAt(D++)<<8|k.charCodeAt(D++)<<16|k.charCodeAt(D++)<<24;else for(A=0;16>A;++A)T[A]=k[D++]|k[D++]<<8|k[D++]<<16|k[D++]<<24;k=b.g[0],D=b.g[1],A=b.g[2];var N=b.g[3],R=k+(N^D&(A^N))+T[0]+3614090360&4294967295;k=D+(R<<7&4294967295|R>>>25),R=N+(A^k&(D^A))+T[1]+3905402710&4294967295,N=k+(R<<12&4294967295|R>>>20),R=A+(D^N&(k^D))+T[2]+606105819&4294967295,A=N+(R<<17&4294967295|R>>>15),R=D+(k^A&(N^k))+T[3]+3250441966&4294967295,D=A+(R<<22&4294967295|R>>>10),R=k+(N^D&(A^N))+T[4]+4118548399&4294967295,k=D+(R<<7&4294967295|R>>>25),R=N+(A^k&(D^A))+T[5]+1200080426&4294967295,N=k+(R<<12&4294967295|R>>>20),R=A+(D^N&(k^D))+T[6]+2821735955&4294967295,A=N+(R<<17&4294967295|R>>>15),R=D+(k^A&(N^k))+T[7]+4249261313&4294967295,D=A+(R<<22&4294967295|R>>>10),R=k+(N^D&(A^N))+T[8]+1770035416&4294967295,k=D+(R<<7&4294967295|R>>>25),R=N+(A^k&(D^A))+T[9]+2336552879&4294967295,N=k+(R<<12&4294967295|R>>>20),R=A+(D^N&(k^D))+T[10]+4294925233&4294967295,A=N+(R<<17&4294967295|R>>>15),R=D+(k^A&(N^k))+T[11]+2304563134&4294967295,D=A+(R<<22&4294967295|R>>>10),R=k+(N^D&(A^N))+T[12]+1804603682&4294967295,k=D+(R<<7&4294967295|R>>>25),R=N+(A^k&(D^A))+T[13]+4254626195&4294967295,N=k+(R<<12&4294967295|R>>>20),R=A+(D^N&(k^D))+T[14]+2792965006&4294967295,A=N+(R<<17&4294967295|R>>>15),R=D+(k^A&(N^k))+T[15]+1236535329&4294967295,D=A+(R<<22&4294967295|R>>>10),R=k+(A^N&(D^A))+T[1]+4129170786&4294967295,k=D+(R<<5&4294967295|R>>>27),R=N+(D^A&(k^D))+T[6]+3225465664&4294967295,N=k+(R<<9&4294967295|R>>>23),R=A+(k^D&(N^k))+T[11]+643717713&4294967295,A=N+(R<<14&4294967295|R>>>18),R=D+(N^k&(A^N))+T[0]+3921069994&4294967295,D=A+(R<<20&4294967295|R>>>12),R=k+(A^N&(D^A))+T[5]+3593408605&4294967295,k=D+(R<<5&4294967295|R>>>27),R=N+(D^A&(k^D))+T[10]+38016083&4294967295,N=k+(R<<9&4294967295|R>>>23),R=A+(k^D&(N^k))+T[15]+3634488961&4294967295,A=N+(R<<14&4294967295|R>>>18),R=D+(N^k&(A^N))+T[4]+3889429448&4294967295,D=A+(R<<20&4294967295|R>>>12),R=k+(A^N&(D^A))+T[9]+568446438&4294967295,k=D+(R<<5&4294967295|R>>>27),R=N+(D^A&(k^D))+T[14]+3275163606&4294967295,N=k+(R<<9&4294967295|R>>>23),R=A+(k^D&(N^k))+T[3]+4107603335&4294967295,A=N+(R<<14&4294967295|R>>>18),R=D+(N^k&(A^N))+T[8]+1163531501&4294967295,D=A+(R<<20&4294967295|R>>>12),R=k+(A^N&(D^A))+T[13]+2850285829&4294967295,k=D+(R<<5&4294967295|R>>>27),R=N+(D^A&(k^D))+T[2]+4243563512&4294967295,N=k+(R<<9&4294967295|R>>>23),R=A+(k^D&(N^k))+T[7]+1735328473&4294967295,A=N+(R<<14&4294967295|R>>>18),R=D+(N^k&(A^N))+T[12]+2368359562&4294967295,D=A+(R<<20&4294967295|R>>>12),R=k+(D^A^N)+T[5]+4294588738&4294967295,k=D+(R<<4&4294967295|R>>>28),R=N+(k^D^A)+T[8]+2272392833&4294967295,N=k+(R<<11&4294967295|R>>>21),R=A+(N^k^D)+T[11]+1839030562&4294967295,A=N+(R<<16&4294967295|R>>>16),R=D+(A^N^k)+T[14]+4259657740&4294967295,D=A+(R<<23&4294967295|R>>>9),R=k+(D^A^N)+T[1]+2763975236&4294967295,k=D+(R<<4&4294967295|R>>>28),R=N+(k^D^A)+T[4]+1272893353&4294967295,N=k+(R<<11&4294967295|R>>>21),R=A+(N^k^D)+T[7]+4139469664&4294967295,A=N+(R<<16&4294967295|R>>>16),R=D+(A^N^k)+T[10]+3200236656&4294967295,D=A+(R<<23&4294967295|R>>>9),R=k+(D^A^N)+T[13]+681279174&4294967295,k=D+(R<<4&4294967295|R>>>28),R=N+(k^D^A)+T[0]+3936430074&4294967295,N=k+(R<<11&4294967295|R>>>21),R=A+(N^k^D)+T[3]+3572445317&4294967295,A=N+(R<<16&4294967295|R>>>16),R=D+(A^N^k)+T[6]+76029189&4294967295,D=A+(R<<23&4294967295|R>>>9),R=k+(D^A^N)+T[9]+3654602809&4294967295,k=D+(R<<4&4294967295|R>>>28),R=N+(k^D^A)+T[12]+3873151461&4294967295,N=k+(R<<11&4294967295|R>>>21),R=A+(N^k^D)+T[15]+530742520&4294967295,A=N+(R<<16&4294967295|R>>>16),R=D+(A^N^k)+T[2]+3299628645&4294967295,D=A+(R<<23&4294967295|R>>>9),R=k+(A^(D|~N))+T[0]+4096336452&4294967295,k=D+(R<<6&4294967295|R>>>26),R=N+(D^(k|~A))+T[7]+1126891415&4294967295,N=k+(R<<10&4294967295|R>>>22),R=A+(k^(N|~D))+T[14]+2878612391&4294967295,A=N+(R<<15&4294967295|R>>>17),R=D+(N^(A|~k))+T[5]+4237533241&4294967295,D=A+(R<<21&4294967295|R>>>11),R=k+(A^(D|~N))+T[12]+1700485571&4294967295,k=D+(R<<6&4294967295|R>>>26),R=N+(D^(k|~A))+T[3]+2399980690&4294967295,N=k+(R<<10&4294967295|R>>>22),R=A+(k^(N|~D))+T[10]+4293915773&4294967295,A=N+(R<<15&4294967295|R>>>17),R=D+(N^(A|~k))+T[1]+2240044497&4294967295,D=A+(R<<21&4294967295|R>>>11),R=k+(A^(D|~N))+T[8]+1873313359&4294967295,k=D+(R<<6&4294967295|R>>>26),R=N+(D^(k|~A))+T[15]+4264355552&4294967295,N=k+(R<<10&4294967295|R>>>22),R=A+(k^(N|~D))+T[6]+2734768916&4294967295,A=N+(R<<15&4294967295|R>>>17),R=D+(N^(A|~k))+T[13]+1309151649&4294967295,D=A+(R<<21&4294967295|R>>>11),R=k+(A^(D|~N))+T[4]+4149444226&4294967295,k=D+(R<<6&4294967295|R>>>26),R=N+(D^(k|~A))+T[11]+3174756917&4294967295,N=k+(R<<10&4294967295|R>>>22),R=A+(k^(N|~D))+T[2]+718787259&4294967295,A=N+(R<<15&4294967295|R>>>17),R=D+(N^(A|~k))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+k&4294967295,b.g[1]=b.g[1]+(A+(R<<21&4294967295|R>>>11))&4294967295,b.g[2]=b.g[2]+A&4294967295,b.g[3]=b.g[3]+N&4294967295}i.prototype.u=function(b,k){k===void 0&&(k=b.length);for(var D=k-this.blockSize,T=this.B,A=this.h,N=0;N<k;){if(A==0)for(;N<=D;)o(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<k;)if(T[A++]=b.charCodeAt(N++),A==this.blockSize){o(this,T),A=0;break}}else for(;N<k;)if(T[A++]=b[N++],A==this.blockSize){o(this,T),A=0;break}}this.h=A,this.o+=k},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var k=1;k<b.length-8;++k)b[k]=0;var D=8*this.o;for(k=b.length-8;k<b.length;++k)b[k]=D&255,D/=256;for(this.u(b),b=Array(16),k=D=0;4>k;++k)for(var T=0;32>T;T+=8)b[D++]=this.g[k]>>>T&255;return b};function l(b,k){var D=p;return Object.prototype.hasOwnProperty.call(D,b)?D[b]:D[b]=k(b)}function h(b,k){this.h=k;for(var D=[],T=!0,A=b.length-1;0<=A;A--){var N=b[A]|0;T&&N==k||(D[A]=N,T=!1)}this.g=D}var p={};function m(b){return-128<=b&&128>b?l(b,function(k){return new h([k|0],0>k?-1:0)}):new h([b|0],0>b?-1:0)}function _(b){if(isNaN(b)||!isFinite(b))return I;if(0>b)return C(_(-b));for(var k=[],D=1,T=0;b>=D;T++)k[T]=b/D|0,D*=4294967296;return new h(k,0)}function E(b,k){if(b.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(b.charAt(0)=="-")return C(E(b.substring(1),k));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=_(Math.pow(k,8)),T=I,A=0;A<b.length;A+=8){var N=Math.min(8,b.length-A),R=parseInt(b.substring(A,A+N),k);8>N?(N=_(Math.pow(k,N)),T=T.j(N).add(_(R))):(T=T.j(D),T=T.add(_(R)))}return T}var I=m(0),S=m(1),j=m(16777216);r=h.prototype,r.m=function(){if(V(this))return-C(this).m();for(var b=0,k=1,D=0;D<this.g.length;D++){var T=this.i(D);b+=(0<=T?T:4294967296+T)*k,k*=4294967296}return b},r.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(W(this))return"0";if(V(this))return"-"+C(this).toString(b);for(var k=_(Math.pow(b,6)),D=this,T="";;){var A=oe(D,k).g;D=Q(D,A.j(k));var N=((0<D.g.length?D.g[0]:D.h)>>>0).toString(b);if(D=A,W(D))return N+T;for(;6>N.length;)N="0"+N;T=N+T}},r.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function W(b){if(b.h!=0)return!1;for(var k=0;k<b.g.length;k++)if(b.g[k]!=0)return!1;return!0}function V(b){return b.h==-1}r.l=function(b){return b=Q(this,b),V(b)?-1:W(b)?0:1};function C(b){for(var k=b.g.length,D=[],T=0;T<k;T++)D[T]=~b.g[T];return new h(D,~b.h).add(S)}r.abs=function(){return V(this)?C(this):this},r.add=function(b){for(var k=Math.max(this.g.length,b.g.length),D=[],T=0,A=0;A<=k;A++){var N=T+(this.i(A)&65535)+(b.i(A)&65535),R=(N>>>16)+(this.i(A)>>>16)+(b.i(A)>>>16);T=R>>>16,N&=65535,R&=65535,D[A]=R<<16|N}return new h(D,D[D.length-1]&-2147483648?-1:0)};function Q(b,k){return b.add(C(k))}r.j=function(b){if(W(this)||W(b))return I;if(V(this))return V(b)?C(this).j(C(b)):C(C(this).j(b));if(V(b))return C(this.j(C(b)));if(0>this.l(j)&&0>b.l(j))return _(this.m()*b.m());for(var k=this.g.length+b.g.length,D=[],T=0;T<2*k;T++)D[T]=0;for(T=0;T<this.g.length;T++)for(var A=0;A<b.g.length;A++){var N=this.i(T)>>>16,R=this.i(T)&65535,Te=b.i(A)>>>16,nt=b.i(A)&65535;D[2*T+2*A]+=R*nt,G(D,2*T+2*A),D[2*T+2*A+1]+=N*nt,G(D,2*T+2*A+1),D[2*T+2*A+1]+=R*Te,G(D,2*T+2*A+1),D[2*T+2*A+2]+=N*Te,G(D,2*T+2*A+2)}for(T=0;T<k;T++)D[T]=D[2*T+1]<<16|D[2*T];for(T=k;T<2*k;T++)D[T]=0;return new h(D,0)};function G(b,k){for(;(b[k]&65535)!=b[k];)b[k+1]+=b[k]>>>16,b[k]&=65535,k++}function ee(b,k){this.g=b,this.h=k}function oe(b,k){if(W(k))throw Error("division by zero");if(W(b))return new ee(I,I);if(V(b))return k=oe(C(b),k),new ee(C(k.g),C(k.h));if(V(k))return k=oe(b,C(k)),new ee(C(k.g),k.h);if(30<b.g.length){if(V(b)||V(k))throw Error("slowDivide_ only works with positive integers.");for(var D=S,T=k;0>=T.l(b);)D=De(D),T=De(T);var A=Se(D,1),N=Se(T,1);for(T=Se(T,2),D=Se(D,2);!W(T);){var R=N.add(T);0>=R.l(b)&&(A=A.add(D),N=R),T=Se(T,1),D=Se(D,1)}return k=Q(b,A.j(k)),new ee(A,k)}for(A=I;0<=b.l(k);){for(D=Math.max(1,Math.floor(b.m()/k.m())),T=Math.ceil(Math.log(D)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),N=_(D),R=N.j(k);V(R)||0<R.l(b);)D-=T,N=_(D),R=N.j(k);W(N)&&(N=S),A=A.add(N),b=Q(b,R)}return new ee(A,b)}r.A=function(b){return oe(this,b).h},r.and=function(b){for(var k=Math.max(this.g.length,b.g.length),D=[],T=0;T<k;T++)D[T]=this.i(T)&b.i(T);return new h(D,this.h&b.h)},r.or=function(b){for(var k=Math.max(this.g.length,b.g.length),D=[],T=0;T<k;T++)D[T]=this.i(T)|b.i(T);return new h(D,this.h|b.h)},r.xor=function(b){for(var k=Math.max(this.g.length,b.g.length),D=[],T=0;T<k;T++)D[T]=this.i(T)^b.i(T);return new h(D,this.h^b.h)};function De(b){for(var k=b.g.length+1,D=[],T=0;T<k;T++)D[T]=b.i(T)<<1|b.i(T-1)>>>31;return new h(D,b.h)}function Se(b,k){var D=k>>5;k%=32;for(var T=b.g.length-D,A=[],N=0;N<T;N++)A[N]=0<k?b.i(N+D)>>>k|b.i(N+D+1)<<32-k:b.i(N+D);return new h(A,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,$_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,Ni=h}).apply(typeof Qg<"u"?Qg:typeof self<"u"?self:typeof window<"u"?window:{});var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q_,Wa,H_,Ju,Kd,K_,G_,Q_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,v){return u==Array.prototype||u==Object.prototype||(u[g]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wu=="object"&&Wu];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,g){if(g)e:{var v=i;u=u.split(".");for(var x=0;x<u.length-1;x++){var U=u[x];if(!(U in v))break e;v=v[U]}u=u[u.length-1],x=v[u],g=g(x),g!=x&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}function l(u,g){u instanceof String&&(u+="");var v=0,x=!1,U={next:function(){if(!x&&v<u.length){var K=v++;return{value:g(K,u[K]),done:!1}}return x=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return l(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function m(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function _(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function E(u,g,v){return u.call.apply(u.bind,arguments)}function I(u,g,v){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,x),u.apply(g,U)}}return function(){return u.apply(g,arguments)}}function S(u,g,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:I,S.apply(null,arguments)}function j(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var x=v.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function W(u,g){function v(){}v.prototype=g.prototype,u.aa=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(x,U,K){for(var ae=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)ae[Ge-2]=arguments[Ge];return g.prototype[U].apply(x,ae)}}function V(u){const g=u.length;if(0<g){const v=Array(g);for(let x=0;x<g;x++)v[x]=u[x];return v}return[]}function C(u,g){for(let v=1;v<arguments.length;v++){const x=arguments[v];if(m(x)){const U=u.length||0,K=x.length||0;u.length=U+K;for(let ae=0;ae<K;ae++)u[U+ae]=x[ae]}else u.push(x)}}class Q{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function G(u){return/^[\s\xa0]*$/.test(u)}function ee(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var De=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function Se(u,g,v){for(const x in u)g.call(v,u[x],x,u)}function b(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function k(u){const g={};for(const v in u)g[v]=u[v];return g}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,g){let v,x;for(let U=1;U<arguments.length;U++){x=arguments[U];for(v in x)u[v]=x[v];for(let K=0;K<D.length;K++)v=D[K],Object.prototype.hasOwnProperty.call(x,v)&&(u[v]=x[v])}}function A(u){var g=1;u=u.split(":");const v=[];for(;0<g&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function N(u){p.setTimeout(()=>{throw u},0)}function R(){var u=re;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Te{constructor(){this.h=this.g=null}add(g,v){const x=nt.get();x.set(g,v),this.h?this.h.next=x:this.g=x,this.h=x}}var nt=new Q(()=>new He,u=>u.reset());class He{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,B=!1,re=new Te,Y=()=>{const u=p.Promise.resolve(void 0);Le=()=>{u.then(O)}};var O=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(v){N(v)}var g=nt;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}B=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};p.addEventListener("test",v,g),p.removeEventListener("test",v,g)}catch{}return u}();function je(u,g){if(de.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(De){e:{try{oe(g.nodeName);var U=!0;break e}catch{}U=!1}U||(g=null)}}else v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement);this.relatedTarget=g,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:J[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&je.aa.h.call(this)}}W(je,de);var J={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ce=0;function fe(u,g,v,x,U){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!x,this.ha=U,this.key=++ce,this.da=this.fa=!1}function xe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ke(u){this.src=u,this.g={},this.h=0}Ke.prototype.add=function(u,g,v,x,U){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var ae=rn(u,g,x,U);return-1<ae?(g=u[ae],v||(g.fa=!1)):(g=new fe(g,this.src,K,!!x,U),g.fa=v,u.push(g)),g};function Rt(u,g){var v=g.type;if(v in u.g){var x=u.g[v],U=Array.prototype.indexOf.call(x,g,void 0),K;(K=0<=U)&&Array.prototype.splice.call(x,U,1),K&&(xe(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function rn(u,g,v,x){for(var U=0;U<u.length;++U){var K=u[U];if(!K.da&&K.listener==g&&K.capture==!!v&&K.ha==x)return U}return-1}var Et="closure_lm_"+(1e6*Math.random()|0),sn={};function Ho(u,g,v,x,U){if(Array.isArray(g)){for(var K=0;K<g.length;K++)Ho(u,g[K],v,x,U);return null}return v=Qo(v),u&&u[le]?u.K(g,v,_(x)?!!x.capture:!1,U):Ko(u,g,v,!1,x,U)}function Ko(u,g,v,x,U,K){if(!g)throw Error("Invalid event type");var ae=_(U)?!!U.capture:!!U,Ge=Rs(u);if(Ge||(u[Et]=Ge=new Ke(u)),v=Ge.add(g,v,x,ae,K),v.proxy)return v;if(x=Cl(),v.proxy=x,x.src=u,x.listener=v,u.addEventListener)Pe||(U=ae),U===void 0&&(U=!1),u.addEventListener(g.toString(),x,U);else if(u.attachEvent)u.attachEvent(Ir(g.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Cl(){function u(v){return g.call(u.src,u.listener,v)}const g=Go;return u}function ks(u,g,v,x,U){if(Array.isArray(g))for(var K=0;K<g.length;K++)ks(u,g[K],v,x,U);else x=_(x)?!!x.capture:!!x,v=Qo(v),u&&u[le]?(u=u.i,g=String(g).toString(),g in u.g&&(K=u.g[g],v=rn(K,v,x,U),-1<v&&(xe(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete u.g[g],u.h--)))):u&&(u=Rs(u))&&(g=u.g[g.toString()],u=-1,g&&(u=rn(g,v,x,U)),(v=-1<u?g[u]:null)&&Tr(v))}function Tr(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[le])Rt(g.i,u);else{var v=u.type,x=u.proxy;g.removeEventListener?g.removeEventListener(v,x,u.capture):g.detachEvent?g.detachEvent(Ir(v),x):g.addListener&&g.removeListener&&g.removeListener(x),(v=Rs(g))?(Rt(v,u),v.h==0&&(v.src=null,g[Et]=null)):xe(u)}}}function Ir(u){return u in sn?sn[u]:sn[u]="on"+u}function Go(u,g){if(u.da)u=!0;else{g=new je(g,this);var v=u.listener,x=u.ha||u.src;u.fa&&Tr(u),u=v.call(x,g)}return u}function Rs(u){return u=u[Et],u instanceof Ke?u:null}var As="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qo(u){return typeof u=="function"?u:(u[As]||(u[As]=function(g){return u.handleEvent(g)}),u[As])}function wt(){H.call(this),this.i=new Ke(this),this.M=this,this.F=null}W(wt,H),wt.prototype[le]=!0,wt.prototype.removeEventListener=function(u,g,v,x){ks(this,u,g,v,x)};function Tt(u,g){var v,x=u.F;if(x)for(v=[];x;x=x.F)v.push(x);if(u=u.M,x=g.type||g,typeof g=="string")g=new de(g,u);else if(g instanceof de)g.target=g.target||u;else{var U=g;g=new de(x,u),T(g,U)}if(U=!0,v)for(var K=v.length-1;0<=K;K--){var ae=g.g=v[K];U=xr(ae,x,!0,g)&&U}if(ae=g.g=u,U=xr(ae,x,!0,g)&&U,U=xr(ae,x,!1,g)&&U,v)for(K=0;K<v.length;K++)ae=g.g=v[K],U=xr(ae,x,!1,g)&&U}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var v=u.g[g],x=0;x<v.length;x++)xe(v[x]);delete u.g[g],u.h--}}this.F=null},wt.prototype.K=function(u,g,v,x){return this.i.add(String(u),g,!1,v,x)},wt.prototype.L=function(u,g,v,x){return this.i.add(String(u),g,!0,v,x)};function xr(u,g,v,x){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var U=!0,K=0;K<g.length;++K){var ae=g[K];if(ae&&!ae.da&&ae.capture==v){var Ge=ae.listener,It=ae.ha||ae.src;ae.fa&&Rt(u.i,ae),U=Ge.call(It,x)!==!1&&U}}return U&&!x.defaultPrevented}function Yo(u,g,v){if(typeof u=="function")v&&(u=S(u,v));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:p.setTimeout(u,g||0)}function Yr(u){u.g=Yo(()=>{u.g=null,u.i&&(u.i=!1,Yr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Wi extends H{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Yr(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $i(u){H.call(this),this.h=u,this.g={}}W($i,H);var Xo=[];function Jo(u){Se(u.g,function(g,v){this.g.hasOwnProperty(v)&&Tr(g)},u),u.g={}}$i.prototype.N=function(){$i.aa.N.call(this),Jo(this)},$i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zo=p.JSON.stringify,ea=p.JSON.parse,ta=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function qi(){}qi.prototype.h=null;function Ps(u){return u.h||(u.h=u.i())}function Ns(){}var Sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nr(){de.call(this,"d")}W(nr,de);function Ds(){de.call(this,"c")}W(Ds,de);var rr={},na=null;function Hi(){return na=na||new wt}rr.La="serverreachability";function ra(u){de.call(this,rr.La,u)}W(ra,de);function Sr(u){const g=Hi();Tt(g,new ra(g))}rr.STAT_EVENT="statevent";function ia(u,g){de.call(this,rr.STAT_EVENT,u),this.stat=g}W(ia,de);function ht(u){const g=Hi();Tt(g,new ia(g,u))}rr.Ma="timingevent";function js(u,g){de.call(this,rr.Ma,u),this.size=g}W(js,de);function bn(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},g)}function Ki(){this.g=!0}Ki.prototype.xa=function(){this.g=!1};function Gi(u,g,v,x,U,K){u.info(function(){if(u.g)if(K)for(var ae="",Ge=K.split("&"),It=0;It<Ge.length;It++){var Be=Ge[It].split("=");if(1<Be.length){var At=Be[0];Be=Be[1];var pt=At.split("_");ae=2<=pt.length&&pt[1]=="type"?ae+(At+"="+Be+"&"):ae+(At+"=redacted&")}}else ae=null;else ae=K;return"XMLHTTP REQ ("+x+") [attempt "+U+"]: "+g+`
`+v+`
`+ae})}function Ls(u,g,v,x,U,K,ae){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+U+"]: "+g+`
`+v+`
`+K+" "+ae})}function Mn(u,g,v,x){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Kc(u,v)+(x?" "+x:"")})}function sa(u,g){u.info(function(){return"TIMEOUT: "+g})}Ki.prototype.info=function(){};function Kc(u,g){if(!u.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var x=v[u];if(!(2>x.length)){var U=x[1];if(Array.isArray(U)&&!(1>U.length)){var K=U[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ae=1;ae<U.length;ae++)U[ae]=""}}}}return Zo(v)}catch{return g}}var Vs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fn;function Qi(){}W(Qi,qi),Qi.prototype.g=function(){return new XMLHttpRequest},Qi.prototype.i=function(){return{}},Fn=new Qi;function Un(u,g,v,x){this.j=u,this.i=g,this.l=v,this.R=x||1,this.U=new $i(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rl}function Rl(){this.i=null,this.g="",this.h=!1}var oa={},Os={};function bs(u,g,v){u.L=1,u.v=ti(yn(g)),u.m=v,u.P=!0,aa(u,null)}function aa(u,g){u.F=Date.now(),Xe(u),u.A=yn(u.v);var v=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),ri(v.i,"t",x),u.C=0,v=u.j.J,u.h=new Rl,u.g=Hl(u.j,v?g:null,!u.m),0<u.O&&(u.M=new Wi(S(u.Y,u,u.g),u.O)),g=u.U,v=u.g,x=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(Xo[0]=U.toString()),U=Xo);for(var K=0;K<U.length;K++){var ae=Ho(v,U[K],x||g.handleEvent,!1,g.h||g);if(!ae)break;g.g[ae.key]=ae}g=u.H?k(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),Sr(),Gi(u.i,u.u,u.A,u.l,u.R,u.m)}Un.prototype.ca=function(u){u=u.target;const g=this.M;g&&an(u)==3?g.j():this.Y(u)},Un.prototype.Y=function(u){try{if(u==this.g)e:{const pt=an(this.g);var g=this.g.Ba();const Rn=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||fa(this.g)))){this.J||pt!=4||g==7||(g==8||0>=Rn?Sr(3):Sr(2)),Yi(this);var v=this.g.Z();this.X=v;t:if(Al(this)){var x=fa(this.g);u="";var U=x.length,K=an(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cn(this),Xr(this);var ae="";break t}this.h.i=new p.TextDecoder}for(g=0;g<U;g++)this.h.h=!0,u+=this.h.i.decode(x[g],{stream:!(K&&g==U-1)});x.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=v==200,Ls(this.i,this.u,this.A,this.l,this.R,pt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,It=this.g;if((Ge=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Ge)){var Be=Ge;break t}}Be=null}if(v=Be)Mn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,la(this,v);else{this.o=!1,this.s=3,ht(12),Cn(this),Xr(this);break e}}if(this.P){v=!0;let vn;for(;!this.J&&this.C<ae.length;)if(vn=Gc(this,ae),vn==Os){pt==4&&(this.s=4,ht(14),v=!1),Mn(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==oa){this.s=4,ht(15),Mn(this.i,this.l,ae,"[Invalid Chunk]"),v=!1;break}else Mn(this.i,this.l,vn,null),la(this,vn);if(Al(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||ae.length!=0||this.h.h||(this.s=1,ht(16),v=!1),this.o=this.o&&v,!v)Mn(this.i,this.l,ae,"[Invalid Chunked Response]"),Cn(this),Xr(this);else if(0<ae.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),ma(At),At.M=!0,ht(11))}}else Mn(this.i,this.l,ae,null),la(this,ae);pt==4&&Cn(this),this.o&&!this.J&&(pt==4?Gs(this.j,this):(this.o=!1,Xe(this)))}else Ws(this.g),v==400&&0<ae.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),Cn(this),Xr(this)}}}catch{}finally{}};function Al(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Gc(u,g){var v=u.C,x=g.indexOf(`
`,v);return x==-1?Os:(v=Number(g.substring(v,x)),isNaN(v)?oa:(x+=1,x+v>g.length?Os:(g=g.slice(x,x+v),u.C=x+v,g)))}Un.prototype.cancel=function(){this.J=!0,Cn(this)};function Xe(u){u.S=Date.now()+u.I,Pl(u,u.I)}function Pl(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=bn(S(u.ba,u),g)}function Yi(u){u.B&&(p.clearTimeout(u.B),u.B=null)}Un.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(sa(this.i,this.A),this.L!=2&&(Sr(),ht(17)),Cn(this),this.s=2,Xr(this)):Pl(this,this.S-u)};function Xr(u){u.j.G==0||u.J||Gs(u.j,u)}function Cn(u){Yi(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Jo(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function la(u,g){try{var v=u.j;if(v.G!=0&&(v.g==u||Jt(v.h,u))){if(!u.K&&Jt(v.h,u)&&v.G==3){try{var x=v.Da.g.parse(g)}catch{x=null}if(Array.isArray(x)&&x.length==3){var U=x;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Ks(v),qn(v);else break e;Hs(v),ht(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=bn(S(v.Za,v),6e3));if(1>=Dl(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Pr(v,11)}else if((u.K||v.g==u)&&Ks(v),!G(g))for(U=v.Da.g.parse(g),g=0;g<U.length;g++){let Be=U[g];if(v.T=Be[0],Be=Be[1],v.G==2)if(Be[0]=="c"){v.K=Be[1],v.ia=Be[2];const At=Be[3];At!=null&&(v.la=At,v.j.info("VER="+v.la));const pt=Be[4];pt!=null&&(v.Aa=pt,v.j.info("SVER="+v.Aa));const Rn=Be[5];Rn!=null&&typeof Rn=="number"&&0<Rn&&(x=1.5*Rn,v.L=x,v.j.info("backChannelRequestTimeoutMs_="+x)),x=v;const vn=u.g;if(vn){const rs=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rs){var K=x.h;K.g||rs.indexOf("spdy")==-1&&rs.indexOf("quic")==-1&&rs.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(ua(K,K.h),K.h=null))}if(x.D){const Ys=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ys&&(x.ya=Ys,Qe(x.I,x.D,Ys))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),x=v;var ae=u;if(x.qa=ql(x,x.J?x.ia:null,x.W),ae.K){jl(x.h,ae);var Ge=ae,It=x.L;It&&(Ge.I=It),Ge.B&&(Yi(Ge),Xe(Ge)),x.g=ae}else ns(x);0<v.i.length&&ar(v)}else Be[0]!="stop"&&Be[0]!="close"||Pr(v,7);else v.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Pr(v,7):Ot(v):Be[0]!="noop"&&v.l&&v.l.ta(Be),v.v=0)}}Sr(4)}catch{}}var Nl=class{constructor(u,g){this.g=u,this.map=g}};function Xi(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Dl(u){return u.h?1:u.g?u.g.size:0}function Jt(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function ua(u,g){u.g?u.g.add(g):u.h=g}function jl(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Xi.prototype.cancel=function(){if(this.i=Ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ll(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.D);return g}return V(u.i)}function Ms(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var g=[],v=u.length,x=0;x<v;x++)g.push(u[x]);return g}g=[],v=0;for(x in u)g[v++]=u[x];return g}function Fs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var g=[];u=u.length;for(var v=0;v<u;v++)g.push(v);return g}g=[],v=0;for(const x in u)g[v++]=x;return g}}}function Jr(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var v=Fs(u),x=Ms(u),U=x.length,K=0;K<U;K++)g.call(void 0,x[K],v&&v[K],u)}var Ji=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qc(u,g){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var x=u[v].indexOf("="),U=null;if(0<=x){var K=u[v].substring(0,x);U=u[v].substring(x+1)}else K=u[v];g(K,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Cr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Cr){this.h=u.h,Zi(this,u.j),this.o=u.o,this.g=u.g,Zr(this,u.s),this.l=u.l;var g=u.i,v=new ir;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),ei(this,v),this.m=u.m}else u&&(g=String(u).match(Ji))?(this.h=!1,Zi(this,g[1]||"",!0),this.o=Fe(g[2]||""),this.g=Fe(g[3]||"",!0),Zr(this,g[4]),this.l=Fe(g[5]||"",!0),ei(this,g[6]||"",!0),this.m=Fe(g[7]||"")):(this.h=!1,this.i=new ir(null,this.h))}Cr.prototype.toString=function(){var u=[],g=this.j;g&&u.push(ni(g,Us,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ni(g,Us,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(ni(v,v.charAt(0)=="/"?bl:Ol,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",ni(v,ca)),u.join("")};function yn(u){return new Cr(u)}function Zi(u,g,v){u.j=v?Fe(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Zr(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function ei(u,g,v){g instanceof ir?(u.i=g,sr(u.i,u.h)):(v||(g=ni(g,Ml)),u.i=new ir(g,u.h))}function Qe(u,g,v){u.i.set(g,v)}function ti(u){return Qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Fe(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ni(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,Vl),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Vl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Us=/[#\/\?@]/g,Ol=/[#\?:]/g,bl=/[#\?]/g,Ml=/[#\?@]/g,ca=/#/g;function ir(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Vt(u){u.g||(u.g=new Map,u.h=0,u.i&&Qc(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}r=ir.prototype,r.add=function(u,g){Vt(this),this.i=null,u=kn(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function Bn(u,g){Vt(u),g=kn(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function zn(u,g){return Vt(u),g=kn(u,g),u.g.has(g)}r.forEach=function(u,g){Vt(this),this.g.forEach(function(v,x){v.forEach(function(U){u.call(g,U,x,this)},this)},this)},r.na=function(){Vt(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let x=0;x<g.length;x++){const U=u[x];for(let K=0;K<U.length;K++)v.push(g[x])}return v},r.V=function(u){Vt(this);let g=[];if(typeof u=="string")zn(this,u)&&(g=g.concat(this.g.get(kn(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)g=g.concat(u[v])}return g},r.set=function(u,g){return Vt(this),this.i=null,u=kn(this,u),zn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function ri(u,g,v){Bn(u,g),0<v.length&&(u.i=null,u.g.set(kn(u,g),V(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var x=g[v];const K=encodeURIComponent(String(x)),ae=this.V(x);for(x=0;x<ae.length;x++){var U=K;ae[x]!==""&&(U+="="+encodeURIComponent(String(ae[x]))),u.push(U)}}return this.i=u.join("&")};function kn(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function sr(u,g){g&&!u.j&&(Vt(u),u.i=null,u.g.forEach(function(v,x){var U=x.toLowerCase();x!=U&&(Bn(this,x),ri(this,U,v))},u)),u.j=g}function Yc(u,g){const v=new Ki;if(p.Image){const x=new Image;x.onload=j(on,v,"TestLoadImage: loaded",!0,g,x),x.onerror=j(on,v,"TestLoadImage: error",!1,g,x),x.onabort=j(on,v,"TestLoadImage: abort",!1,g,x),x.ontimeout=j(on,v,"TestLoadImage: timeout",!1,g,x),p.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else g(!1)}function Fl(u,g){const v=new Ki,x=new AbortController,U=setTimeout(()=>{x.abort(),on(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:x.signal}).then(K=>{clearTimeout(U),K.ok?on(v,"TestPingServer: ok",!0,g):on(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),on(v,"TestPingServer: error",!1,g)})}function on(u,g,v,x,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),x(v)}catch{}}function Xc(){this.g=new ta}function Ul(u,g,v){const x=v||"";try{Jr(u,function(U,K){let ae=U;_(U)&&(ae=Zo(U)),g.push(x+K+"="+encodeURIComponent(ae))})}catch(U){throw g.push(x+"type="+encodeURIComponent("_badmap")),U}}function kr(u){this.l=u.Ub||null,this.j=u.eb||!1}W(kr,qi),kr.prototype.g=function(){return new es(this.l,this.j)},kr.prototype.i=function(u){return function(){return u}}({});function es(u,g){wt.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}W(es,wt),r=es.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,$n(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||p).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,$n(this)),this.g&&(this.readyState=3,$n(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Wn(this):$n(this),this.readyState==3&&Bl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Wn(this))},r.Qa=function(u){this.g&&(this.response=u,Wn(this))},r.ga=function(){this.g&&Wn(this)};function Wn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,$n(u)}r.setRequestHeader=function(u,g){this.u.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function $n(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Rr(u){let g="";return Se(u,function(v,x){g+=x,g+=":",g+=v,g+=`\r
`}),g}function ii(u,g,v){e:{for(x in v){var x=!1;break e}x=!0}x||(v=Rr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):Qe(u,g,v))}function rt(u){wt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}W(rt,wt);var Jc=/^https?$/i,ha=["POST","PUT"];r=rt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,g,v,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fn.g(),this.v=this.o?Ps(this.o):Ps(Fn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(K){ts(this,K);return}if(u=v||"",v=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var U in x)v.set(U,x[U]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const K of x.keys())v.set(K,x.get(K));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),U=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(ha,g,void 0))||x||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ae]of v)this.g.setRequestHeader(K,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zs(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){ts(this,K)}};function ts(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,Bs(u),_n(u)}function Bs(u){u.A||(u.A=!0,Tt(u,"complete"),Tt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Tt(this,"complete"),Tt(this,"abort"),_n(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_n(this,!0)),rt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?da(this):this.bb())},r.bb=function(){da(this)};function da(u){if(u.h&&typeof h<"u"&&(!u.v[1]||an(u)!=4||u.Z()!=2)){if(u.u&&an(u)==4)Yo(u.Ea,0,u);else if(Tt(u,"readystatechange"),an(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var x;if(x=ae===0){var U=String(u.D).match(Ji)[1]||null;!U&&p.self&&p.self.location&&(U=p.self.location.protocol.slice(0,-1)),x=!Jc.test(U?U.toLowerCase():"")}v=x}if(v)Tt(u,"complete"),Tt(u,"success");else{u.m=6;try{var K=2<an(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",Bs(u)}}finally{_n(u)}}}}function _n(u,g){if(u.g){zs(u);const v=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||Tt(u,"ready");try{v.onreadystatechange=x}catch{}}}function zs(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function an(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<an(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ea(g)}};function fa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ws(u){const g={};u=(u.g&&2<=an(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(G(u[x]))continue;var v=A(u[x]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=g[U]||[];g[U]=K,K.push(v)}b(g,function(x){return x.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function or(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function pa(u){this.Aa=0,this.i=[],this.j=new Ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=or("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=or("baseRetryDelayMs",5e3,u),this.cb=or("retryDelaySeedMs",1e4,u),this.Wa=or("forwardChannelMaxRetries",2,u),this.wa=or("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Xi(u&&u.concurrentRequestLimit),this.Da=new Xc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=pa.prototype,r.la=8,r.G=1,r.connect=function(u,g,v,x){ht(0),this.W=u,this.H=g||{},v&&x!==void 0&&(this.H.OSID=v,this.H.OAID=x),this.F=this.X,this.I=ql(this,null,this.W),ar(this)};function Ot(u){if($s(u),u.G==3){var g=u.U++,v=yn(u.I);if(Qe(v,"SID",u.K),Qe(v,"RID",g),Qe(v,"TYPE","terminate"),Ar(u,v),g=new Un(u,u.j,g),g.L=2,g.v=ti(yn(v)),v=!1,p.navigator&&p.navigator.sendBeacon)try{v=p.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&p.Image&&(new Image().src=g.v,v=!0),v||(g.g=Hl(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Xe(g)}$l(u)}function qn(u){u.g&&(ma(u),u.g.cancel(),u.g=null)}function $s(u){qn(u),u.u&&(p.clearTimeout(u.u),u.u=null),Ks(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function ar(u){if(!gn(u.h)&&!u.s){u.s=!0;var g=u.Ga;Le||Y(),B||(Le(),B=!0),re.add(g,u),u.B=0}}function Zc(u,g){return Dl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=bn(S(u.Ga,u,g),Wl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new Un(this,this.j,u);let K=this.o;if(this.S&&(K?(K=k(K),T(K,this.S)):K=this.S),this.m!==null||this.O||(U.H=K,K=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var x=this.i[v];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(g+=x,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=si(this,U,g),v=yn(this.I),Qe(v,"RID",u),Qe(v,"CVER",22),this.D&&Qe(v,"X-HTTP-Session-Id",this.D),Ar(this,v),K&&(this.O?g="headers="+encodeURIComponent(String(Rr(K)))+"&"+g:this.m&&ii(v,this.m,K)),ua(this.h,U),this.Ua&&Qe(v,"TYPE","init"),this.P?(Qe(v,"$req",g),Qe(v,"SID","null"),U.T=!0,bs(U,v,null)):bs(U,v,g),this.G=2}}else this.G==3&&(u?qs(this,u):this.i.length==0||gn(this.h)||qs(this))};function qs(u,g){var v;g?v=g.l:v=u.U++;const x=yn(u.I);Qe(x,"SID",u.K),Qe(x,"RID",v),Qe(x,"AID",u.T),Ar(u,x),u.m&&u.o&&ii(x,u.m,u.o),v=new Un(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),g&&(u.i=g.D.concat(u.i)),g=si(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ua(u.h,v),bs(v,x,g)}function Ar(u,g){u.H&&Se(u.H,function(v,x){Qe(g,x,v)}),u.l&&Jr({},function(v,x){Qe(g,x,v)})}function si(u,g,v){v=Math.min(u.i.length,v);var x=u.l?S(u.l.Na,u.l,u):null;e:{var U=u.i;let K=-1;for(;;){const ae=["count="+v];K==-1?0<v?(K=U[0].g,ae.push("ofs="+K)):K=0:ae.push("ofs="+K);let Ge=!0;for(let It=0;It<v;It++){let Be=U[It].g;const At=U[It].map;if(Be-=K,0>Be)K=Math.max(0,U[It].g-100),Ge=!1;else try{Ul(At,ae,"req"+Be+"_")}catch{x&&x(At)}}if(Ge){x=ae.join("&");break e}}}return u=u.i.splice(0,v),g.D=u,x}function ns(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;Le||Y(),B||(Le(),B=!0),re.add(g,u),u.v=0}}function Hs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=bn(S(u.Fa,u),Wl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,zl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=bn(S(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),qn(this),zl(this))};function ma(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function zl(u){u.g=new Un(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=yn(u.qa);Qe(g,"RID","rpc"),Qe(g,"SID",u.K),Qe(g,"AID",u.T),Qe(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qe(g,"TO",u.ja),Qe(g,"TYPE","xmlhttp"),Ar(u,g),u.m&&u.o&&ii(g,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=ti(yn(g)),v.m=null,v.P=!0,aa(v,u)}r.Za=function(){this.C!=null&&(this.C=null,qn(this),Hs(this),ht(19))};function Ks(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function Gs(u,g){var v=null;if(u.g==g){Ks(u),ma(u),u.g=null;var x=2}else if(Jt(u.h,g))v=g.D,jl(u.h,g),x=1;else return;if(u.G!=0){if(g.o)if(x==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var U=u.B;x=Hi(),Tt(x,new js(x,v)),ar(u)}else ns(u);else if(U=g.s,U==3||U==0&&0<g.X||!(x==1&&Zc(u,g)||x==2&&Hs(u)))switch(v&&0<v.length&&(g=u.h,g.i=g.i.concat(v)),U){case 1:Pr(u,5);break;case 4:Pr(u,10);break;case 3:Pr(u,6);break;default:Pr(u,2)}}}function Wl(u,g){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*g}function Pr(u,g){if(u.j.info("Error code "+g),g==2){var v=S(u.fb,u),x=u.Xa;const U=!x;x=new Cr(x||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Zi(x,"https"),ti(x),U?Yc(x.toString(),v):Fl(x.toString(),v)}else ht(2);u.G=0,u.l&&u.l.sa(g),$l(u),$s(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function $l(u){if(u.G=0,u.ka=[],u.l){const g=Ll(u.h);(g.length!=0||u.i.length!=0)&&(C(u.ka,g),C(u.ka,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.ra()}}function ql(u,g,v){var x=v instanceof Cr?yn(v):new Cr(v);if(x.g!="")g&&(x.g=g+"."+x.g),Zr(x,x.s);else{var U=p.location;x=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;var K=new Cr(null);x&&Zi(K,x),g&&(K.g=g),U&&Zr(K,U),v&&(K.l=v),x=K}return v=u.D,g=u.ya,v&&g&&Qe(x,v,g),Qe(x,"VER",u.la),Ar(u,x),x}function Hl(u,g,v){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new rt(new kr({eb:v})):new rt(u.pa),g.Ha(u.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ga(){}r=ga.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Qs(){}Qs.prototype.g=function(u,g){return new Zt(u,g)};function Zt(u,g){wt.call(this),this.g=new pa(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!G(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!G(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new lr(this)}W(Zt,wt),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Ot(this.g)},Zt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Zo(u),u=v);g.i.push(new Nl(g.Ya++,u)),g.G==3&&ar(g)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Ot(this.g),delete this.g,Zt.aa.N.call(this)};function Kl(u){nr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}W(Kl,nr);function Gl(){Ds.call(this),this.status=1}W(Gl,Ds);function lr(u){this.g=u}W(lr,ga),lr.prototype.ua=function(){Tt(this.g,"a")},lr.prototype.ta=function(u){Tt(this.g,new Kl(u))},lr.prototype.sa=function(u){Tt(this.g,new Gl)},lr.prototype.ra=function(){Tt(this.g,"b")},Qs.prototype.createWebChannel=Qs.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,Q_=function(){return new Qs},G_=function(){return Hi()},K_=rr,Kd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vs.NO_ERROR=0,Vs.TIMEOUT=8,Vs.HTTP_ERROR=6,Ju=Vs,kl.COMPLETE="complete",H_=kl,Ns.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Wa=Ns,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,q_=rt}).apply(typeof Wu<"u"?Wu:typeof self<"u"?self:typeof window<"u"?window:{});const Yg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new ff("@firebase/firestore");function _o(){return Ts.logLevel}function he(r,...e){if(Ts.logLevel<=be.DEBUG){const t=e.map(Sf);Ts.debug(`Firestore (${Fo}): ${r}`,...t)}}function Kr(r,...e){if(Ts.logLevel<=be.ERROR){const t=e.map(Sf);Ts.error(`Firestore (${Fo}): ${r}`,...t)}}function Ro(r,...e){if(Ts.logLevel<=be.WARN){const t=e.map(Sf);Ts.warn(`Firestore (${Fo}): ${r}`,...t)}}function Sf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(r="Unexpected state"){const e=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: `+r;throw Kr(e),new Error(e)}function qe(r,e){r||Re()}function Ne(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gt.UNAUTHENTICATED))}shutdown(){}}class OS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bS{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qe(this.o===void 0);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wr,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await o(this.currentUser)})},p=m=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(m=>p(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qe(typeof i.accessToken=="string"),new Y_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string"),new Gt(e)}}class MS{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class FS{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new MS(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class US{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){qe(this.o===void 0);const i=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,he("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qe(typeof t.token=="string"),this.R=t.token,new US(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=zS(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function Ue(r,e){return r<e?-1:r>e?1:0}function Ao(r,e,t){return r.length===e.length&&r.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Ct(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new me(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Ct(0,0))}static max(){return new Ae(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Re(),i===void 0?i=e.length-t:i>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return fr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=fr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=fr.isNumericId(e),o=fr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?fr.extractNumericId(e).compare(fr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ni.fromString(e.substring(4,e.length-2))}}class tt extends fr{construct(e,t,i){return new tt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new me(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new tt(t)}static emptyPath(){return new tt([])}}const WS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends fr{construct(e,t,i){return new Bt(e,t,i)}static isValidIdentifier(e){return WS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Bt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new me(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new me(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new me(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(i+=p,o++):(l(),o++)}if(l(),h)throw new me(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(t)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(tt.fromString(e))}static fromName(e){return new ve(tt.fromString(e).popFirst(5))}static empty(){return new ve(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new tt(e.slice()))}}function $S(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new Ct(t+1,0):new Ct(t,i));return new ji(o,ve.empty(),e)}function qS(r){return new ji(r.readTime,r.key,-1)}class ji{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ji(Ae.min(),ve.empty(),-1)}static max(){return new ji(Ae.max(),ve.empty(),-1)}}function HS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(r.documentKey,e.documentKey),t!==0?t:Ue(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==KS)throw r;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,i)=>{t(e)})}static reject(e){return new X((t,i)=>{i(e)})}static waitFor(e){return new X((t,i)=>{let o=0,l=0,h=!1;e.forEach(p=>{++o,p.next(()=>{++l,h&&l===o&&t()},m=>i(m))}),h=!0,l===o&&t()})}static or(e){let t=X.resolve(!1);for(const i of e)t=t.next(o=>o?X.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new X((i,o)=>{const l=e.length,h=new Array(l);let p=0;for(let m=0;m<l;m++){const _=m;t(e[_]).next(E=>{h[_]=E,++p,p===l&&i(h)},E=>o(E))}})}static doWhile(e,t){return new X((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function QS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Bo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}kc.oe=-1;function Rc(r){return r==null}function hc(r){return r===0&&1/r==-1/0}function YS(r){return typeof r=="number"&&Number.isInteger(r)&&!hc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Xg(e)),e=JS(r.get(t),e);return Xg(e)}function JS(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function Xg(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ui(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function J_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $u(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $u(this.root,e,this.comparator,!1)}getReverseIterator(){return new $u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $u(this.root,e,this.comparator,!0)}}class $u{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Ut.RED,this.left=o??Ut.EMPTY,this.right=l??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Ut(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ut.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zg(this.data.getIterator())}getIteratorFrom(e){return new Zg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class Zg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new In([])}unionWith(e){let t=new kt(Bt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new In(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Z_("Invalid base64 string: "+l):l}}(e);return new zt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const ZS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Li(r){if(qe(!!r),typeof r=="string"){let e=0;const t=ZS.exec(r);if(qe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ft(r.seconds),nanos:ft(r.nanos)}}function ft(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Vi(r){return typeof r=="string"?zt.fromBase64String(r):zt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Ac(r){const e=r.mapValue.fields.__previous_value__;return Cf(e)?Ac(e):e}function nl(r){const e=Li(r.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t,i,o,l,h,p,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=_}}class rl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu={mapValue:{}};function Oi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Cf(r)?4:nC(r)?9007199254740991:tC(r)?10:11:Re()}function Er(r,e){if(r===e)return!0;const t=Oi(r);if(t!==Oi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return nl(r).isEqual(nl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Li(o.timestampValue),p=Li(l.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return Vi(o.bytesValue).isEqual(Vi(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return ft(o.geoPointValue.latitude)===ft(l.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return ft(o.integerValue)===ft(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ft(o.doubleValue),p=ft(l.doubleValue);return h===p?hc(h)===hc(p):isNaN(h)&&isNaN(p)}return!1}(r,e);case 9:return Ao(r.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},p=l.mapValue.fields||{};if(Jg(h)!==Jg(p))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(p[m]===void 0||!Er(h[m],p[m])))return!1;return!0}(r,e);default:return Re()}}function il(r,e){return(r.values||[]).find(t=>Er(t,e))!==void 0}function Po(r,e){if(r===e)return 0;const t=Oi(r),i=Oi(e);if(t!==i)return Ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(r.booleanValue,e.booleanValue);case 2:return function(l,h){const p=ft(l.integerValue||l.doubleValue),m=ft(h.integerValue||h.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1}(r,e);case 3:return ey(r.timestampValue,e.timestampValue);case 4:return ey(nl(r),nl(e));case 5:return Ue(r.stringValue,e.stringValue);case 6:return function(l,h){const p=Vi(l),m=Vi(h);return p.compareTo(m)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const p=l.split("/"),m=h.split("/");for(let _=0;_<p.length&&_<m.length;_++){const E=Ue(p[_],m[_]);if(E!==0)return E}return Ue(p.length,m.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const p=Ue(ft(l.latitude),ft(h.latitude));return p!==0?p:Ue(ft(l.longitude),ft(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return ty(r.arrayValue,e.arrayValue);case 10:return function(l,h){var p,m,_,E;const I=l.fields||{},S=h.fields||{},j=(p=I.value)===null||p===void 0?void 0:p.arrayValue,W=(m=S.value)===null||m===void 0?void 0:m.arrayValue,V=Ue(((_=j==null?void 0:j.values)===null||_===void 0?void 0:_.length)||0,((E=W==null?void 0:W.values)===null||E===void 0?void 0:E.length)||0);return V!==0?V:ty(j,W)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===qu.mapValue&&h===qu.mapValue)return 0;if(l===qu.mapValue)return 1;if(h===qu.mapValue)return-1;const p=l.fields||{},m=Object.keys(p),_=h.fields||{},E=Object.keys(_);m.sort(),E.sort();for(let I=0;I<m.length&&I<E.length;++I){const S=Ue(m[I],E[I]);if(S!==0)return S;const j=Po(p[m[I]],_[E[I]]);if(j!==0)return j}return Ue(m.length,E.length)}(r.mapValue,e.mapValue);default:throw Re()}}function ey(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ue(r,e);const t=Li(r),i=Li(e),o=Ue(t.seconds,i.seconds);return o!==0?o:Ue(t.nanos,i.nanos)}function ty(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Po(t[o],i[o]);if(l)return l}return Ue(t.length,i.length)}function No(r){return Gd(r)}function Gd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const i=Li(t);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Vi(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ve.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Gd(l);return i+"]"}(r.arrayValue):"mapValue"in r?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Gd(t.fields[h])}`;return o+"}"}(r.mapValue):Re()}function Zu(r){switch(Oi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ac(r);return e?16+Zu(e):16;case 5:return 2*r.stringValue.length;case 6:return Vi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+Zu(l),0)}(r.arrayValue);case 10:case 11:return function(i){let o=0;return Ui(i.fields,(l,h)=>{o+=l.length+Zu(h)}),o}(r.mapValue);default:throw Re()}}function ny(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Qd(r){return!!r&&"integerValue"in r}function kf(r){return!!r&&"arrayValue"in r}function ry(r){return!!r&&"nullValue"in r}function iy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ec(r){return!!r&&"mapValue"in r}function tC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ga(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ui(r.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ga(i)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ga(r.arrayValue.values[t]);return e}return Object.assign({},r)}function nC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ga(t)}setAll(e){let t=Bt.emptyPath(),i={},o=[];e.forEach((h,p)=>{if(!t.isImmediateParentOf(p)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=p.popLast()}h?i[p.lastSegment()]=Ga(h):o.push(p.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ec(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ui(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new mn(Ga(this.value))}}function ev(r){const e=[];return Ui(r.fields,(t,i)=>{const o=new Bt([t]);if(ec(i)){const l=ev(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,t,i,o,l,h,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Qt(e,0,Ae.min(),Ae.min(),Ae.min(),mn.empty(),0)}static newFoundDocument(e,t,i,o){return new Qt(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new Qt(e,2,t,Ae.min(),Ae.min(),mn.empty(),0)}static newUnknownDocument(e,t){return new Qt(e,3,t,Ae.min(),Ae.min(),mn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t){this.position=e,this.inclusive=t}}function sy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=ve.comparator(ve.fromName(h.referenceValue),t.key):i=Po(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function oy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Er(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t="asc"){this.field=e,this.dir=t}}function rC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{}class _t extends tv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new sC(e,t,i):t==="array-contains"?new lC(e,i):t==="in"?new uC(e,i):t==="not-in"?new cC(e,i):t==="array-contains-any"?new hC(e,i):new _t(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new oC(e,i):new aC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Po(t,this.value)):t!==null&&Oi(this.value)===Oi(t)&&this.matchesComparison(Po(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends tv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Zn(e,t)}matches(e){return nv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function nv(r){return r.op==="and"}function rv(r){return iC(r)&&nv(r)}function iC(r){for(const e of r.filters)if(e instanceof Zn)return!1;return!0}function Yd(r){if(r instanceof _t)return r.field.canonicalString()+r.op.toString()+No(r.value);if(rv(r))return r.filters.map(e=>Yd(e)).join(",");{const e=r.filters.map(t=>Yd(t)).join(",");return`${r.op}(${e})`}}function iv(r,e){return r instanceof _t?function(i,o){return o instanceof _t&&i.op===o.op&&i.field.isEqual(o.field)&&Er(i.value,o.value)}(r,e):r instanceof Zn?function(i,o){return o instanceof Zn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,h,p)=>l&&iv(h,o.filters[p]),!0):!1}(r,e):void Re()}function sv(r){return r instanceof _t?function(t){return`${t.field.canonicalString()} ${t.op} ${No(t.value)}`}(r):r instanceof Zn?function(t){return t.op.toString()+" {"+t.getFilters().map(sv).join(" ,")+"}"}(r):"Filter"}class sC extends _t{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class oC extends _t{constructor(e,t){super(e,"in",t),this.keys=ov("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class aC extends _t{constructor(e,t){super(e,"not-in",t),this.keys=ov("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ov(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ve.fromName(i.referenceValue))}class lC extends _t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kf(t)&&il(t.arrayValue,this.value)}}class uC extends _t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&il(this.value.arrayValue,t)}}class cC extends _t{constructor(e,t){super(e,"not-in",t)}matches(e){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!il(this.value.arrayValue,t)}}class hC extends _t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>il(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t=null,i=[],o=[],l=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=p,this.ue=null}}function ay(r,e=null,t=[],i=[],o=null,l=null,h=null){return new dC(r,e,t,i,o,l,h)}function Rf(r){const e=Ne(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Yd(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Rc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>No(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>No(i)).join(",")),e.ue=t}return e.ue}function Af(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!rC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!iv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!oy(r.startAt,e.startAt)&&oy(r.endAt,e.endAt)}function Xd(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,t=null,i=[],o=[],l=null,h="F",p=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function fC(r,e,t,i,o,l,h,p){return new ml(r,e,t,i,o,l,h,p)}function Pf(r){return new ml(r)}function ly(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function av(r){return r.collectionGroup!==null}function Qa(r){const e=Ne(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new kt(Bt.comparator);return h.filters.forEach(m=>{m.getFlattenedFilters().forEach(_=>{_.isInequality()&&(p=p.add(_.field))})}),p})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new fc(l,i))}),t.has(Bt.keyField().canonicalString())||e.ce.push(new fc(Bt.keyField(),i))}return e.ce}function _r(r){const e=Ne(r);return e.le||(e.le=pC(e,Qa(r))),e.le}function pC(r,e){if(r.limitType==="F")return ay(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new fc(o.field,l)});const t=r.endAt?new dc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new dc(r.startAt.position,r.startAt.inclusive):null;return ay(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Jd(r,e){const t=r.filters.concat([e]);return new ml(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Zd(r,e,t){return new ml(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Pc(r,e){return Af(_r(r),_r(e))&&r.limitType===e.limitType}function lv(r){return`${Rf(_r(r))}|lt:${r.limitType}`}function vo(r){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>sv(o)).join(", ")}]`),Rc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>No(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>No(o)).join(",")),`Target(${i})`}(_r(r))}; limitType=${r.limitType})`}function Nc(r,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ve.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(r,e)&&function(i,o){for(const l of Qa(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(i,o){return!(i.startAt&&!function(h,p,m){const _=sy(h,p,m);return h.inclusive?_<=0:_<0}(i.startAt,Qa(i),o)||i.endAt&&!function(h,p,m){const _=sy(h,p,m);return h.inclusive?_>=0:_>0}(i.endAt,Qa(i),o))}(r,e)}function mC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function uv(r){return(e,t)=>{let i=!1;for(const o of Qa(r)){const l=gC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function gC(r,e,t){const i=r.field.isKeyField()?ve.comparator(e.key,t.key):function(l,h,p){const m=h.data.field(l),_=p.data.field(l);return m!==null&&_!==null?Po(m,_):Re()}(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return J_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=new at(ve.comparator);function Gr(){return yC}const cv=new at(ve.comparator);function $a(...r){let e=cv;for(const t of r)e=e.insert(t.key,t);return e}function hv(r){let e=cv;return r.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ys(){return Ya()}function dv(){return Ya()}function Ya(){return new xs(r=>r.toString(),(r,e)=>r.isEqual(e))}const _C=new at(ve.comparator),vC=new kt(ve.comparator);function Me(...r){let e=vC;for(const t of r)e=e.add(t);return e}const EC=new kt(Ue);function wC(){return EC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function fv(r){return{integerValue:""+r}}function TC(r,e){return YS(e)?fv(e):Nf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this._=void 0}}function IC(r,e,t){return r instanceof sl?function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Cf(l)&&(l=Ac(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(t,e):r instanceof Do?mv(r,e):r instanceof ol?gv(r,e):function(o,l){const h=pv(o,l),p=uy(h)+uy(o.Pe);return Qd(h)&&Qd(o.Pe)?fv(p):Nf(o.serializer,p)}(r,e)}function xC(r,e,t){return r instanceof Do?mv(r,e):r instanceof ol?gv(r,e):t}function pv(r,e){return r instanceof pc?function(i){return Qd(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class sl extends Dc{}class Do extends Dc{constructor(e){super(),this.elements=e}}function mv(r,e){const t=yv(e);for(const i of r.elements)t.some(o=>Er(o,i))||t.push(i);return{arrayValue:{values:t}}}class ol extends Dc{constructor(e){super(),this.elements=e}}function gv(r,e){let t=yv(e);for(const i of r.elements)t=t.filter(o=>!Er(o,i));return{arrayValue:{values:t}}}class pc extends Dc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function uy(r){return ft(r.integerValue||r.doubleValue)}function yv(r){return kf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t){this.field=e,this.transform=t}}function SC(r,e){return r.field.isEqual(e.field)&&function(i,o){return i instanceof Do&&o instanceof Do||i instanceof ol&&o instanceof ol?Ao(i.elements,o.elements,Er):i instanceof pc&&o instanceof pc?Er(i.Pe,o.Pe):i instanceof sl&&o instanceof sl}(r.transform,e.transform)}class CC{constructor(e,t){this.version=e,this.transformResults=t}}class Vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class jc{}function vv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Df(r.key,Vn.none()):new gl(r.key,r.data,Vn.none());{const t=r.data,i=mn.empty();let o=new kt(Bt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Bi(r.key,i,new In(o.toArray()),Vn.none())}}function kC(r,e,t){r instanceof gl?function(o,l,h){const p=o.value.clone(),m=hy(o.fieldTransforms,l,h.transformResults);p.setAll(m),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,t):r instanceof Bi?function(o,l,h){if(!tc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const p=hy(o.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(Ev(o)),m.setAll(p),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Xa(r,e,t,i){return r instanceof gl?function(l,h,p,m){if(!tc(l.precondition,h))return p;const _=l.value.clone(),E=dy(l.fieldTransforms,m,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(r,e,t,i):r instanceof Bi?function(l,h,p,m){if(!tc(l.precondition,h))return p;const _=dy(l.fieldTransforms,m,h),E=h.data;return E.setAll(Ev(l)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(I=>I.field))}(r,e,t,i):function(l,h,p){return tc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p}(r,e,t)}function RC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=pv(i.transform,o||null);l!=null&&(t===null&&(t=mn.empty()),t.set(i.field,l))}return t||null}function cy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ao(i,o,(l,h)=>SC(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class gl extends jc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Bi extends jc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Ev(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}}),e}function hy(r,e,t){const i=new Map;qe(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,p=e.data.field(l.field);i.set(l.field,xC(h,p,t[o]))}return i}function dy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,IC(l,h,e))}return i}class Df extends jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AC extends jc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&kC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Xa(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Xa(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=dv();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let p=this.applyToLocalView(h,l.mutatedFields);p=t.has(o.key)?null:p;const m=vv(h,p);m!==null&&i.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Me())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(t,i)=>cy(t,i))&&Ao(this.baseMutations,e.baseMutations,(t,i)=>cy(t,i))}}class jf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){qe(e.mutations.length===i.length);let o=function(){return _C}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new jf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,ze;function jC(r){switch(r){default:return Re();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function wv(r){if(r===void 0)return Kr("GRPC error has no .code"),Z.UNKNOWN;switch(r){case yt.OK:return Z.OK;case yt.CANCELLED:return Z.CANCELLED;case yt.UNKNOWN:return Z.UNKNOWN;case yt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case yt.INTERNAL:return Z.INTERNAL;case yt.UNAVAILABLE:return Z.UNAVAILABLE;case yt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case yt.NOT_FOUND:return Z.NOT_FOUND;case yt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case yt.ABORTED:return Z.ABORTED;case yt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case yt.DATA_LOSS:return Z.DATA_LOSS;default:return Re()}}(ze=yt||(yt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=new Ni([4294967295,4294967295],0);function fy(r){const e=LC().encode(r),t=new $_;return t.update(e),new Uint8Array(t.digest())}function py(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ni([t,i],0),new Ni([o,l],0)]}class Lf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new qa(`Invalid padding: ${t}`);if(i<0)throw new qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new qa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new qa(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Ni.fromNumber(this.Te)}de(e,t,i){let o=e.add(t.multiply(Ni.fromNumber(i)));return o.compare(VC)===1&&(o=new Ni([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=fy(e),[i,o]=py(t);for(let l=0;l<this.hashCount;l++){const h=this.de(i,o,l);if(!this.Ee(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Lf(l,o,t);return i.forEach(p=>h.insert(p)),h}insert(e){if(this.Te===0)return;const t=fy(e),[i,o]=py(t);for(let l=0;l<this.hashCount;l++){const h=this.de(i,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,yl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Lc(Ae.min(),o,new at(Ue),Gr(),Me())}}class yl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new yl(i,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class Tv{constructor(e,t){this.targetId=e,this.me=t}}class Iv{constructor(e,t,i=zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class my{constructor(){this.fe=0,this.ge=gy(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),t=Me(),i=Me();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Re()}}),new yl(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=gy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class OC{constructor(e){this.Be=e,this.Le=new Map,this.ke=Gr(),this.qe=Hu(),this.Qe=Hu(),this.Ke=new at(Ue)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:Re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((i,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,i=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(Xd(l))if(i===0){const h=new ve(l.path);this.We(t,h,Qt.newNoDocument(h,Ae.min()))}else qe(i===1);else{const h=this.Ze(t);if(h!==i){const p=this.Xe(e),m=p?this.et(p,e,h):1;if(m!==0){this.He(t);const _=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,_)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,p;try{h=Vi(i).toUint8Array()}catch(m){if(m instanceof Z_)return Ro("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new Lf(h,o,l)}catch(m){return Ro(m instanceof qa?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.Te===0?null:p}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Be.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const h=this.Be.nt(),p=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Le.forEach((l,h)=>{const p=this.Ye(h);if(p){if(l.current&&Xd(p.target)){const m=new ve(p.target.path);this.st(m).has(h)||this.ot(h,m)||this.We(h,m,Qt.newNoDocument(m,e))}l.be&&(t.set(h,l.ve()),l.Ce())}});let i=Me();this.Qe.forEach((l,h)=>{let p=!0;h.forEachWhile(m=>{const _=this.Ye(m);return!_||_.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(i=i.add(l))}),this.ke.forEach((l,h)=>h.setReadTime(e));const o=new Lc(e,t,this.Ke,this.ke,i);return this.ke=Gr(),this.qe=Hu(),this.Qe=Hu(),this.Ke=new at(Ue),o}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new my,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new kt(Ue),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new kt(Ue),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new my),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function Hu(){return new at(ve.comparator)}function gy(){return new at(ve.comparator)}const bC={asc:"ASCENDING",desc:"DESCENDING"},MC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FC={and:"AND",or:"OR"};class UC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ef(r,e){return r.useProto3Json||Rc(e)?e:{value:e}}function mc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function BC(r,e){return mc(r,e.toTimestamp())}function vr(r){return qe(!!r),Ae.fromTimestamp(function(t){const i=Li(t);return new Ct(i.seconds,i.nanos)}(r))}function Vf(r,e){return tf(r,e).canonicalString()}function tf(r,e){const t=function(o){return new tt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Sv(r){const e=tt.fromString(r);return qe(Pv(e)),e}function nf(r,e){return Vf(r.databaseId,e.path)}function Nd(r,e){const t=Sv(e);if(t.get(1)!==r.databaseId.projectId)throw new me(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new me(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ve(kv(t))}function Cv(r,e){return Vf(r.databaseId,e)}function zC(r){const e=Sv(r);return e.length===4?tt.emptyPath():kv(e)}function rf(r){return new tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function kv(r){return qe(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function yy(r,e,t){return{name:nf(r,e),fields:t.value.mapValue.fields}}function WC(r,e){let t;if("targetChange"in e){e.targetChange;const i=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Re()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(_,E){return _.useProto3Json?(qe(E===void 0||typeof E=="string"),zt.fromBase64String(E||"")):(qe(E===void 0||E instanceof Buffer||E instanceof Uint8Array),zt.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&function(_){const E=_.code===void 0?Z.UNKNOWN:wv(_.code);return new me(E,_.message||"")}(h);t=new Iv(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Nd(r,i.document.name),l=vr(i.document.updateTime),h=i.document.createTime?vr(i.document.createTime):Ae.min(),p=new mn({mapValue:{fields:i.document.fields}}),m=Qt.newFoundDocument(o,l,h,p),_=i.targetIds||[],E=i.removedTargetIds||[];t=new nc(_,E,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Nd(r,i.document),l=i.readTime?vr(i.readTime):Ae.min(),h=Qt.newNoDocument(o,l),p=i.removedTargetIds||[];t=new nc([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Nd(r,i.document),l=i.removedTargetIds||[];t=new nc([],l,o,null)}else{if(!("filter"in e))return Re();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new DC(o,l),p=i.targetId;t=new Tv(p,h)}}return t}function $C(r,e){let t;if(e instanceof gl)t={update:yy(r,e.key,e.value)};else if(e instanceof Df)t={delete:nf(r,e.key)};else if(e instanceof Bi)t={update:yy(r,e.key,e.data),updateMask:ZC(e.fieldMask)};else{if(!(e instanceof AC))return Re();t={verify:nf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,h){const p=h.transform;if(p instanceof sl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Do)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ol)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof pc)return{fieldPath:h.field.canonicalString(),increment:p.Pe};throw Re()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:BC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re()}(r,e.precondition)),t}function qC(r,e){return r&&r.length>0?(qe(e!==void 0),r.map(t=>function(o,l){let h=o.updateTime?vr(o.updateTime):vr(l);return h.isEqual(Ae.min())&&(h=vr(l)),new CC(h,o.transformResults||[])}(t,e))):[]}function HC(r,e){return{documents:[Cv(r,e.path)]}}function KC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Cv(r,o);const l=function(_){if(_.length!==0)return Av(Zn.create(_,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(_){if(_.length!==0)return _.map(E=>function(S){return{field:Eo(S.field),direction:YC(S.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=ef(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{ct:t,parent:o}}function GC(r){let e=zC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){qe(i===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(I){const S=Rv(I);return S instanceof Zn&&rv(S)?S.getFilters():[S]}(t.where));let h=[];t.orderBy&&(h=function(I){return I.map(S=>function(W){return new fc(wo(W.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(W.direction))}(S))}(t.orderBy));let p=null;t.limit&&(p=function(I){let S;return S=typeof I=="object"?I.value:I,Rc(S)?null:S}(t.limit));let m=null;t.startAt&&(m=function(I){const S=!!I.before,j=I.values||[];return new dc(j,S)}(t.startAt));let _=null;return t.endAt&&(_=function(I){const S=!I.before,j=I.values||[];return new dc(j,S)}(t.endAt)),fC(e,o,h,l,p,"F",m,_)}function QC(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Rv(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=wo(t.unaryFilter.field);return _t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(t.unaryFilter.field);return _t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wo(t.unaryFilter.field);return _t.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=wo(t.unaryFilter.field);return _t.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}(r):r.fieldFilter!==void 0?function(t){return _t.create(wo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Zn.create(t.compositeFilter.filters.map(i=>Rv(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re()}}(t.compositeFilter.op))}(r):Re()}function YC(r){return bC[r]}function XC(r){return MC[r]}function JC(r){return FC[r]}function Eo(r){return{fieldPath:r.canonicalString()}}function wo(r){return Bt.fromServerFormat(r.fieldPath)}function Av(r){return r instanceof _t?function(t){if(t.op==="=="){if(iy(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NAN"}};if(ry(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(iy(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NOT_NAN"}};if(ry(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eo(t.field),op:XC(t.op),value:t.value}}}(r):r instanceof Zn?function(t){const i=t.getFilters().map(o=>Av(o));return i.length===1?i[0]:{compositeFilter:{op:JC(t.op),filters:i}}}(r):Re()}function ZC(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Pv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,t,i,o,l=Ae.min(),h=Ae.min(),p=zt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new Si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e){this.ht=e}}function t0(r){const e=GC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Zd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(){this.ln=new r0}addToCollectionParentIndex(e,t){return this.ln.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(ji.min())}updateCollectionGroup(e,t,i){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class r0{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new kt(tt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new kt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(41943040,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new jo(0)}static Qn(){return new jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy([r,e],[t,i]){const o=Ue(r,t);return o===0?Ue(e,i):o}class i0{constructor(e){this.Gn=e,this.buffer=new kt(vy),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();vy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class s0{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){he("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bo(t)?he("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Uo(t)}await this.Yn(3e5)})}}class o0{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return X.resolve(kc.oe);const i=new i0(t);return this.Zn.forEachTarget(e,o=>i.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>i.Hn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(_y)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_y):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,o,l,h,p,m,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,h=Date.now(),this.nthSequenceNumber(e,o))).next(I=>(i=I,p=Date.now(),this.removeTargets(e,i,t))).next(I=>(l=I,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(I=>(_=Date.now(),_o()<=be.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${l} targets in `+(m-p)+`ms
	Removed ${I} documents in `+(_-m)+`ms
Total Duration: ${_-E}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I})))}}function a0(r,e){return new o0(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(){this.changes=new xs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?X.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&Xa(i.mutation,o,In.empty(),Ct.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Me()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Me()){const o=ys();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let h=$a();return l.forEach((p,m)=>{h=h.insert(p,m.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=ys();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Me()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,p)=>{t.set(h,p)})})}computeViews(e,t,i,o){let l=Gr();const h=Ya(),p=function(){return Ya()}();return t.forEach((m,_)=>{const E=i.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof Bi)?l=l.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),Xa(E.mutation,_,E.mutation.getFieldMask(),Ct.now())):h.set(_.key,In.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((_,E)=>h.set(_,E)),t.forEach((_,E)=>{var I;return p.set(_,new u0(E,(I=h.get(_))!==null&&I!==void 0?I:null))}),p))}recalculateAndSaveOverlays(e,t){const i=Ya();let o=new at((h,p)=>h-p),l=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const p of h)p.keys().forEach(m=>{const _=t.get(m);if(_===null)return;let E=i.get(m)||In.empty();E=p.applyToLocalView(_,E),i.set(m,E);const I=(o.get(p.batchId)||Me()).add(m);o=o.insert(p.batchId,I)})}).next(()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),_=m.key,E=m.value,I=dv();E.forEach(S=>{if(!l.has(S)){const j=vv(t.get(S),i.get(S));j!==null&&I.set(S,j),l=l.add(S)}}),h.push(this.documentOverlayCache.saveOverlays(e,_,I))}return X.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return ve.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):av(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):X.resolve(ys());let p=-1,m=l;return h.next(_=>X.forEach(_,(E,I)=>(p<I.largestBatchId&&(p=I.largestBatchId),l.get(E)?X.resolve():this.remoteDocumentCache.getEntry(e,E).next(S=>{m=m.insert(E,S)}))).next(()=>this.populateOverlays(e,_,l)).next(()=>this.computeViews(e,m,_,Me())).next(E=>({batchId:p,changes:hv(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(i=>{let o=$a();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=$a();return this.indexManager.getCollectionParents(e,l).next(p=>X.forEach(p,m=>{const _=function(I,S){return new ml(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next(E=>{E.forEach((I,S)=>{h=h.insert(I,S)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(h=>{l.forEach((m,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,Qt.newInvalidDocument(E)))});let p=$a();return h.forEach((m,_)=>{const E=l.get(m);E!==void 0&&Xa(E.mutation,_,In.empty(),Ct.now()),Nc(t,_)&&(p=p.insert(m,_))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return X.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:vr(o.createTime)}}(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:t0(o.bundledQuery),readTime:vr(o.readTime)}}(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(){this.overlays=new at(ve.comparator),this.dr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ys();return X.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.Tt(e,t,l)}),X.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.dr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.dr.delete(i)),X.resolve()}getOverlaysForCollection(e,t,i){const o=ys(),l=t.length+1,h=new ve(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const m=p.getNext().value,_=m.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new at((_,E)=>_-E);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let E=l.get(_.largestBatchId);E===null&&(E=ys(),l=l.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const p=ys(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((_,E)=>p.set(_,E)),!(p.size()>=o)););return X.resolve(p)}Tt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.dr.get(o.largestBatchId).delete(i.key);this.dr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new NC(t,i));let l=this.dr.get(t);l===void 0&&(l=Me(),this.dr.set(t,l)),this.dr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this.Er=new kt(jt.Ar),this.Rr=new kt(jt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const i=new jt(e,t);this.Er=this.Er.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.gr(new jt(e,t))}pr(e,t){e.forEach(i=>this.removeReference(i,t))}yr(e){const t=new ve(new tt([])),i=new jt(t,e),o=new jt(t,e+1),l=[];return this.Rr.forEachInRange([i,o],h=>{this.gr(h),l.push(h.key)}),l}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new ve(new tt([])),i=new jt(t,e),o=new jt(t,e+1);let l=Me();return this.Rr.forEachInRange([i,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new jt(e,0),i=this.Er.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class jt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return ve.comparator(e.key,t.key)||Ue(e.br,t.br)}static Vr(e,t){return Ue(e.br,t.br)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new kt(jt.Ar)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new PC(l,t,i,o);this.mutationQueue.push(h);for(const p of o)this.vr=this.vr.add(new jt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return X.resolve(h)}lookupMutationBatch(e,t){return X.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Fr(i),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new jt(t,0),o=new jt(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([i,o],h=>{const p=this.Cr(h.br);l.push(p)}),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new kt(Ue);return t.forEach(o=>{const l=new jt(o,0),h=new jt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,h],p=>{i=i.add(p.br)})}),X.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ve.isDocumentKey(l)||(l=l.child(""));const h=new jt(new ve(l),0);let p=new kt(Ue);return this.vr.forEachWhile(m=>{const _=m.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(p=p.add(m.br)),!0)},h),X.resolve(this.Mr(p))}Mr(e){const t=[];return e.forEach(i=>{const o=this.Cr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){qe(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return X.forEach(t.mutations,o=>{const l=new jt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=i})}Bn(e){}containsKey(e,t){const i=new jt(t,0),o=this.vr.firstAfterOrEqual(i);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e){this.Nr=e,this.docs=function(){return new at(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return X.resolve(i?i.document.mutableCopy():Qt.newInvalidDocument(t))}getEntries(e,t){let i=Gr();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Qt.newInvalidDocument(o))}),X.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Gr();const h=t.path,p=new ve(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:_,value:{document:E}}=m.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||HS(qS(E),i)<=0||(o.has(E.key)||Nc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Re()}Br(e,t){return X.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new g0(this)}getSize(e){return X.resolve(this.size)}}class g0 extends l0{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(i)}),X.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e){this.persistence=e,this.Lr=new xs(t=>Rf(t),Af),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.kr=0,this.qr=new Of,this.targetCount=0,this.Qr=jo.qn()}forEachTarget(e,t){return this.Lr.forEach((i,o)=>t(o)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),X.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Un(t),X.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Lr.forEach((h,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.Lr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),X.waitFor(l).next(()=>o)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const i=this.Lr.get(t)||null;return X.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),X.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return X.resolve(i)}containsKey(e,t){return X.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t){this.Kr={},this.overlays={},this.$r=new kc(0),this.Ur=!1,this.Ur=!0,this.Wr=new f0,this.referenceDelegate=e(this),this.Gr=new y0(this),this.indexManager=new n0,this.remoteDocumentCache=function(o){return new m0(o)}(i=>this.referenceDelegate.zr(i)),this.serializer=new e0(t),this.jr=new h0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new d0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new p0(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const o=new _0(this.$r.next());return this.referenceDelegate.Hr(),i(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return X.or(Object.values(this.Kr).map(i=>()=>i.containsKey(e,t)))}}class _0 extends GS{constructor(e){super(),this.currentSequenceNumber=e}}class bf{constructor(e){this.persistence=e,this.Zr=new Of,this.Xr=null}static ei(e){return new bf(e)}get ti(){if(this.Xr)return this.Xr;throw Re()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),X.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),X.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.ti,i=>{const o=ve.fromPath(i);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Ae.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return X.or([()=>X.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class gc{constructor(e,t){this.persistence=e,this.ri=new xs(i=>XS(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=a0(this,t)}static ei(e,t){return new gc(e,t)}Hr(){}Jr(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}nr(e){let t=0;return this.er(e,i=>{t++}).next(()=>t)}er(e,t){return X.forEach(this.ri,(i,o)=>this.ir(e,i,o).next(l=>l?X.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Br(e,h=>this.ir(e,h,t).next(p=>{p||(i++,l.removeEntry(h,Ae.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),X.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),X.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zu(e.data.value)),t}ir(e,t,i){return X.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return X.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=o}static zi(e,t){let i=Me(),o=Me();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Mf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return oT()?8:QS(Xt())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Xi(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.es(e,t,o,i).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new v0;return this.ts(e,t,h).next(p=>{if(l.result=p,this.Hi)return this.ns(e,t,h,p.size)})}).next(()=>l.result)}ns(e,t,i,o){return i.documentReadCount<this.Ji?(_o()<=be.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),X.resolve()):(_o()<=be.DEBUG&&he("QueryEngine","Query:",vo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Yi*o?(_o()<=be.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(t))):X.resolve())}Xi(e,t){if(ly(t))return X.resolve(null);let i=_r(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Zd(t,null,"F"),i=_r(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const h=Me(...l);return this.Zi.getDocuments(e,h).next(p=>this.indexManager.getMinOffset(e,i).next(m=>{const _=this.rs(t,p);return this.ss(t,_,h,m.readTime)?this.Xi(e,Zd(t,null,"F")):this.os(e,_,t,m)}))})))}es(e,t,i,o){return ly(t)||o.isEqual(Ae.min())?X.resolve(null):this.Zi.getDocuments(e,i).next(l=>{const h=this.rs(t,l);return this.ss(t,h,i,o)?X.resolve(null):(_o()<=be.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vo(t)),this.os(e,h,t,$S(o,-1)).next(p=>p))})}rs(e,t){let i=new kt(uv(e));return t.forEach((o,l)=>{Nc(e,l)&&(i=i.add(l))}),i}ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,i){return _o()<=be.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",vo(t)),this.Zi.getDocumentsMatchingQuery(e,t,ji.min(),i)}os(e,t,i,o){return this.Zi.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,t,i,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new at(Ue),this.cs=new xs(l=>Rf(l),Af),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c0(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function T0(r,e,t,i){return new w0(r,e,t,i)}async function Dv(r,e){const t=Ne(r);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const h=[],p=[];let m=Me();for(const _ of o){h.push(_.batchId);for(const E of _.mutations)m=m.add(E.key)}for(const _ of l){p.push(_.batchId);for(const E of _.mutations)m=m.add(E.key)}return t.localDocuments.getDocuments(i,m).next(_=>({Ts:_,removedBatchIds:h,addedBatchIds:p}))})})}function I0(r,e){const t=Ne(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(p,m,_,E){const I=_.batch,S=I.keys();let j=X.resolve();return S.forEach(W=>{j=j.next(()=>E.getEntry(m,W)).next(V=>{const C=_.docVersions.get(W);qe(C!==null),V.version.compareTo(C)<0&&(I.applyToRemoteDocument(V,_),V.isValidDocument()&&(V.setReadTime(_.commitVersion),E.addEntry(V)))})}),j.next(()=>p.mutationQueue.removeMutationBatch(m,I))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(p){let m=Me();for(let _=0;_<p.mutationResults.length;++_)p.mutationResults[_].transformResults.length>0&&(m=m.add(p.batch.mutations[_].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function jv(r){const e=Ne(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function x0(r,e){const t=Ne(r),i=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const p=[];e.targetChanges.forEach((E,I)=>{const S=o.get(I);if(!S)return;p.push(t.Gr.removeMatchingKeys(l,E.removedDocuments,I).next(()=>t.Gr.addMatchingKeys(l,E.addedDocuments,I)));let j=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?j=j.withResumeToken(zt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):E.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(E.resumeToken,i)),o=o.insert(I,j),function(V,C,Q){return V.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(S,j,E)&&p.push(t.Gr.updateTargetData(l,j))});let m=Gr(),_=Me();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),p.push(S0(l,h,e.documentUpdates).next(E=>{m=E.Is,_=E.ds})),!i.isEqual(Ae.min())){const E=t.Gr.getLastRemoteSnapshotVersion(l).next(I=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,i));p.push(E)}return X.waitFor(p).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,_)).next(()=>m)}).then(l=>(t.us=o,l))}function S0(r,e,t){let i=Me(),o=Me();return t.forEach(l=>i=i.add(l)),e.getEntries(r,i).next(l=>{let h=Gr();return t.forEach((p,m)=>{const _=l.get(p);m.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(Ae.min())?(e.removeEntry(p,m.readTime),h=h.insert(p,m)):!_.isValidDocument()||m.version.compareTo(_.version)>0||m.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(m),h=h.insert(p,m)):he("LocalStore","Ignoring outdated watch update for ",p,". Current version:",_.version," Watch version:",m.version)}),{Is:h,ds:o}})}function C0(r,e){const t=Ne(r);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function k0(r,e){const t=Ne(r);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Gr.getTargetData(i,e).next(l=>l?(o=l,X.resolve(o)):t.Gr.allocateTargetId(i).next(h=>(o=new Si(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.us.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i})}async function sf(r,e,t){const i=Ne(r),o=i.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Bo(h))throw h;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.us=i.us.remove(e),i.cs.delete(o.target)}function Ey(r,e,t){const i=Ne(r);let o=Ae.min(),l=Me();return i.persistence.runTransaction("Execute query","readwrite",h=>function(m,_,E){const I=Ne(m),S=I.cs.get(E);return S!==void 0?X.resolve(I.us.get(S)):I.Gr.getTargetData(_,E)}(i,h,_r(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(h,p.targetId).next(m=>{l=m})}).next(()=>i._s.getDocumentsMatchingQuery(h,e,t?o:Ae.min(),t?l:Me())).next(p=>(R0(i,mC(e),p),{documents:p,Es:l})))}function R0(r,e,t){let i=r.ls.get(e)||Ae.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),r.ls.set(e,i)}class wy{constructor(){this.activeTargetIds=wC()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A0{constructor(){this._o=new wy,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new wy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku=null;function Dd(){return Ku===null?Ku=function(){return 268435456+Math.round(2147483648*Math.random())}():Ku++,"0x"+Ku.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class j0 extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,i,o,l,h){const p=Dd(),m=this.No(t,i.toUriEncodedString());he("RestConnection",`Sending RPC '${t}' ${p}:`,m,o);const _={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(_,l,h),this.Lo(t,m,_,o).then(E=>(he("RestConnection",`Received RPC '${t}' ${p}: `,E),E),E=>{throw Ro("RestConnection",`RPC '${t}' ${p} failed with error: `,E,"url: ",m,"request:",o),E})}ko(t,i,o,l,h,p){return this.Oo(t,i,o,l,h)}Bo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,h)=>t[h]=l),o&&o.headers.forEach((l,h)=>t[h]=l)}No(t,i){const o=N0[t];return`${this.Fo}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,i,o){const l=Dd();return new Promise((h,p)=>{const m=new q_;m.setWithCredentials(!0),m.listenOnce(H_.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Ju.NO_ERROR:const E=m.getResponseJson();he(Kt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case Ju.TIMEOUT:he(Kt,`RPC '${e}' ${l} timed out`),p(new me(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:const I=m.getStatus();if(he(Kt,`RPC '${e}' ${l} failed with status:`,I,"response text:",m.getResponseText()),I>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const j=S==null?void 0:S.error;if(j&&j.status&&j.message){const W=function(C){const Q=C.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(Q)>=0?Q:Z.UNKNOWN}(j.status);p(new me(W,j.message))}else p(new me(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new me(Z.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{he(Kt,`RPC '${e}' ${l} completed.`)}});const _=JSON.stringify(o);he(Kt,`RPC '${e}' ${l} sending request:`,o),m.send(t,"POST",_,i,15)})}qo(e,t,i){const o=Dd(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Q_(),p=G_(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(m.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Bo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const E=l.join("");he(Kt,`Creating RPC '${e}' stream ${o}: ${E}`,m);const I=h.createWebChannel(E,m);let S=!1,j=!1;const W=new D0({Eo:C=>{j?he(Kt,`Not sending because RPC '${e}' stream ${o} is closed:`,C):(S||(he(Kt,`Opening RPC '${e}' stream ${o} transport.`),I.open(),S=!0),he(Kt,`RPC '${e}' stream ${o} sending:`,C),I.send(C))},Ao:()=>I.close()}),V=(C,Q,G)=>{C.listen(Q,ee=>{try{G(ee)}catch(oe){setTimeout(()=>{throw oe},0)}})};return V(I,Wa.EventType.OPEN,()=>{j||(he(Kt,`RPC '${e}' stream ${o} transport opened.`),W.So())}),V(I,Wa.EventType.CLOSE,()=>{j||(j=!0,he(Kt,`RPC '${e}' stream ${o} transport closed`),W.Do())}),V(I,Wa.EventType.ERROR,C=>{j||(j=!0,Ro(Kt,`RPC '${e}' stream ${o} transport errored:`,C),W.Do(new me(Z.UNAVAILABLE,"The operation could not be completed")))}),V(I,Wa.EventType.MESSAGE,C=>{var Q;if(!j){const G=C.data[0];qe(!!G);const ee=G,oe=(ee==null?void 0:ee.error)||((Q=ee[0])===null||Q===void 0?void 0:Q.error);if(oe){he(Kt,`RPC '${e}' stream ${o} received error:`,oe);const De=oe.status;let Se=function(D){const T=yt[D];if(T!==void 0)return wv(T)}(De),b=oe.message;Se===void 0&&(Se=Z.INTERNAL,b="Unknown error status: "+De+" with message "+oe.message),j=!0,W.Do(new me(Se,b)),I.close()}else he(Kt,`RPC '${e}' stream ${o} received:`,G),W.vo(G)}}),V(p,K_.STAT_EVENT,C=>{C.stat===Kd.PROXY?he(Kt,`RPC '${e}' stream ${o} detected buffering proxy`):C.stat===Kd.NOPROXY&&he(Kt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{W.bo()},0),W}}function jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(r){return new UC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,t,i=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t,i,o,l,h,p,m){this.li=e,this.Yo=i,this.Zo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Lv(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Kr(t.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Xo===t&&this.I_(i,o)},i=>{e(()=>{const o=new me(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.d_(o)})})}I_(e,t){const i=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{i(()=>this.d_(o))}),this.stream.onMessage(o=>{i(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class L0 extends Vv{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=WC(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?vr(h.readTime):Ae.min()}(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=rf(this.serializer),t.addTarget=function(l,h){let p;const m=h.target;if(p=Xd(m)?{documents:HC(l,m)}:{query:KC(l,m).ct},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=xv(l,h.resumeToken);const _=ef(l,h.expectedCount);_!==null&&(p.expectedCount=_)}else if(h.snapshotVersion.compareTo(Ae.min())>0){p.readTime=mc(l,h.snapshotVersion.toTimestamp());const _=ef(l,h.expectedCount);_!==null&&(p.expectedCount=_)}return p}(this.serializer,e);const i=QC(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=rf(this.serializer),t.removeTarget=e,this.c_(t)}}class V0 extends Vv{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return qe(!!e.streamToken),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=qC(e.writeResults,e.commitTime),i=vr(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=rf(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>$C(this.serializer,i))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0 extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new me(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Oo(e,tf(t,i),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(Z.UNKNOWN,l.toString())})}ko(e,t,i,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,p])=>this.connection.ko(e,tf(t,i),o,h,p,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new me(Z.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class b0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Kr(t),this.C_=!1):he("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(h=>{i.enqueueAndForget(async()=>{Ss(this)&&(he("RemoteStore","Restarting streams for network reachability change."),await async function(m){const _=Ne(m);_.k_.add(4),await _l(_),_.K_.set("Unknown"),_.k_.delete(4),await Oc(_)}(this))})}),this.K_=new b0(i,o)}}async function Oc(r){if(Ss(r))for(const e of r.q_)await e(!0)}async function _l(r){for(const e of r.q_)await e(!1)}function Ov(r,e){const t=Ne(r);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),zf(t)?Bf(t):zo(t).s_()&&Uf(t,e))}function Ff(r,e){const t=Ne(r),i=zo(t);t.L_.delete(e),i.s_()&&bv(t,e),t.L_.size===0&&(i.s_()?i.a_():Ss(t)&&t.K_.set("Unknown"))}function Uf(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zo(r).V_(e)}function bv(r,e){r.U_.xe(e),zo(r).m_(e)}function Bf(r){r.U_=new OC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.L_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),zo(r).start(),r.K_.F_()}function zf(r){return Ss(r)&&!zo(r).i_()&&r.L_.size>0}function Ss(r){return Ne(r).k_.size===0}function Mv(r){r.U_=void 0}async function F0(r){r.K_.set("Online")}async function U0(r){r.L_.forEach((e,t)=>{Uf(r,e)})}async function B0(r,e){Mv(r),zf(r)?(r.K_.O_(e),Bf(r)):r.K_.set("Unknown")}async function z0(r,e,t){if(r.K_.set("Online"),e instanceof Iv&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const p of l.targetIds)o.L_.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.L_.delete(p),o.U_.removeTarget(p))}(r,e)}catch(i){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await yc(r,i)}else if(e instanceof nc?r.U_.$e(e):e instanceof Tv?r.U_.Je(e):r.U_.Ge(e),!t.isEqual(Ae.min()))try{const i=await jv(r.localStore);t.compareTo(i)>=0&&await function(l,h){const p=l.U_.it(h);return p.targetChanges.forEach((m,_)=>{if(m.resumeToken.approximateByteSize()>0){const E=l.L_.get(_);E&&l.L_.set(_,E.withResumeToken(m.resumeToken,h))}}),p.targetMismatches.forEach((m,_)=>{const E=l.L_.get(m);if(!E)return;l.L_.set(m,E.withResumeToken(zt.EMPTY_BYTE_STRING,E.snapshotVersion)),bv(l,m);const I=new Si(E.target,m,_,E.sequenceNumber);Uf(l,I)}),l.remoteSyncer.applyRemoteEvent(p)}(r,t)}catch(i){he("RemoteStore","Failed to raise snapshot:",i),await yc(r,i)}}async function yc(r,e,t){if(!Bo(e))throw e;r.k_.add(1),await _l(r),r.K_.set("Offline"),t||(t=()=>jv(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{he("RemoteStore","Retrying IndexedDB access"),await t(),r.k_.delete(1),await Oc(r)})}function Fv(r,e){return e().catch(t=>yc(r,t,e))}async function bc(r){const e=Ne(r),t=bi(e);let i=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;W0(e);)try{const o=await C0(e.localStore,i);if(o===null){e.B_.length===0&&t.a_();break}i=o.batchId,$0(e,o)}catch(o){await yc(e,o)}Uv(e)&&Bv(e)}function W0(r){return Ss(r)&&r.B_.length<10}function $0(r,e){r.B_.push(e);const t=bi(r);t.s_()&&t.f_&&t.g_(e.mutations)}function Uv(r){return Ss(r)&&!bi(r).i_()&&r.B_.length>0}function Bv(r){bi(r).start()}async function q0(r){bi(r).w_()}async function H0(r){const e=bi(r);for(const t of r.B_)e.g_(t.mutations)}async function K0(r,e,t){const i=r.B_.shift(),o=jf.from(i,e,t);await Fv(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await bc(r)}async function G0(r,e){e&&bi(r).f_&&await async function(i,o){if(function(h){return jC(h)&&h!==Z.ABORTED}(o.code)){const l=i.B_.shift();bi(i).__(),await Fv(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await bc(i)}}(r,e),Uv(r)&&Bv(r)}async function Iy(r,e){const t=Ne(r);t.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const i=Ss(t);t.k_.add(3),await _l(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Oc(t)}async function Q0(r,e){const t=Ne(r);e?(t.k_.delete(2),await Oc(t)):e||(t.k_.add(2),await _l(t),t.K_.set("Unknown"))}function zo(r){return r.W_||(r.W_=function(t,i,o){const l=Ne(t);return l.b_(),new L0(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:F0.bind(null,r),mo:U0.bind(null,r),po:B0.bind(null,r),R_:z0.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),zf(r)?Bf(r):r.K_.set("Unknown")):(await r.W_.stop(),Mv(r))})),r.W_}function bi(r){return r.G_||(r.G_=function(t,i,o){const l=Ne(t);return l.b_(),new V0(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:q0.bind(null,r),po:G0.bind(null,r),p_:H0.bind(null,r),y_:K0.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await bc(r)):(await r.G_.stop(),r.B_.length>0&&(he("RemoteStore",`Stopping write stream with ${r.B_.length} pending writes`),r.B_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,p=new Wf(e,t,h,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $f(r,e){if(Kr("AsyncQueue",`${e}: ${r}`),Bo(r))return new me(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=$a(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Co;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(){this.z_=new at(ve.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Re():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Lo{constructor(e,t,i,o,l,h,p,m,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach(p=>{h.push({type:0,doc:p})}),new Lo(e,t,Co.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class X0{constructor(){this.queries=Sy(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const o=Ne(t),l=o.queries;o.queries=Sy(),l.forEach((h,p)=>{for(const m of p.J_)m.onError(i)})})(this,new me(Z.ABORTED,"Firestore shutting down"))}}function Sy(){return new xs(r=>lv(r),Pc)}async function zv(r,e){const t=Ne(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(i=2):(l=new Y0,i=e.Z_()?0:1);try{switch(i){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=$f(h,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&qf(t)}async function Wv(r,e){const t=Ne(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.J_.indexOf(e);h>=0&&(l.J_.splice(h,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function J0(r,e){const t=Ne(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const p of h.J_)p.ta(o)&&(i=!0);h.H_=o}}i&&qf(t)}function Z0(r,e,t){const i=Ne(r),o=i.queries.get(e);if(o)for(const l of o.J_)l.onError(t);i.queries.delete(e)}function qf(r){r.X_.forEach(e=>{e.next()})}var of,Cy;(Cy=of||(of={})).na="default",Cy.Cache="cache";class $v{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Lo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==of.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e){this.key=e}}class Hv{constructor(e){this.key=e}}class ek{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Me(),this.mutatedKeys=Me(),this.Va=uv(e),this.ma=new Co(this.Va)}get fa(){return this.Ea}ga(e,t){const i=t?t.pa:new xy,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,I)=>{const S=o.get(E),j=Nc(this.query,I)?I:null,W=!!S&&this.mutatedKeys.has(S.key),V=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let C=!1;S&&j?S.data.isEqual(j.data)?W!==V&&(i.track({type:3,doc:j}),C=!0):this.ya(S,j)||(i.track({type:2,doc:j}),C=!0,(m&&this.Va(j,m)>0||_&&this.Va(j,_)<0)&&(p=!0)):!S&&j?(i.track({type:0,doc:j}),C=!0):S&&!j&&(i.track({type:1,doc:S}),C=!0,(m||_)&&(p=!0)),C&&(j?(h=h.add(j),l=V?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{ma:h,pa:i,ss:p,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((E,I)=>function(j,W){const V=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return V(j)-V(W)}(E.type,I.type)||this.Va(E.doc,I.doc)),this.wa(i),o=o!=null&&o;const p=t&&!o?this.Sa():[],m=this.Ra.size===0&&this.current&&!o?1:0,_=m!==this.Aa;return this.Aa=m,h.length!==0||_?{snapshot:new Lo(this.query,e.ma,l,h,e.mutatedKeys,m===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:p}:{ba:p}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new xy,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Me(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return e.forEach(i=>{this.Ra.has(i)||t.push(new Hv(i))}),this.Ra.forEach(i=>{e.has(i)||t.push(new qv(i))}),t}va(e){this.Ea=e.Es,this.Ra=Me();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Lo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class tk{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class nk{constructor(e){this.key=e,this.Fa=!1}}class rk{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new xs(p=>lv(p),Pc),this.Oa=new Map,this.Na=new Set,this.Ba=new at(ve.comparator),this.La=new Map,this.ka=new Of,this.qa={},this.Qa=new Map,this.Ka=jo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function ik(r,e,t=!0){const i=Jv(r);let o;const l=i.xa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await Kv(i,e,t,!0),o}async function sk(r,e){const t=Jv(r);await Kv(t,e,!0,!1)}async function Kv(r,e,t,i){const o=await k0(r.localStore,_r(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await ok(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Ov(r.remoteStore,o),p}async function ok(r,e,t,i,o){r.Ua=(I,S,j)=>async function(V,C,Q,G){let ee=C.view.ga(Q);ee.ss&&(ee=await Ey(V.localStore,C.query,!1).then(({documents:b})=>C.view.ga(b,ee)));const oe=G&&G.targetChanges.get(C.targetId),De=G&&G.targetMismatches.get(C.targetId)!=null,Se=C.view.applyChanges(ee,V.isPrimaryClient,oe,De);return Ry(V,C.targetId,Se.ba),Se.snapshot}(r,I,S,j);const l=await Ey(r.localStore,e,!0),h=new ek(e,l.Es),p=h.ga(l.documents),m=yl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),_=h.applyChanges(p,r.isPrimaryClient,m);Ry(r,t,_.ba);const E=new tk(e,t,h);return r.xa.set(e,E),r.Oa.has(t)?r.Oa.get(t).push(e):r.Oa.set(t,[e]),_.snapshot}async function ak(r,e,t){const i=Ne(r),o=i.xa.get(e),l=i.Oa.get(o.targetId);if(l.length>1)return i.Oa.set(o.targetId,l.filter(h=>!Pc(h,e))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await sf(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Ff(i.remoteStore,o.targetId),af(i,o.targetId)}).catch(Uo)):(af(i,o.targetId),await sf(i.localStore,o.targetId,!0))}async function lk(r,e){const t=Ne(r),i=t.xa.get(e),o=t.Oa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ff(t.remoteStore,i.targetId))}async function uk(r,e,t){const i=gk(r);try{const o=await function(h,p){const m=Ne(h),_=Ct.now(),E=p.reduce((j,W)=>j.add(W.key),Me());let I,S;return m.persistence.runTransaction("Locally write mutations","readwrite",j=>{let W=Gr(),V=Me();return m.hs.getEntries(j,E).next(C=>{W=C,W.forEach((Q,G)=>{G.isValidDocument()||(V=V.add(Q))})}).next(()=>m.localDocuments.getOverlayedDocuments(j,W)).next(C=>{I=C;const Q=[];for(const G of p){const ee=RC(G,I.get(G.key).overlayedDocument);ee!=null&&Q.push(new Bi(G.key,ee,ev(ee.value.mapValue),Vn.exists(!0)))}return m.mutationQueue.addMutationBatch(j,_,Q,p)}).next(C=>{S=C;const Q=C.applyToLocalDocumentSet(I,V);return m.documentOverlayCache.saveOverlays(j,C.batchId,Q)})}).then(()=>({batchId:S.batchId,changes:hv(I)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,p,m){let _=h.qa[h.currentUser.toKey()];_||(_=new at(Ue)),_=_.insert(p,m),h.qa[h.currentUser.toKey()]=_}(i,o.batchId,t),await vl(i,o.changes),await bc(i.remoteStore)}catch(o){const l=$f(o,"Failed to persist write");t.reject(l)}}async function Gv(r,e){const t=Ne(r);try{const i=await x0(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.La.get(l);h&&(qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Fa=!0:o.modifiedDocuments.size>0?qe(h.Fa):o.removedDocuments.size>0&&(qe(h.Fa),h.Fa=!1))}),await vl(t,i,e)}catch(i){await Uo(i)}}function ky(r,e,t){const i=Ne(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.xa.forEach((l,h)=>{const p=h.view.ea(e);p.snapshot&&o.push(p.snapshot)}),function(h,p){const m=Ne(h);m.onlineState=p;let _=!1;m.queries.forEach((E,I)=>{for(const S of I.J_)S.ea(p)&&(_=!0)}),_&&qf(m)}(i.eventManager,e),o.length&&i.Ma.R_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ck(r,e,t){const i=Ne(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.La.get(e),l=o&&o.key;if(l){let h=new at(ve.comparator);h=h.insert(l,Qt.newNoDocument(l,Ae.min()));const p=Me().add(l),m=new Lc(Ae.min(),new Map,new at(Ue),h,p);await Gv(i,m),i.Ba=i.Ba.remove(l),i.La.delete(e),Hf(i)}else await sf(i.localStore,e,!1).then(()=>af(i,e,t)).catch(Uo)}async function hk(r,e){const t=Ne(r),i=e.batch.batchId;try{const o=await I0(t.localStore,e);Yv(t,i,null),Qv(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await vl(t,o)}catch(o){await Uo(o)}}async function dk(r,e,t){const i=Ne(r);try{const o=await function(h,p){const m=Ne(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return m.mutationQueue.lookupMutationBatch(_,p).next(I=>(qe(I!==null),E=I.keys(),m.mutationQueue.removeMutationBatch(_,I))).next(()=>m.mutationQueue.performConsistencyCheck(_)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(_,E,p)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>m.localDocuments.getDocuments(_,E))})}(i.localStore,e);Yv(i,e,t),Qv(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await vl(i,o)}catch(o){await Uo(o)}}function Qv(r,e){(r.Qa.get(e)||[]).forEach(t=>{t.resolve()}),r.Qa.delete(e)}function Yv(r,e,t){const i=Ne(r);let o=i.qa[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.qa[i.currentUser.toKey()]=o}}function af(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Oa.get(e))r.xa.delete(i),t&&r.Ma.Wa(i,t);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(i=>{r.ka.containsKey(i)||Xv(r,i)})}function Xv(r,e){r.Na.delete(e.path.canonicalString());const t=r.Ba.get(e);t!==null&&(Ff(r.remoteStore,t),r.Ba=r.Ba.remove(e),r.La.delete(t),Hf(r))}function Ry(r,e,t){for(const i of t)i instanceof qv?(r.ka.addReference(i.key,e),fk(r,i)):i instanceof Hv?(he("SyncEngine","Document no longer in limbo: "+i.key),r.ka.removeReference(i.key,e),r.ka.containsKey(i.key)||Xv(r,i.key)):Re()}function fk(r,e){const t=e.key,i=t.path.canonicalString();r.Ba.get(t)||r.Na.has(i)||(he("SyncEngine","New document in limbo: "+t),r.Na.add(i),Hf(r))}function Hf(r){for(;r.Na.size>0&&r.Ba.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const t=new ve(tt.fromString(e)),i=r.Ka.next();r.La.set(i,new nk(t)),r.Ba=r.Ba.insert(t,i),Ov(r.remoteStore,new Si(_r(Pf(t.path)),i,"TargetPurposeLimboResolution",kc.oe))}}async function vl(r,e,t){const i=Ne(r),o=[],l=[],h=[];i.xa.isEmpty()||(i.xa.forEach((p,m)=>{h.push(i.Ua(m,e,t).then(_=>{var E;if((_||t)&&i.isPrimaryClient){const I=_?!_.fromCache:(E=t==null?void 0:t.targetChanges.get(m.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(m.targetId,I?"current":"not-current")}if(_){o.push(_);const I=Mf.zi(m.targetId,_);l.push(I)}}))}),await Promise.all(h),i.Ma.R_(o),await async function(m,_){const E=Ne(m);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>X.forEach(_,S=>X.forEach(S.Wi,j=>E.persistence.referenceDelegate.addReference(I,S.targetId,j)).next(()=>X.forEach(S.Gi,j=>E.persistence.referenceDelegate.removeReference(I,S.targetId,j)))))}catch(I){if(!Bo(I))throw I;he("LocalStore","Failed to update sequence numbers: "+I)}for(const I of _){const S=I.targetId;if(!I.fromCache){const j=E.us.get(S),W=j.snapshotVersion,V=j.withLastLimboFreeSnapshotVersion(W);E.us=E.us.insert(S,V)}}}(i.localStore,l))}async function pk(r,e){const t=Ne(r);if(!t.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const i=await Dv(t.localStore,e);t.currentUser=e,function(l,h){l.Qa.forEach(p=>{p.forEach(m=>{m.reject(new me(Z.CANCELLED,h))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await vl(t,i.Ts)}}function mk(r,e){const t=Ne(r),i=t.La.get(e);if(i&&i.Fa)return Me().add(i.key);{let o=Me();const l=t.Oa.get(e);if(!l)return o;for(const h of l){const p=t.xa.get(h);o=o.unionWith(p.view.fa)}return o}}function Jv(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ck.bind(null,e),e.Ma.R_=J0.bind(null,e.eventManager),e.Ma.Wa=Z0.bind(null,e.eventManager),e}function gk(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dk.bind(null,e),e}class _c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return T0(this.persistence,new E0,e.initialUser,this.serializer)}ja(e){return new Nv(bf.ei,this.serializer)}za(e){return new A0}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_c.provider={build:()=>new _c};class yk extends _c{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){qe(this.persistence.referenceDelegate instanceof gc);const i=this.persistence.referenceDelegate.garbageCollector;return new s0(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new Nv(i=>gc.ei(i,t),this.serializer)}}class lf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ky(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=pk.bind(null,this.syncEngine),await Q0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new X0}()}createDatastore(e){const t=Vc(e.databaseInfo.databaseId),i=function(l){return new j0(l)}(e.databaseInfo);return function(l,h,p,m){return new O0(l,h,p,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,h,p){return new M0(i,o,l,h,p)}(this.localStore,this.datastore,e.asyncQueue,t=>ky(this.syncEngine,t,0),function(){return Ty.p()?new Ty:new P0}())}createSyncEngine(e,t){return function(o,l,h,p,m,_,E){const I=new rk(o,l,h,p,m,_);return E&&(I.$a=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ne(o);he("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await _l(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}lf.provider={build:()=>new lf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Gt.UNAUTHENTICATED,this.clientId=X_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async h=>{he("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(he("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=$f(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Ld(r,e){r.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener(async o=>{i.isEqual(o)||(await Dv(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Ay(r,e){r.asyncQueue.verifyOperationInProgress();const t=await vk(r);he("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(i=>Iy(e.remoteStore,i)),r.setAppCheckTokenChangeListener((i,o)=>Iy(e.remoteStore,o)),r._onlineComponents=e}async function vk(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ld(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Ro("Error using user provided cache. Falling back to memory cache: "+t),await Ld(r,new _c)}}else he("FirestoreClient","Using default OfflineComponentProvider"),await Ld(r,new yk(void 0));return r._offlineComponents}async function eE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),await Ay(r,r._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),await Ay(r,new lf))),r._onlineComponents}function Ek(r){return eE(r).then(e=>e.syncEngine)}async function tE(r){const e=await eE(r),t=e.eventManager;return t.onListen=ik.bind(null,e.syncEngine),t.onUnlisten=ak.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lk.bind(null,e.syncEngine),t}function wk(r,e,t={}){const i=new Wr;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,p,m,_){const E=new Zv({next:S=>{E.eu(),h.enqueueAndForget(()=>Wv(l,I));const j=S.docs.has(p);!j&&S.fromCache?_.reject(new me(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&S.fromCache&&m&&m.source==="server"?_.reject(new me(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),I=new $v(Pf(p.path),E,{includeMetadataChanges:!0,ua:!0});return zv(l,I)}(await tE(r),r.asyncQueue,e,t,i)),i.promise}function Tk(r,e,t={}){const i=new Wr;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,p,m,_){const E=new Zv({next:S=>{E.eu(),h.enqueueAndForget(()=>Wv(l,I)),S.fromCache&&m.source==="server"?_.reject(new me(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),I=new $v(p,E,{includeMetadataChanges:!0,ua:!0});return zv(l,I)}(await tE(r),r.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(r,e,t){if(!t)throw new me(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Ik(r,e,t,i){if(e===!0&&i===!0)throw new me(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ny(r){if(!ve.isDocumentKey(r))throw new me(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Dy(r){if(ve.isDocumentKey(r))throw new me(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Mc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Re()}function er(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new me(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Mc(r);throw new me(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new me(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new me(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ik("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new me(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new me(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new me(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jy(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new VS;switch(i.type){case"firstParty":return new FS(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new me(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Py.get(t);i&&(he("ComponentProvider","Removing Datastore"),Py.delete(t),i.terminate())}(this),Promise.resolve()}}function xk(r,e,t,i={}){var o;const l=(r=er(r,Fc))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),i.mockUserToken){let p,m;if(typeof i.mockUserToken=="string")p=i.mockUserToken,m=Gt.MOCK_USER;else{p=Zw(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new me(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Gt(_)}r._authCredentials=new OS(new Y_(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Wo(this.firestore,e,this._query)}}class nn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}}class Di extends Wo{constructor(e,t,i){super(e,t,Pf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new ve(e))}withConverter(e){return new Di(this.firestore,e,this._path)}}function Yt(r,e,...t){if(r=Lt(r),rE("collection","path",e),r instanceof Fc){const i=tt.fromString(e,...t);return Dy(i),new Di(r,null,i)}{if(!(r instanceof nn||r instanceof Di))throw new me(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(tt.fromString(e,...t));return Dy(i),new Di(r.firestore,null,i)}}function Oe(r,e,...t){if(r=Lt(r),arguments.length===1&&(e=X_.newId()),rE("doc","path",e),r instanceof Fc){const i=tt.fromString(e,...t);return Ny(i),new nn(r,null,new ve(i))}{if(!(r instanceof nn||r instanceof Di))throw new me(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(tt.fromString(e,...t));return Ny(i),new nn(r.firestore,r instanceof Di?r.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Lv(this,"async_queue_retry"),this.fu=()=>{const i=jd();i&&he("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=jd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=jd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new Wr;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Bo(e))throw e;he("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(i=>{this.Au=i,this.Ru=!1;const o=function(h){let p=h.message||"";return h.stack&&(p=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),p}(i);throw Kr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=Wf.createAndSchedule(this,e,t,i,l=>this.Su(l));return this.Eu.push(o),o}pu(){this.Au&&Re()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}class Cs extends Fc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Ly,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ly(e),this._firestoreClient=void 0,await e}}}function Sk(r,e){const t=typeof r=="object"?r:i_(),i=typeof r=="string"?r:"(default)",o=mf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Xw("firestore");l&&xk(o,...l)}return o}function Kf(r){if(r._terminated)throw new me(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Ck(r),r._firestoreClient}function Ck(r){var e,t,i;const o=r._freezeSettings(),l=function(p,m,_,E){return new eC(p,m,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,nE(E.experimentalLongPollingOptions),E.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new _k(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(p){const m=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(m),_online:m}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vo(zt.fromBase64String(e))}catch(t){throw new me(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vo(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=/^__.*__$/;class Rk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms):new gl(e,this.data,t,this.fieldTransforms)}}class iE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Bc{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Bc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Bu(e),o}Lu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return vc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(sE(this.Mu)&&kk.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Ak{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Vc(e)}$u(e,t,i,o=!1){return new Bc({Mu:e,methodName:t,Ku:i,path:Bt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zc(r){const e=r._freezeSettings(),t=Vc(r._databaseId);return new Ak(r._databaseId,!!e.ignoreUndefinedProperties,t)}function oE(r,e,t,i,o,l={}){const h=r.$u(l.merge||l.mergeFields?2:0,e,t,o);Jf("Data must be an object, but it was:",h,i);const p=aE(i,h);let m,_;if(l.merge)m=new In(h.fieldMask),_=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const I of l.mergeFields){const S=uf(e,I,t);if(!h.contains(S))throw new me(Z.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);uE(E,S)||E.push(S)}m=new In(E),_=h.fieldTransforms.filter(I=>m.covers(I.field))}else m=null,_=h.fieldTransforms;return new Rk(new mn(p),m,_)}class wl extends El{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wl}}function Pk(r,e,t){return new Bc({Mu:3,Ku:e.settings.Ku,methodName:r._methodName,Nu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Yf extends El{_toFieldTransform(e){return new _v(e.path,new sl)}isEqual(e){return e instanceof Yf}}class Xf extends El{constructor(e,t){super(e),this.Uu=t}_toFieldTransform(e){const t=Pk(this,e,!0),i=this.Uu.map(l=>$o(l,t)),o=new Do(i);return new _v(e.path,o)}isEqual(e){return e instanceof Xf&&Ja(this.Uu,e.Uu)}}function Nk(r,e,t,i){const o=r.$u(1,e,t);Jf("Data must be an object, but it was:",o,i);const l=[],h=mn.empty();Ui(i,(m,_)=>{const E=Zf(e,m,t);_=Lt(_);const I=o.Lu(E);if(_ instanceof wl)l.push(E);else{const S=$o(_,I);S!=null&&(l.push(E),h.set(E,S))}});const p=new In(l);return new iE(h,p,o.fieldTransforms)}function Dk(r,e,t,i,o,l){const h=r.$u(1,e,t),p=[uf(e,i,t)],m=[o];if(l.length%2!=0)throw new me(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)p.push(uf(e,l[S])),m.push(l[S+1]);const _=[],E=mn.empty();for(let S=p.length-1;S>=0;--S)if(!uE(_,p[S])){const j=p[S];let W=m[S];W=Lt(W);const V=h.Lu(j);if(W instanceof wl)_.push(j);else{const C=$o(W,V);C!=null&&(_.push(j),E.set(j,C))}}const I=new In(_);return new iE(E,I,h.fieldTransforms)}function jk(r,e,t,i=!1){return $o(t,r.$u(i?4:3,e))}function $o(r,e){if(lE(r=Lt(r)))return Jf("Unsupported field value:",e,r),aE(r,e);if(r instanceof El)return function(i,o){if(!sE(o.Mu))throw o.qu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(i,o){const l=[];let h=0;for(const p of i){let m=$o(p,o.ku(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}}(r,e)}return function(i,o){if((i=Lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return TC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ct.fromDate(i);return{timestampValue:mc(o.serializer,l)}}if(i instanceof Ct){const l=new Ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mc(o.serializer,l)}}if(i instanceof Gf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Vo)return{bytesValue:xv(o.serializer,i._byteString)};if(i instanceof nn){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Vf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Qf)return function(h,p){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(m=>{if(typeof m!="number")throw p.qu("VectorValues must only contain numeric values.");return Nf(p.serializer,m)})}}}}}}(i,o);throw o.qu(`Unsupported field value: ${Mc(i)}`)}(r,e)}function aE(r,e){const t={};return J_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(r,(i,o)=>{const l=$o(o,e.Ou(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function lE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ct||r instanceof Gf||r instanceof Vo||r instanceof nn||r instanceof El||r instanceof Qf)}function Jf(r,e,t){if(!lE(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Mc(t);throw i==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+i)}}function uf(r,e,t){if((e=Lt(e))instanceof Uc)return e._internalPath;if(typeof e=="string")return Zf(r,e);throw vc("Field path arguments must be of type string or ",r,!1,void 0,t)}const Lk=new RegExp("[~\\*/\\[\\]]");function Zf(r,e,t){if(e.search(Lk)>=0)throw vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Uc(...e.split("."))._internalPath}catch{throw vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function vc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${i}`),h&&(m+=` in document ${o}`),m+=")"),new me(Z.INVALID_ARGUMENT,p+r+m)}function uE(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Vk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ep("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Vk extends cE{data(){return super.data()}}function ep(r,e){return typeof e=="string"?Zf(r,e):e instanceof Uc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new me(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tp{}class bk extends tp{}function Tl(r,e,...t){let i=[];e instanceof tp&&i.push(e),i=i.concat(t),function(l){const h=l.filter(m=>m instanceof np).length,p=l.filter(m=>m instanceof Wc).length;if(h>1||h>0&&p>0)throw new me(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)r=o._apply(r);return r}class Wc extends bk{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Wc(e,t,i)}_apply(e){const t=this._parse(e);return hE(e._query,t),new Wo(e.firestore,e.converter,Jd(e._query,t))}_parse(e){const t=zc(e.firestore);return function(l,h,p,m,_,E,I){let S;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new me(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Oy(I,E);const j=[];for(const W of I)j.push(Vy(m,l,W));S={arrayValue:{values:j}}}else S=Vy(m,l,I)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Oy(I,E),S=jk(p,h,I,E==="in"||E==="not-in");return _t.create(_,E,S)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Il(r,e,t){const i=e,o=ep("where",r);return Wc._create(o,i,t)}class np extends tp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new np(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Zn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let h=o;const p=l.getFlattenedFilters();for(const m of p)hE(h,m),h=Jd(h,m)}(e._query,t),new Wo(e.firestore,e.converter,Jd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Vy(r,e,t){if(typeof(t=Lt(t))=="string"){if(t==="")throw new me(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!av(e)&&t.indexOf("/")!==-1)throw new me(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(tt.fromString(t));if(!ve.isDocumentKey(i))throw new me(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ny(r,new ve(i))}if(t instanceof nn)return ny(r,t._key);throw new me(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mc(t)}.`)}function Oy(r,e){if(!Array.isArray(r)||r.length===0)throw new me(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hE(r,e){const t=function(o,l){for(const h of o)for(const p of h.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new me(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Mk{convertValue(e,t="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ui(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>ft(h.doubleValue));return new Qf(l)}convertGeoPoint(e){return new Gf(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Ac(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(nl(e));default:return null}}convertTimestamp(e){const t=Li(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=tt.fromString(e);qe(Pv(i));const o=new rl(i.get(1),i.get(3)),l=new ve(i.popFirst(5));return o.isEqual(t)||Kr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fE extends cE{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ep("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class rc extends fE{data(e={}){return super.data(e)}}class Fk{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ha(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new rc(this._firestore,this._userDataWriter,i.key,i,new Ha(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(p=>{const m=new rc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ha(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(p=>l||p.type!==3).map(p=>{const m=new rc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ha(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return p.type!==0&&(_=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),E=h.indexOf(p.doc.key)),{type:Uk(p.type),doc:m,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Uk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(r){r=er(r,nn);const e=er(r.firestore,Cs);return wk(Kf(e),r._key).then(t=>zk(e,r,t))}class pE extends Mk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}function On(r){r=er(r,Wo);const e=er(r.firestore,Cs),t=Kf(e),i=new pE(e);return Ok(r._query),Tk(t,r._query).then(o=>new Fk(e,i,r,o))}function $r(r,e,t){r=er(r,nn);const i=er(r.firestore,Cs),o=dE(r.converter,e,t);return qc(i,[oE(zc(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Vn.none())])}function $c(r,e,t,...i){r=er(r,nn);const o=er(r.firestore,Cs),l=zc(o);let h;return h=typeof(e=Lt(e))=="string"||e instanceof Uc?Dk(l,"updateDoc",r._key,e,t,i):Nk(l,"updateDoc",r._key,e),qc(o,[h.toMutation(r._key,Vn.exists(!0))])}function by(r){return qc(er(r.firestore,Cs),[new Df(r._key,Vn.none())])}function Bk(r,e){const t=er(r.firestore,Cs),i=Oe(r),o=dE(r.converter,e);return qc(t,[oE(zc(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,Vn.exists(!1))]).then(()=>i)}function qc(r,e){return function(i,o){const l=new Wr;return i.asyncQueue.enqueueAndForget(async()=>uk(await Ek(i),o,l)),l.promise}(Kf(r),e)}function zk(r,e,t){const i=t.docs.get(e._key),o=new pE(r);return new fE(r,o,e._key,i,new Ha(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(){return new wl("deleteField")}function rp(){return new Yf("serverTimestamp")}function $k(...r){return new Xf("arrayUnion",r)}(function(e,t=!0){(function(o){Fo=o})(bo),ko(new vs("firestore",(i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),p=new Cs(new bS(i.getProvider("auth-internal")),new BS(i.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new me(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rl(_.options.projectId,E)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p},"PUBLIC").setMultipleInstances(!0)),Pi(Yg,"4.7.6",e),Pi(Yg,"4.7.6","esm2017")})();const qk={apiKey:"AIzaSyBIMdYfUrnEf3J7fXtWYWjcdfqd1t4bb2g",authDomain:"trueform-b27c0.firebaseapp.com",projectId:"trueform-b27c0",storageBucket:"trueform-b27c0.firebasestorage.app",messagingSenderId:"100618470487",appId:"1:100618470487:web:a74625ad2b522b34988f12",measurementId:"G-8900F43SG0"},mE=r_(qk),tr=Cc(mE),Ie=Sk(mE),gE=F.createContext(null),Hk=({children:r})=>{const[e,t]=F.useState(JSON.parse(localStorage.getItem("authUser"))||null),[i,o]=F.useState(!0);return F.useEffect(()=>{const l=Ix(tr,async h=>{if(h){const p=Oe(Ie,"Trainers",h.uid);if((await lt(p)).exists()){const _={...h,role:"Trainer"};t(_),localStorage.setItem("authUser",JSON.stringify(_))}else{const _=Oe(Ie,"Clients",h.uid);if((await lt(_)).exists()){const I={...h,role:"Client"};t(I),localStorage.setItem("authUser",JSON.stringify(I))}else await Ic(tr),t(null),localStorage.removeItem("authUser")}}else t(null),localStorage.removeItem("authUser");o(!1)});return()=>l()},[]),d.jsx(gE.Provider,{value:{user:e,loading:i},children:r})},wr=()=>F.useContext(gE);Gy();/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function al(){return al=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},al.apply(this,arguments)}var Ci;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ci||(Ci={}));const My="popstate";function Kk(r){r===void 0&&(r={});function e(i,o){let{pathname:l,search:h,hash:p}=i.location;return cf("",{pathname:l,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:_E(o)}return Qk(e,t,null,r)}function vt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function yE(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Gk(){return Math.random().toString(36).substr(2,8)}function Fy(r,e){return{usr:r.state,key:r.key,idx:e}}function cf(r,e,t,i){return t===void 0&&(t=null),al({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?qo(e):e,{state:t,key:e&&e.key||i||Gk()})}function _E(r){let{pathname:e="/",search:t="",hash:i=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function qo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substr(i),r=r.substr(0,i)),r&&(e.pathname=r)}return e}function Qk(r,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,p=Ci.Pop,m=null,_=E();_==null&&(_=0,h.replaceState(al({},h.state,{idx:_}),""));function E(){return(h.state||{idx:null}).idx}function I(){p=Ci.Pop;let C=E(),Q=C==null?null:C-_;_=C,m&&m({action:p,location:V.location,delta:Q})}function S(C,Q){p=Ci.Push;let G=cf(V.location,C,Q);_=E()+1;let ee=Fy(G,_),oe=V.createHref(G);try{h.pushState(ee,"",oe)}catch(De){if(De instanceof DOMException&&De.name==="DataCloneError")throw De;o.location.assign(oe)}l&&m&&m({action:p,location:V.location,delta:1})}function j(C,Q){p=Ci.Replace;let G=cf(V.location,C,Q);_=E();let ee=Fy(G,_),oe=V.createHref(G);h.replaceState(ee,"",oe),l&&m&&m({action:p,location:V.location,delta:0})}function W(C){let Q=o.location.origin!=="null"?o.location.origin:o.location.href,G=typeof C=="string"?C:_E(C);return G=G.replace(/ $/,"%20"),vt(Q,"No window.location.(origin|href) available to create URL for href: "+G),new URL(G,Q)}let V={get action(){return p},get location(){return r(o,h)},listen(C){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(My,I),m=C,()=>{o.removeEventListener(My,I),m=null}},createHref(C){return e(o,C)},createURL:W,encodeLocation(C){let Q=W(C);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:S,replace:j,go(C){return h.go(C)}};return V}var Uy;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Uy||(Uy={}));function Yk(r,e,t){return t===void 0&&(t="/"),Xk(r,e,t)}function Xk(r,e,t,i){let o=typeof e=="string"?qo(e):e,l=wE(o.pathname||"/",t);if(l==null)return null;let h=vE(r);Jk(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let _=cR(l);p=aR(h[m],_)}return p}function vE(r,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,h,p)=>{let m={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};m.relativePath.startsWith("/")&&(vt(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let _=_s([i,m.relativePath]),E=t.concat(m);l.children&&l.children.length>0&&(vt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_+'".')),vE(l.children,e,E,_)),!(l.path==null&&!l.index)&&e.push({path:_,score:sR(_,l.index),routesMeta:E})};return r.forEach((l,h)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,h);else for(let m of EE(l.path))o(l,h,m)}),e}function EE(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=EE(i.join("/")),p=[];return p.push(...h.map(m=>m===""?l:[l,m].join("/"))),o&&p.push(...h),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function Jk(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:oR(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const Zk=/^:[\w-]+$/,eR=3,tR=2,nR=1,rR=10,iR=-2,By=r=>r==="*";function sR(r,e){let t=r.split("/"),i=t.length;return t.some(By)&&(i+=iR),e&&(i+=tR),t.filter(o=>!By(o)).reduce((o,l)=>o+(Zk.test(l)?eR:l===""?nR:rR),i)}function oR(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function aR(r,e,t){let{routesMeta:i}=r,o={},l="/",h=[];for(let p=0;p<i.length;++p){let m=i[p],_=p===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",I=lR({path:m.relativePath,caseSensitive:m.caseSensitive,end:_},E),S=m.route;if(!I)return null;Object.assign(o,I.params),h.push({params:o,pathname:_s([l,I.pathname]),pathnameBase:pR(_s([l,I.pathnameBase])),route:S}),I.pathnameBase!=="/"&&(l=_s([l,I.pathnameBase]))}return h}function lR(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=uR(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((_,E,I)=>{let{paramName:S,isOptional:j}=E;if(S==="*"){let V=p[I]||"";h=l.slice(0,l.length-V.length).replace(/(.)\/+$/,"$1")}const W=p[I];return j&&!W?_[S]=void 0:_[S]=(W||"").replace(/%2F/g,"/"),_},{}),pathname:l,pathnameBase:h,pattern:r}}function uR(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),yE(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(i.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function cR(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yE(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function wE(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}function hR(r,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?qo(r):r;return{pathname:t?t.startsWith("/")?t:dR(t,e):e,search:mR(i),hash:gR(o)}}function dR(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Vd(r,e,t,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fR(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function TE(r,e){let t=fR(r);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function IE(r,e,t,i){i===void 0&&(i=!1);let o;typeof r=="string"?o=qo(r):(o=al({},r),vt(!o.pathname||!o.pathname.includes("?"),Vd("?","pathname","search",o)),vt(!o.pathname||!o.pathname.includes("#"),Vd("#","pathname","hash",o)),vt(!o.search||!o.search.includes("#"),Vd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,p;if(h==null)p=t;else{let I=e.length-1;if(!i&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),I-=1;o.pathname=S.join("/")}p=I>=0?e[I]:"/"}let m=hR(o,p),_=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(_||E)&&(m.pathname+="/"),m}const _s=r=>r.join("/").replace(/\/\/+/g,"/"),pR=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),mR=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,gR=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function yR(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const xE=["post","put","patch","delete"];new Set(xE);const _R=["get",...xE];new Set(_R);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},ll.apply(this,arguments)}const ip=F.createContext(null),vR=F.createContext(null),xl=F.createContext(null),Hc=F.createContext(null),zi=F.createContext({outlet:null,matches:[],isDataRoute:!1}),SE=F.createContext(null);function Sl(){return F.useContext(Hc)!=null}function xn(){return Sl()||vt(!1),F.useContext(Hc).location}function CE(r){F.useContext(xl).static||F.useLayoutEffect(r)}function ut(){let{isDataRoute:r}=F.useContext(zi);return r?jR():ER()}function ER(){Sl()||vt(!1);let r=F.useContext(ip),{basename:e,future:t,navigator:i}=F.useContext(xl),{matches:o}=F.useContext(zi),{pathname:l}=xn(),h=JSON.stringify(TE(o,t.v7_relativeSplatPath)),p=F.useRef(!1);return CE(()=>{p.current=!0}),F.useCallback(function(_,E){if(E===void 0&&(E={}),!p.current)return;if(typeof _=="number"){i.go(_);return}let I=IE(_,JSON.parse(h),l,E.relative==="path");r==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:_s([e,I.pathname])),(E.replace?i.replace:i.push)(I,E.state,E)},[e,i,h,l,r])}function wR(){let{matches:r}=F.useContext(zi),e=r[r.length-1];return e?e.params:{}}function TR(r,e){return IR(r,e)}function IR(r,e,t,i){Sl()||vt(!1);let{navigator:o,static:l}=F.useContext(xl),{matches:h}=F.useContext(zi),p=h[h.length-1],m=p?p.params:{};p&&p.pathname;let _=p?p.pathnameBase:"/";p&&p.route;let E=xn(),I;if(e){var S;let Q=typeof e=="string"?qo(e):e;_==="/"||(S=Q.pathname)!=null&&S.startsWith(_)||vt(!1),I=Q}else I=E;let j=I.pathname||"/",W=j;if(_!=="/"){let Q=_.replace(/^\//,"").split("/");W="/"+j.replace(/^\//,"").split("/").slice(Q.length).join("/")}let V=Yk(r,{pathname:W}),C=RR(V&&V.map(Q=>Object.assign({},Q,{params:Object.assign({},m,Q.params),pathname:_s([_,o.encodeLocation?o.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?_:_s([_,o.encodeLocation?o.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),h,t,i);return e&&C?F.createElement(Hc.Provider,{value:{location:ll({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:Ci.Pop}},C):C}function xR(){let r=DR(),e=yR(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:o},t):null,null)}const SR=F.createElement(xR,null);class CR extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?F.createElement(zi.Provider,{value:this.props.routeContext},F.createElement(SE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kR(r){let{routeContext:e,match:t,children:i}=r,o=F.useContext(ip);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),F.createElement(zi.Provider,{value:e},i)}function RR(r,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,p=(o=t)==null?void 0:o.errors;if(p!=null){let E=h.findIndex(I=>I.route.id&&(p==null?void 0:p[I.route.id])!==void 0);E>=0||vt(!1),h=h.slice(0,Math.min(h.length,E+1))}let m=!1,_=-1;if(t&&i&&i.v7_partialHydration)for(let E=0;E<h.length;E++){let I=h[E];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(_=E),I.route.id){let{loaderData:S,errors:j}=t,W=I.route.loader&&S[I.route.id]===void 0&&(!j||j[I.route.id]===void 0);if(I.route.lazy||W){m=!0,_>=0?h=h.slice(0,_+1):h=[h[0]];break}}}return h.reduceRight((E,I,S)=>{let j,W=!1,V=null,C=null;t&&(j=p&&I.route.id?p[I.route.id]:void 0,V=I.route.errorElement||SR,m&&(_<0&&S===0?(LR("route-fallback"),W=!0,C=null):_===S&&(W=!0,C=I.route.hydrateFallbackElement||null)));let Q=e.concat(h.slice(0,S+1)),G=()=>{let ee;return j?ee=V:W?ee=C:I.route.Component?ee=F.createElement(I.route.Component,null):I.route.element?ee=I.route.element:ee=E,F.createElement(kR,{match:I,routeContext:{outlet:E,matches:Q,isDataRoute:t!=null},children:ee})};return t&&(I.route.ErrorBoundary||I.route.errorElement||S===0)?F.createElement(CR,{location:t.location,revalidation:t.revalidation,component:V,error:j,children:G(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):G()},null)}var kE=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(kE||{}),Ec=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Ec||{});function AR(r){let e=F.useContext(ip);return e||vt(!1),e}function PR(r){let e=F.useContext(vR);return e||vt(!1),e}function NR(r){let e=F.useContext(zi);return e||vt(!1),e}function RE(r){let e=NR(),t=e.matches[e.matches.length-1];return t.route.id||vt(!1),t.route.id}function DR(){var r;let e=F.useContext(SE),t=PR(Ec.UseRouteError),i=RE(Ec.UseRouteError);return e!==void 0?e:(r=t.errors)==null?void 0:r[i]}function jR(){let{router:r}=AR(kE.UseNavigateStable),e=RE(Ec.UseNavigateStable),t=F.useRef(!1);return CE(()=>{t.current=!0}),F.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,ll({fromRouteId:e},l)))},[r,e])}const zy={};function LR(r,e,t){zy[r]||(zy[r]=!0)}function VR(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function Od(r){let{to:e,replace:t,state:i,relative:o}=r;Sl()||vt(!1);let{future:l,static:h}=F.useContext(xl),{matches:p}=F.useContext(zi),{pathname:m}=xn(),_=ut(),E=IE(e,TE(p,l.v7_relativeSplatPath),m,o==="path"),I=JSON.stringify(E);return F.useEffect(()=>_(JSON.parse(I),{replace:t,state:i,relative:o}),[_,I,o,t,i]),null}function Ye(r){vt(!1)}function OR(r){let{basename:e="/",children:t=null,location:i,navigationType:o=Ci.Pop,navigator:l,static:h=!1,future:p}=r;Sl()&&vt(!1);let m=e.replace(/^\/*/,"/"),_=F.useMemo(()=>({basename:m,navigator:l,static:h,future:ll({v7_relativeSplatPath:!1},p)}),[m,p,l,h]);typeof i=="string"&&(i=qo(i));let{pathname:E="/",search:I="",hash:S="",state:j=null,key:W="default"}=i,V=F.useMemo(()=>{let C=wE(E,m);return C==null?null:{location:{pathname:C,search:I,hash:S,state:j,key:W},navigationType:o}},[m,E,I,S,j,W,o]);return V==null?null:F.createElement(xl.Provider,{value:_},F.createElement(Hc.Provider,{children:t,value:V}))}function bR(r){let{children:e,location:t}=r;return TR(hf(e),t)}new Promise(()=>{});function hf(r,e){e===void 0&&(e=[]);let t=[];return F.Children.forEach(r,(i,o)=>{if(!F.isValidElement(i))return;let l=[...e,o];if(i.type===F.Fragment){t.push.apply(t,hf(i.props.children,l));return}i.type!==Ye&&vt(!1),!i.props.index||!i.props.children||vt(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=hf(i.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const MR="6";try{window.__reactRouterVersion=MR}catch{}const FR="startTransition",Wy=Mw[FR];function UR(r){let{basename:e,children:t,future:i,window:o}=r,l=F.useRef();l.current==null&&(l.current=Kk({window:o,v5Compat:!0}));let h=l.current,[p,m]=F.useState({action:h.action,location:h.location}),{v7_startTransition:_}=i||{},E=F.useCallback(I=>{_&&Wy?Wy(()=>m(I)):m(I)},[m,_]);return F.useLayoutEffect(()=>h.listen(E),[h,E]),F.useEffect(()=>VR(i),[i]),F.createElement(OR,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:h,future:i})}var $y;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})($y||($y={}));var qy;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(qy||(qy={}));const ki=({href:r,onClick:e,children:t,bgColor:i="#b3c7f9",textColor:o="black",hoverColor:l="#8f9fc7"})=>!!r?d.jsx("a",{href:r,className:"blue-button",style:{backgroundColor:i,color:o,"--hover-bg":l},children:t}):d.jsx("button",{className:"blue-button",onClick:e,style:{backgroundColor:i,color:o,"--hover-bg":l},children:t}),BR=()=>{const[r,e]=F.useState(""),[t,i]=F.useState(""),[o,l]=F.useState(""),[h,p]=F.useState([]),[m,_]=F.useState(""),[E,I]=F.useState(""),S=ut();F.useEffect(()=>{(async()=>{try{const C=Yt(Ie,"Trainers"),G=(await On(C)).docs.map(ee=>({uid:ee.id,name:ee.data().name}));p(G)}catch(C){console.error("Error fetching trainers:",C)}})()},[]);const j=V=>{_(V);const C=h.find(Q=>Q.uid===V);I(C?C.name:"")},W=async()=>{try{if(!m){alert("Please select a trainer.");return}const C=(await D_(tr,t,o)).user;await $r(Oe(Ie,"Clients",C.uid),{name:r,email:t,uid:C.uid,trainer_uid:m,trainer_name:E});const Q=Oe(Ie,"Trainers",m);await $c(Q,{clients:$k(C.uid)}),S("/client-dashboard")}catch(V){console.error("Sign Up Error:",V.message)}};return d.jsx("div",{className:"SignIn",children:d.jsxs("div",{className:"sign_in_container",children:[d.jsx("h2",{children:"Register as a Client"}),d.jsx("input",{type:"text",placeholder:"Full Name",value:r,onChange:V=>e(V.target.value)}),d.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:V=>i(V.target.value)}),d.jsx("input",{type:"password",placeholder:"Password",value:o,onChange:V=>l(V.target.value)}),d.jsxs("select",{value:m,onChange:V=>j(V.target.value),children:[d.jsx("option",{value:"",children:"Select Your Trainer"}),h.map(V=>d.jsx("option",{value:V.uid,children:V.name},V.uid))]}),d.jsx(ki,{onClick:W,bgColor:"#FF6B8B",textColor:"white",hoverColor:"#8f9fc7",children:"Sign Up"}),d.jsxs("p",{children:["Already have an account?"," ",d.jsx("a",{href:"/client-signin",style:{color:"black"},children:"Sign in"})]})]})})},zR=()=>{const[r,e]=F.useState(""),[t,i]=F.useState(""),[o,l]=F.useState(""),[h,p]=F.useState(""),m=ut(),_=async()=>{try{const I=(await D_(tr,t,o)).user;await $r(Oe(Ie,"Trainers",I.uid),{name:r,email:t,uid:I.uid,clients:[]}),m("/")}catch(E){console.error("Sign Up Error:",E.message)}};return d.jsx("div",{className:"SignIn",children:d.jsxs("div",{className:"sign_in_container",children:[d.jsx("h2",{children:"Register as a Trainer"}),d.jsx("input",{type:"text",placeholder:"Full Name",value:r,onChange:E=>e(E.target.value)}),d.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:E=>i(E.target.value)}),d.jsx("input",{type:"password",placeholder:"Password",value:o,onChange:E=>l(E.target.value)}),d.jsx("input",{type:"text",placeholder:"City",value:h,onChange:E=>p(E.target.value)}),d.jsx(ki,{onClick:_,bgColor:"#FF6B8B",textColor:"white",hoverColor:"#8f9fc7",children:"Sign Up"}),d.jsxs("p",{children:["Already have an account?",d.jsx("a",{href:"/trainer-signin",style:{color:"black"},children:"Sign in"})]})]})})},WR=()=>{const[r,e]=F.useState(""),[t,i]=F.useState(""),[o,l]=F.useState(""),h=ut(),p=async()=>{try{const _=(await j_(tr,r,t)).user,E=Oe(Ie,"Clients",_.uid);(await lt(E)).exists()?h("/client-homepage"):(l("Access Denied: This account is not registered as a Client."),await tr.signOut())}catch(m){console.error("Sign In Error:",m.message),l("Invalid email or password.")}};return d.jsx("div",{className:"SignIn",children:d.jsxs("div",{className:"sign_in_container",children:[d.jsx("h2",{children:"Sign In as a Client"}),o&&d.jsx("p",{style:{color:"red"},children:o}),d.jsx("input",{type:"email",placeholder:"Email",value:r,onChange:m=>e(m.target.value)}),d.jsx("input",{type:"password",placeholder:"Password",value:t,onChange:m=>i(m.target.value)}),d.jsx(ki,{onClick:p,bgColor:"#FF6B8B",textColor:"white",hoverColor:"#8f9fc7",children:"Sign In"})," ",d.jsxs("p",{children:["Don't have an account?"," ",d.jsx("a",{href:"/trainer-reg",style:{color:"black"},children:"Register"})," "]})]})})},$R=()=>{const[r,e]=F.useState(""),[t,i]=F.useState(""),[o,l]=F.useState(""),h=ut(),p=async()=>{try{const _=(await j_(tr,r,t)).user,E=Oe(Ie,"Trainers",_.uid);(await lt(E)).exists()?h("/trainer-homepage"):(l("Access Denied: This account is not registered as a Trainer."),await tr.signOut())}catch(m){console.error("Sign In Error:",m.message),l("Invalid email or password.")}};return d.jsx("div",{className:"SignIn",children:d.jsxs("div",{className:"sign_in_container",children:[d.jsx("h2",{children:"Sign In as a Trainer"}),o&&d.jsx("p",{style:{color:"red"},children:o}),d.jsx("input",{type:"email",placeholder:"Email",value:r,onChange:m=>e(m.target.value)}),d.jsx("input",{type:"password",placeholder:"Password",value:t,onChange:m=>i(m.target.value)}),d.jsx(ki,{onClick:p,bgColor:"#FF6B8B",textColor:"white",hoverColor:"#8f9fc7",children:"Sign In"}),d.jsxs("p",{children:["Don't have an account?"," ",d.jsx("a",{href:"/trainer-reg",style:{color:"black"},children:"Register"})]})]})})},Hy=()=>d.jsx("div",{className:"AuthButton",children:d.jsxs("div",{className:"auth_button_container",children:[d.jsxs("div",{className:"client_auth",children:[d.jsx("p",{children:"CLIENT"}),d.jsx(ki,{href:"/client-signin",bgColor:"#e6607d",textColor:"black",hoverColor:"#8f9fc7",children:"Sign In as Client"}),d.jsx(ki,{href:"/client-reg",bgColor:"#e6607d",textColor:"black",hoverColor:"#8f9fc7",children:"Sign Up Client"})]}),d.jsxs("div",{className:"trainer_auth",children:[d.jsx("p",{children:"TRAINER"}),d.jsx(ki,{href:"/trainer-signin",bgColor:"#a1b3e0",textColor:"black",hoverColor:"#8f9fc7",children:"Sign In as Trainer"}),d.jsx(ki,{href:"/trainer-reg",bgColor:"#a1b3e0",textColor:"black",hoverColor:"#8f9fc7",children:"Sign Up Trainer"})]}),d.jsx("br",{}),d.jsx("br",{})]})}),gt=({element:r,trainerOnly:e=!1,clientOnly:t=!1})=>{const{user:i,loading:o}=wr(),[l,h]=F.useState(null),[p,m]=F.useState(null);return F.useEffect(()=>{(e||t)&&(async()=>{if(!i){h(!1),m(!1);return}const E=JSON.parse(localStorage.getItem("authUser"));if(E!=null&&E.role){h(E.role==="Trainer"),m(E.role==="Client");return}try{const I=Oe(Ie,"Trainers",i.uid);if((await lt(I)).exists()){h(!0),m(!1),localStorage.setItem("authUser",JSON.stringify({...i,role:"Trainer"}));return}const j=Oe(Ie,"Clients",i.uid);if((await lt(j)).exists()){h(!1),m(!0),localStorage.setItem("authUser",JSON.stringify({...i,role:"Client"}));return}h(!1),m(!1)}catch(I){console.error("Error checking user role:",I),h(!1),m(!1)}})()},[i,e,t]),o||(e||t)&&l===null&&p===null?d.jsx("p",{children:"Loading..."}):i?e&&!l?d.jsx(Od,{to:"/trainer-signin"}):t&&!p?d.jsx(Od,{to:"/client-signin"}):r:d.jsx(Od,{to:"/"})},qR=()=>{const{user:r}=wr(),e=ut(),[t,i]=F.useState(null),[o,l]=F.useState(!1);F.useEffect(()=>{(async()=>{if(!r){l(!0);return}const _=JSON.parse(localStorage.getItem("authUser"));if(_!=null&&_.role){i(_.role),l(!0);return}try{let E=null;const I=Oe(Ie,"Trainers",r.uid);(await lt(I)).exists()&&(E="Trainer");const j=Oe(Ie,"Clients",r.uid);(await lt(j)).exists()&&(E="Client"),E&&(localStorage.setItem("authUser",JSON.stringify({...r,role:E})),i(E)),l(!0)}catch(E){console.error("Error checking user role:",E),l(!0)}})()},[r]);const h=()=>{e(t==="Trainer"?"/trainer-homepage":t==="Client"?"/client-homepage":"/")},p=async()=>{await Ic(tr),localStorage.removeItem("authUser"),e("/")};return d.jsx("div",{className:"NavBar",children:o?d.jsxs("div",{className:"nav_bar_container",children:[d.jsx("p",{onClick:h,style:{cursor:"pointer"},children:"Home"}),d.jsx("p",{id:"logo",children:"VitalStrength"}),d.jsx("p",{onClick:p,style:{cursor:"pointer"},children:"Sign out"})]}):d.jsx("p",{children:"Loading..."})})},pr=({onClick:r,children:e})=>d.jsx("button",{className:"homepage-button",onClick:r,children:e}),HR=()=>{const r=async()=>{await Ic(tr),localStorage.removeItem("authUser"),t("/")},{user:e}=wr(),t=ut(),[i,o]=F.useState(null),[l,h]=F.useState(!0);return F.useEffect(()=>{if(!e||!e.uid)return;(async()=>{try{console.log(` Fetching profile for client UID: ${e.uid}`);const m=Oe(Ie,"Trainers",e.uid),_=await lt(m);_.exists()?o(_.data()):console.error(" No client profile found.")}catch(m){console.error(" Error fetching client profile:",m)}finally{h(!1)}})()},[e]),l?d.jsx("div",{children:"Loading..."}):d.jsx("div",{className:"ClientHomePage",children:d.jsxs("div",{className:"client_homepage_container",children:[d.jsxs("p",{children:["Hi ",(i==null?void 0:i.name)||"Trainer"]}),d.jsxs("div",{className:"homepage_buttons",children:[d.jsx(pr,{onClick:()=>t("/all-clients"),children:"View Clients"}),d.jsx(pr,{onClick:()=>t("/add-exercise"),children:"Add Exercise to Database"}),d.jsx(pr,{onClick:()=>t("/template"),children:"Create Template Workout"}),d.jsx(pr,{onClick:()=>t("/exercise-database"),children:"View Exercise Database"}),d.jsx(pr,{onClick:()=>t("/profile"),children:"View Profile"}),d.jsx(pr,{onClick:r,children:"Sign Out"})," "]})]})})};function KR(){const[r,e]=F.useState(""),[t,i]=F.useState(""),[o,l]=F.useState(""),[h,p]=F.useState(""),[m,_]=F.useState(""),E=async I=>{I.preventDefault();let S=o.trim();S&&!/^https?:\/\//i.test(S)&&!/^www\./i.test(S)&&(S=`https://${S}`);try{await Bk(Yt(Ie,"ExerciseDatabase"),{name:r,cues:t,videoDemo:S,otherNotes:h}),e(""),i(""),l(""),p(""),_("Exercise added successfully!")}catch(j){console.error("Error adding exercise:",j),_("Error adding exercise.")}};return d.jsx("div",{className:"AddExercise",children:d.jsxs("div",{className:"add_exercise_container",children:[d.jsx("h2",{children:"Add Exercise"}),m&&d.jsx("p",{children:m}),d.jsxs("form",{onSubmit:E,children:[d.jsx("input",{type:"text",placeholder:"Exercise Name",value:r,onChange:I=>e(I.target.value),required:!0,className:"input_field"}),d.jsx("br",{}),d.jsx("textarea",{placeholder:"Cues",value:t,onChange:I=>i(I.target.value),required:!0,className:"input_field"}),d.jsx("br",{}),d.jsx("input",{type:"text",placeholder:"Video Demo URL",value:o,onChange:I=>l(I.target.value),className:"input_field"}),d.jsx("br",{}),d.jsx("textarea",{placeholder:"Other Notes",value:h,onChange:I=>p(I.target.value),className:"input_field"}),d.jsx("br",{}),d.jsx("button",{type:"submit",id:"button",children:"Add Exercise"})]})]})})}function GR(){const[r,e]=F.useState([]),[t,i]=F.useState(!0),o=ut();return F.useEffect(()=>{(async()=>{try{const p=(await On(Yt(Ie,"ExerciseDatabase"))).docs.map(m=>({id:m.id,...m.data()})).sort((m,_)=>m.name.localeCompare(_.name));e(p)}catch(h){console.error("Error fetching exercises:",h)}finally{i(!1)}})()},[]),d.jsxs("div",{className:"ExerciseDatabase",children:[d.jsx("div",{className:"exercise_database_container"}),d.jsx("h2",{children:"Exercise Database"}),t?d.jsx("p",{children:"Loading exercises..."}):null,r.length===0&&!t?d.jsx("p",{children:"No exercises found."}):null,d.jsx("ul",{children:r.map(l=>d.jsxs("li",{className:"exercise_container",children:[d.jsx("h3",{children:l.name}),d.jsxs("p",{children:[d.jsx("strong",{children:"Cues:"})," ",l.cues]}),l.videoDemo&&d.jsxs("p",{children:[d.jsx("strong",{children:"Video Demo:"})," ",d.jsx("a",{href:l.videoDemo,target:"_blank",rel:"noopener noreferrer",children:"Watch Video"})]}),l.otherNotes&&d.jsxs("p",{children:[d.jsx("strong",{children:"Other Notes:"})," ",l.otherNotes]}),d.jsx("button",{onClick:()=>o(`/edit-exercise/${l.id}`),id:"button",children:"Edit"}),d.jsx("hr",{})]},l.id))})]})}function QR(){const{exerciseId:r}=wR(),e=ut(),[t,i]=F.useState({name:"",cues:"",videoDemo:"",otherNotes:""}),[o,l]=F.useState(!0);F.useEffect(()=>{(async()=>{try{const _=Oe(Ie,"ExerciseDatabase",r),E=await lt(_);E.exists()?i(E.data()):console.error("Exercise not found")}catch(_){console.error("Error fetching exercise:",_)}finally{l(!1)}})()},[r]);const h=m=>{i({...t,[m.target.name]:m.target.value})},p=async m=>{m.preventDefault();try{const _=Oe(Ie,"ExerciseDatabase",r);await $c(_,{name:t.name,cues:t.cues,videoDemo:t.videoDemo,otherNotes:t.otherNotes}),e("/exercise-database")}catch(_){console.error("Error updating exercise:",_)}};return d.jsxs("div",{children:[d.jsx("h2",{children:"Edit Exercise"}),o?d.jsx("p",{children:"Loading exercise..."}):null,!o&&d.jsxs("form",{onSubmit:p,children:[d.jsx("input",{type:"text",name:"name",placeholder:"Exercise Name",value:t.name,onChange:h,required:!0}),d.jsx("br",{}),d.jsx("textarea",{name:"cues",placeholder:"Cues",value:t.cues,onChange:h,required:!0}),d.jsx("br",{}),d.jsx("input",{type:"text",name:"videoDemo",placeholder:"Video Demo URL",value:t.videoDemo,onChange:h}),d.jsx("br",{}),d.jsx("textarea",{name:"otherNotes",placeholder:"Other Notes",value:t.otherNotes,onChange:h}),d.jsx("br",{}),d.jsx("button",{type:"submit",children:"Update Exercise"})]})]})}const YR=()=>{const{user:r}=wr(),[e,t]=F.useState(null),[i,o]=F.useState(!0);return F.useEffect(()=>{(async()=>{if(r)try{const h=Oe(Ie,"Trainers",r.uid),p=await lt(h);if(p.exists())t({...p.data(),role:"Trainer"});else{const m=Oe(Ie,"Clients",r.uid),_=await lt(m);_.exists()&&t({..._.data(),role:"Client"})}}catch(h){console.error("Error fetching profile:",h)}finally{o(!1)}})()},[r]),i?d.jsx("p",{children:"Loading..."}):e?d.jsxs("div",{className:"client-profile-container",children:[d.jsx("h2",{children:"Profile"}),d.jsxs("p",{children:[d.jsx("strong",{children:"Name:"})," ",e.name]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Email:"})," ",e.email]}),e.role==="Trainer"&&d.jsxs("div",{children:[d.jsx("h3",{children:"Trainer Info"}),d.jsxs("p",{children:[d.jsx("strong",{children:"Clients:"})," ",e.clients?e.clients.length:0]})]}),e.role==="Client"&&d.jsxs("div",{children:[d.jsx("h3",{children:"Client Info"}),d.jsxs("p",{children:[d.jsx("strong",{children:"Trainer:"})," ",e.trainer?e.trainer:"No trainer assigned"]})]})]}):d.jsx("p",{children:"Profile not found."})},XR=()=>{const{user:r}=wr(),e=ut(),[t,i]=F.useState([]),[o,l]=F.useState(!0);return F.useEffect(()=>{if(!r||!r.uid)return;(async()=>{try{console.log(` Fetching clients for trainer UID: ${r.uid}`);const p=Tl(Yt(Ie,"Clients"),Il("trainer_uid","==",r.uid)),_=(await On(p)).docs.map(E=>({id:E.id,...E.data()}));console.log(" Clients found:",_),i(_)}catch(p){console.error(" Error fetching clients:",p)}finally{l(!1)}})()},[r]),d.jsx("div",{className:"ViewAllClients",children:d.jsxs("div",{className:"view_all_container",children:[d.jsx("h2",{children:"Your Clients"}),o&&d.jsx("p",{children:"Loading clients..."}),!o&&t.length===0&&d.jsx("p",{children:"No clients assigned to you."}),d.jsx("ul",{children:t.map(h=>d.jsxs("li",{className:"client_container",onClick:()=>e("/client-profile",{state:{client:h}}),children:[d.jsx("h3",{children:h.name}),d.jsxs("p",{children:[d.jsx("strong",{children:"Email:"})," ",h.email]})]},h.id))})]})})},JR=()=>{var E;const r=xn(),e=ut(),t=(E=r.state)==null?void 0:E.client,[i,o]=F.useState([]),[l,h]=F.useState(!0),p=7;F.useEffect(()=>{t||(console.error(" No client data found. Redirecting..."),e("/all-clients"))},[t,e]),F.useEffect(()=>{if(!t)return;(async()=>{try{console.log(` Fetching workouts for client UID: ${t.uid}`);const S=Tl(Yt(Ie,"CurrentWorkoutDetails"),Il("client_uid","==",t.uid)),W=(await On(S)).docs.map(V=>({id:V.id,...V.data()}));console.log(" Workouts found:",W),o(W)}catch(S){console.error(" Error fetching workouts:",S)}finally{h(!1)}})()},[t]);const m=()=>{if(i.length>=p){alert(`Maximum of ${p} workouts reached. Please delete a workout to add another.`);return}e("/create-workout",{state:{client_uid:t.uid}})},_=async(I,S)=>{try{await by(Oe(Ie,"CurrentWorkoutDetails",I)),await by(Oe(Ie,"CurrentWorkoutExercises",S)),o(j=>j.filter(W=>W.id!==I)),console.log(" Workout deleted from Firestore:",I)}catch(j){console.error(" Error deleting workout:",j)}};return t?d.jsx("div",{className:"ViewIndClient",children:d.jsxs("div",{className:"view_ind_client_container",children:[d.jsxs("h2",{children:["Workouts for ",t.name]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Email:"})," ",t.email]}),d.jsxs("div",{className:"action_buttons",children:[d.jsx("button",{onClick:m,id:"button",children:"Add Workout"}),d.jsx("button",{onClick:()=>e("/past-workouts",{state:{client:t}}),id:"button",children:"View Past Workouts"})]}),l&&d.jsx("p",{children:"Loading workouts..."}),!l&&i.length===0&&d.jsx("p",{children:"No workouts assigned to this client."}),d.jsx("ul",{children:i.map(I=>d.jsxs("li",{className:"ind_client_container",onClick:()=>e("/workout-details",{state:{exercise_doc_id:I.exercise_doc_id}}),children:[d.jsx("h3",{children:I.workout_name}),d.jsxs("p",{children:[d.jsx("strong",{children:"Notes:"})," ",I.notes]}),d.jsx("button",{onClick:()=>_(I.id,I.exercise_doc_id),children:" Delete Workout"}),d.jsx("hr",{})]},I.id))})]})}):null},ZR=()=>{var I;const r=xn(),e=ut(),t=(I=r.state)==null?void 0:I.exercise_doc_id,[i,o]=F.useState([]),[l,h]=F.useState(!0);if(F.useEffect(()=>{t||(console.error(" No exercise_doc_id found. Redirecting..."),e("/all-clients"))},[t,e]),F.useEffect(()=>{if(!t)return;(async()=>{try{console.log(` Fetching exercise details for doc ID: ${t}`);const j=Oe(Ie,"CurrentWorkoutExercises",t),W=await lt(j);if(W.exists()){console.log(" Exercise details found:",W.data());const V=W.data(),C=Object.entries(V).map(([Q,G])=>({name:Q,...G}));o(C)}else console.error(" No exercise found for this ID.")}catch(j){console.error(" Error fetching exercise details:",j)}finally{h(!1)}})()},[t]),!t)return null;const p={},m=i.map(S=>({...S})).sort((S,j)=>{const W=S.circuit_id?p[S.circuit_id]??S.index:S.index,V=j.circuit_id?p[j.circuit_id]??j.index:j.index;return W-V}),_=[],E=new Set;return m.forEach(S=>{S.circuit_id?E.has(S.circuit_id)||(_.push({type:"circuit",circuit_id:S.circuit_id,exercises:m.filter(j=>j.circuit_id===S.circuit_id)}),E.add(S.circuit_id)):_.push({type:"exercise",...S})}),d.jsx("div",{className:"ViewIndWorkout",children:d.jsxs("div",{className:"view_ind_workout_container",children:[d.jsx("h2",{children:"Workout Exercise Details"}),d.jsx("button",{id:"button",onClick:()=>e("/edit-workout",{state:{exercise_doc_id:t}}),children:"Edit Workout"}),l&&d.jsx("p",{children:"Loading exercise details..."}),!l&&i.length===0&&d.jsx("p",{children:"No exercise details found."}),_.map(S=>d.jsxs("div",{style:{padding:"10px",marginBottom:"10px",borderRadius:"3rem",background:"#FDF8F6"},className:"exercise_block",children:[S.type==="circuit"&&d.jsx("h3",{children:" Circuit"}),S.type==="circuit"?S.exercises.map(j=>d.jsxs("div",{style:{marginBottom:"10px"},children:[d.jsx("h3",{children:j.name}),j.videoDemo&&d.jsx("p",{children:d.jsx("a",{href:j.videoDemo,target:"_blank",rel:"noopener noreferrer",style:{color:"#213547",cursor:"pointer"},children:"Click to View Video Demo"})}),d.jsxs("p",{children:[d.jsx("strong",{children:"Sets:"})," ",j.sets," ",d.jsx("strong",{children:"Reps:"})," ",j.reps," ",d.jsx("strong",{children:"Tempo"})," ",j.tempo?j.tempo:"No Tempo"," ",d.jsx("strong",{children:"Tempo"}),j.tempoLength?j.tempoLength:"No Tempo",d.jsx("strong",{children:"Weight:"})," ",j.weight," lbs"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Cues:"})," ",j.cues]})]},j.name)):(()=>{const j=S;return d.jsxs("div",{children:[d.jsx("h3",{children:j.name}),d.jsx("strong",{children:"Notes"})," ",j.notes," ",j.videoDemo&&d.jsx("p",{children:d.jsx("a",{href:j.videoDemo,target:"_blank",rel:"noopener noreferrer",style:{color:"#213547",cursor:"pointer"},children:"Click to View Video Demo"})}),d.jsxs("p",{children:[d.jsx("strong",{children:"Sets:"})," ",j.sets," ",d.jsx("strong",{children:"Reps:"})," ",j.reps," ",d.jsx("strong",{children:"Weight:"})," ",j.weight," lbs",d.jsx("br",{}),d.jsx("strong",{children:"Tempo"})," ",j.tempo?j.tempo:"No Tempo"," ",d.jsx("strong",{children:"Tempo"})," ",j.tempoLength?j.tempoLength:"No Tempo"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Cues:"})," ",j.cues]})]},j.name)})()]},S.type==="circuit"?S.circuit_id:S.name))]})})},Ft=[];for(let r=0;r<256;++r)Ft.push((r+256).toString(16).slice(1));function eA(r,e=0){return(Ft[r[e+0]]+Ft[r[e+1]]+Ft[r[e+2]]+Ft[r[e+3]]+"-"+Ft[r[e+4]]+Ft[r[e+5]]+"-"+Ft[r[e+6]]+Ft[r[e+7]]+"-"+Ft[r[e+8]]+Ft[r[e+9]]+"-"+Ft[r[e+10]]+Ft[r[e+11]]+Ft[r[e+12]]+Ft[r[e+13]]+Ft[r[e+14]]+Ft[r[e+15]]).toLowerCase()}let bd;const tA=new Uint8Array(16);function nA(){if(!bd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");bd=crypto.getRandomValues.bind(crypto)}return bd(tA)}const rA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ky={randomUUID:rA};function Oo(r,e,t){var o;if(Ky.randomUUID&&!r)return Ky.randomUUID();r=r||{};const i=r.random??((o=r.rng)==null?void 0:o.call(r))??nA();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,eA(i)}const iA=()=>{var D;const r=xn(),e=ut(),t=(D=r.state)==null?void 0:D.exercise_doc_id,[i,o]=F.useState([]),[l,h]=F.useState(!0),[p,m]=F.useState([]),[_,E]=F.useState([]),[I,S]=F.useState(""),[j,W]=F.useState({name:"",reps:"",sets:"",weight:"",cues:"",circuit_id:null,tempo:"",tempoLength:"",notes:""}),[V,C]=F.useState([]);F.useEffect(()=>{t||(console.error(" No exercise_doc_id found. Redirecting..."),e("/all-clients"))},[t,e]),F.useEffect(()=>{if(!t)return;(async()=>{try{console.log(` Fetching exercise details for editing: ${t}`);const A=Oe(Ie,"CurrentWorkoutExercises",t),N=await lt(A);if(N.exists()){console.log(" Exercise details loaded:",N.data());const R=N.data(),Te=Object.entries(R).map(([nt,He])=>({name:nt,reps:He.reps||"",sets:He.sets||"",weight:He.weight||"",cues:He.cues||"",circuit_id:He.circuit_id||null,tempo:He.tempo||"",tempoLength:He.tempoLength||"",notes:He.notes||""}));o(Te)}else console.error(" No exercise found.")}catch(A){console.error(" Error fetching exercise details:",A)}finally{h(!1)}})()},[t]),F.useEffect(()=>{(async()=>{try{console.log(" Fetching exercise database...");const N=(await On(Yt(Ie,"ExerciseDatabase"))).docs.map(R=>({name:R.data().name,cues:R.data().cues}));m(N)}catch(A){console.error(" Error fetching exercise database:",A)}})()},[]);const Q=async()=>{try{const T={};i.forEach(N=>{T[N.name]={reps:N.reps,sets:N.sets,weight:N.weight,cues:N.cues||"",circuit_id:N.circuit_id||null,tempo:N.tempo||"",tempoLength:N.tempoLength||"",notes:N.notes||""}}),V.forEach(N=>{T[N]=Wk()});const A=Oe(Ie,"CurrentWorkoutExercises",t);await $c(A,T),console.log(" Workout updated successfully!"),e("/workout-details",{state:{exercise_doc_id:t}})}catch(T){console.error(" Error updating workout:",T)}},G=(T,A)=>{T==="name"&&E(p.filter(N=>N.name.toLowerCase().includes(A.toLowerCase())).map(N=>N.name)),W({...j,[T]:A})},ee=(T,A=null)=>{if(!T){console.error(" Cannot remove exercise because name is undefined.");return}if(console.log(` Attempting to remove exercise: ${T}, circuitId: ${A}`),!i||i.length===0){console.error(" No exercises to remove.");return}o(N=>N.filter(R=>R.name!==T||A!==null&&R.circuit_id!==A)),C(N=>[...N,T]),console.log(` Removed exercise: ${T} (circuitId: ${A})`)},oe=async T=>{E([]);const A=p.find(N=>N.name===T);if(!A){console.error(" Selected exercise not found in database.");return}W({...j,name:A.name,cues:A.cues})},De=()=>{if(!j.name||!j.reps||!j.sets||!j.weight){console.error(" Please fill in all fields.");return}if(!p.some(A=>A.name===j.name)){console.error(" Invalid exercise name. Please choose from suggestions.");return}let T={...j,circuit_id:null};if(I){const A=i.find(N=>N.name===I);A&&(T.circuit_id=A.circuit_id||Oo(),A.circuit_id=T.circuit_id)}o([...i,T]),W({name:"",reps:"",sets:"",weight:"",cues:"",circuit_id:null}),S("")},Se=[...i].sort((T,A)=>T.index-A.index),b={},k=[];return Se.forEach(T=>{T.circuit_id?(b[T.circuit_id]||(b[T.circuit_id]=[]),i.some(A=>A.name===T.name)&&b[T.circuit_id].push(T)):k.push(T)}),t?d.jsx("div",{className:"CreateWorkout",children:d.jsxs("div",{className:"create_workout_container",children:[d.jsx("h2",{children:"Edit Workout"}),l&&d.jsx("p",{children:"Loading workout details..."}),!l&&i.length===0&&d.jsx("p",{children:"No exercise details found."}),d.jsx("br",{}),i.length>0&&d.jsxs("form",{onSubmit:T=>T.preventDefault(),children:[d.jsxs("div",{className:"add_exercise_container",children:[d.jsx("h3",{children:"Add New Exercise"}),d.jsx("input",{type:"text",placeholder:"Exercise Name",className:"input_field",value:j.name,onChange:T=>G("name",T.target.value)}),d.jsx("textarea",{placeholder:"Notes",className:"input_field",value:j.notes,onChange:T=>G("notes",T.target.value)}),_.length>0&&d.jsx("ul",{children:_.map((T,A)=>d.jsx("li",{onClick:()=>oe(T),children:T},A))}),d.jsx("input",{type:"text",placeholder:"Sets",className:"input_field",onChange:T=>G("sets",T.target.value)}),d.jsx("input",{type:"text",placeholder:"Reps",className:"input_field",onChange:T=>G("reps",T.target.value)}),d.jsxs("select",{className:"input_field",value:j.tempo,onChange:T=>G("tempo",T.target.value),children:[d.jsx("option",{value:"",children:"Choose Tempo"}),d.jsx("option",{value:"none",children:"None"}),d.jsx("option",{value:"eccentric",children:"Eccentric"}),d.jsx("option",{value:"concentric",children:"Concentric"}),d.jsx("option",{value:"isometric",children:"Isometric"})]}),d.jsx("input",{type:"text",placeholder:"Tempo Length",className:"input_field",value:j.tempoLength,onChange:T=>G("tempoLength",T.target.value)}),d.jsx("input",{type:"text",placeholder:"Weight (lbs)",className:"input_field",onChange:T=>G("weight",T.target.value)}),d.jsxs("select",{className:"input_field",value:I,onChange:T=>S(T.target.value),children:[d.jsx("option",{value:"",children:"-- Link to Exercise --"}),i.map((T,A)=>d.jsx("option",{value:T.name,children:T.name},A))]}),d.jsx("button",{onClick:De,id:"button",children:"Add Exercise"})]}),[...Object.values(b),...k].map((T,A)=>Array.isArray(T)?d.jsxs("div",{className:"exercise_block",style:{padding:"10px",marginBottom:"10px",borderRadius:"3rem",background:"#FDF8F6"},children:[d.jsx("h3",{children:" Circuit"}),T.map((N,R)=>d.jsxs("div",{style:{marginBottom:"10px"},children:[d.jsx("h4",{children:N.name}),d.jsxs("p",{children:[d.jsx("strong",{children:"Sets:"})," ",N.sets]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reps:"})," ",N.reps]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo:"})," ",N.tempo]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo Length:"})," ",N.tempoLength]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Weight:"})," ",N.weight," lbs"]}),d.jsx("button",{onClick:()=>ee(N.name,N.circuit_id),children:" Remove"})]},R))]},A):d.jsxs("div",{className:"exercise_block",style:{padding:"10px",marginBottom:"10px",borderRadius:"3rem",background:"#FDF8F6"},children:[d.jsx("h4",{children:T.name}),d.jsxs("p",{children:[d.jsx("strong",{children:"Sets:"})," ",T.sets]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reps:"})," ",T.reps]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo:"})," ",T.tempo]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo Length:"})," ",T.tempoLength]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Weight:"})," ",T.weight," lbs"]}),d.jsx("button",{onClick:()=>{console.log("Clicked remove button for:",T),ee(T==null?void 0:T.name)},children:" Remove"})]},T.index)),d.jsx("button",{onClick:Q,id:"button",children:"Save Changes"})]}),d.jsx("br",{}),d.jsx("br",{})]})}):null},sA=()=>{var p;const r=xn(),e=ut(),t=(p=r.state)==null?void 0:p.client,[i,o]=F.useState([]),[l,h]=F.useState(!0);return F.useEffect(()=>{if(!t){console.error(" No client data found. Redirecting..."),e("/all-clients");return}(async()=>{try{console.log(` Fetching past workouts for client UID: ${t.uid}`);const _=Tl(Yt(Ie,"PastWorkoutDetails"),Il("uid","==",t.uid)),I=(await On(_)).docs.map(S=>({id:S.id,...S.data()}));console.log(" Past workouts found:",I),o(I)}catch(_){console.error(" Error fetching past workouts:",_)}finally{h(!1)}})()},[t,e]),t?d.jsx("div",{className:"PastWorkouts",children:d.jsxs("div",{className:"past_workout_container",children:[d.jsxs("h2",{children:["Past Workouts for ",t.name]}),l&&d.jsx("p",{children:"Loading past workouts..."}),!l&&i.length===0&&d.jsx("p",{children:"No past workouts recorded for this client."}),d.jsx("ul",{children:i.map(m=>{var W;const _=(W=m.timestamp)!=null&&W.toDate?m.timestamp.toDate():null,E=_?_.toLocaleString():"Unknown Date",I=m.duration_seconds||0,S=Math.floor(I/60),j=I%60;return d.jsxs("li",{className:"ind_past_workout",onClick:()=>e("/ind-past-workout",{state:{workoutId:m.id}}),children:[d.jsx("h3",{children:m.workout_name}),d.jsxs("p",{children:[d.jsx("strong",{children:"Date:"})," ",E]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Duration:"})," ",S," min ",j," sec"]}),d.jsx("hr",{})]},m.id)})})]})}):null},oA=()=>{var W;const r=xn(),e=ut(),t=(W=r.state)==null?void 0:W.workoutId,[i,o]=F.useState(null),[l,h]=F.useState(null),[p,m]=F.useState(!0);if(F.useEffect(()=>{if(!t)return;(async()=>{try{console.log(` Fetching workout data for ID: ${t}`);const C=await lt(Oe(Ie,"PastWorkoutDetails",t));C.exists()&&(console.log(" Workout status loaded:",C.data()),h(C.data()));const Q=await lt(Oe(Ie,"PastWorkoutExercises",t));Q.exists()?(console.log(" Workout exercises loaded:",Q.data()),o(Q.data())):console.error(" No exercises found.")}catch(C){console.error(" Error fetching workout data:",C)}finally{m(!1)}})()},[t]),p)return d.jsx("p",{children:"Loading exercises..."});if(!i)return d.jsx("p",{children:"No exercises found for this workout."});const _=()=>{e(-1)},E={},I=Object.entries(i).map(([V,C])=>({exercise:V,...C})).sort((V,C)=>{const Q=V.circuit_id?E[V.circuit_id]??V.index:V.index,G=C.circuit_id?E[C.circuit_id]??C.index:C.index;return Q-G}),S=[],j=new Set;return I.forEach(V=>{V.circuit_id?j.has(V.circuit_id)||(S.push({type:"circuit",circuit_id:V.circuit_id,exercises:I.filter(C=>C.circuit_id===V.circuit_id)}),j.add(V.circuit_id)):S.push({type:"exercise",...V})}),console.log("workoutDetails",i),d.jsx("div",{className:"ViewIndWorkout",children:d.jsxs("div",{className:"view_ind_workout_container",children:[d.jsx("h2",{children:"Past Workout Details"}),d.jsxs("div",{className:"pre-workout-status",style:{padding:"15px",marginBottom:"20px",borderRadius:"1rem",background:"#FDF8F6",gap:"10px"},children:[d.jsxs("div",{children:[d.jsx("strong",{children:"Sleep more than 6 hours?"})," ",(l==null?void 0:l.slept_6_hours)||"Not recorded"]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Feeling motivated?"})," ",(l==null?void 0:l.motivated)||"Not recorded"]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Drink enough water?"})," ",(l==null?void 0:l.hydrated)||"Not recorded"]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Eat enough?"})," ",(l==null?void 0:l.ate_enough)||"Not recorded"]})]}),S.map(V=>d.jsxs("div",{style:{padding:"10px",marginBottom:"10px",borderRadius:"3rem",background:"#FDF8F6"},className:"exercise_block",children:[V.type==="circuit"&&d.jsx("h3",{children:" Circuit"}),V.type==="circuit"?V.exercises.map(C=>d.jsxs("div",{style:{marginBottom:"10px"},children:[d.jsx("h3",{children:C.exercise}),d.jsxs("p",{children:[d.jsx("strong",{children:"Cues:"})," ",C.cues]}),C.videoDemo&&d.jsx("p",{children:d.jsx("a",{href:C.videoDemo,target:"_blank",rel:"noopener noreferrer",style:{color:"#213547",cursor:"pointer"},children:"Click to View Video Demo"})}),d.jsx("p",{children:d.jsx("strong",{children:"Planned..."})}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reps:"})," ",C.reps," ",d.jsx("strong",{children:"Sets:"})," ",C.sets,","," ",d.jsx("strong",{children:"Weight:"})," ",C.weight," lbs",d.jsx("br",{}),d.jsx("strong",{children:"Tempo"})," ",C.tempo?C.tempo:"No Tempo"," ",d.jsx("strong",{children:"Tempo Length"})," ",C.tempoLength?C.tempoLength:"No Tempo"]}),d.jsx("p",{children:d.jsx("strong",{children:"Actual Performance..."})}),C.actual_reps_per_set&&C.actual_weights_per_set?d.jsxs("table",{border:"1",cellPadding:"5",style:{borderCollapse:"collapse",width:"100%"},children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Set #"}),d.jsx("th",{children:"Actual Reps"}),d.jsx("th",{children:"Actual Weight"})]})}),d.jsx("tbody",{children:C.actual_reps_per_set.map((Q,G)=>d.jsxs("tr",{children:[d.jsx("td",{children:G+1}),d.jsx("td",{children:Q}),d.jsx("td",{children:C.actual_weights_per_set[G]})]},G))})]}):d.jsx("p",{children:"No recorded actual reps/weights."})]},C.exercise)):(()=>{const C=V;return d.jsxs("div",{children:[d.jsx("h3",{children:C.exercise}),d.jsxs("p",{children:[d.jsx("strong",{children:"Cues:"})," ",C.cues]}),C.videoDemo&&d.jsx("p",{children:d.jsx("a",{href:C.videoDemo,target:"_blank",rel:"noopener noreferrer",style:{color:"#213547",cursor:"pointer"},children:"Click to View Video Demo"})}),d.jsx("p",{children:d.jsx("strong",{children:"Planned..."})}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reps:"})," ",C.reps," ",d.jsx("strong",{children:"Sets:"})," ",C.sets,","," ",d.jsx("strong",{children:"Weight:"})," ",C.weight," lbs",d.jsx("br",{}),d.jsx("strong",{children:"Tempo"})," ",C.tempo?C.tempo:"No Tempo"," ",d.jsx("strong",{children:"Tempo Length"})," ",C.tempoLength?C.tempoLength:"No Tempo"]}),d.jsx("p",{children:d.jsx("strong",{children:"Actual Performance..."})}),C.actual_reps_per_set&&C.actual_weights_per_set?d.jsxs("table",{border:"1",cellPadding:"5",style:{borderCollapse:"collapse",width:"100%"},children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Set #"}),d.jsx("th",{children:"Actual Reps"}),d.jsx("th",{children:"Actual Weight"})]})}),d.jsx("tbody",{children:C.actual_reps_per_set.map((Q,G)=>d.jsxs("tr",{children:[d.jsx("td",{children:G+1}),d.jsx("td",{children:Q}),d.jsx("td",{children:C.actual_weights_per_set[G]})]},G))})]}):d.jsx("p",{children:"No recorded actual reps/weights."})]},C.exercise)})()]},V.type==="circuit"?V.circuit_id:V.exercise)),d.jsx("button",{onClick:_,id:"button",children:"Back"})]})})},aA=()=>{var Le;const r=xn(),e=ut(),t=(Le=r.state)==null?void 0:Le.client_uid,i=Cc(),o=i.currentUser,l=o?o.uid:null,[h,p]=F.useState(""),[m,_]=F.useState(""),[E,I]=F.useState([]),[S,j]=F.useState([]),[W,V]=F.useState([]),[C,Q]=F.useState(""),[G,ee]=F.useState(!1),[oe,De]=F.useState([]),[Se,b]=F.useState(""),[k,D]=F.useState({name:"",reps:"",sets:"",weight:"",cues:"",videoDemo:"",circuit_id:null,timestamp:"",type:"exercise",tempo:"",tempoLength:"",notes:""});if(!l){console.error(" Trainer is not logged in.");return}console.log(l),F.useEffect(()=>{(async()=>{try{console.log(" Fetching exercises from ExerciseDatabase...");const Y=(await On(Yt(Ie,"ExerciseDatabase"))).docs.map(O=>({name:O.data().name,cues:O.data().cues,type:O.data().type,videoDemo:O.data().videoDemo}));I(Y)}catch(re){console.error(" Error fetching exercises:",re)}})()},[]),F.useEffect(()=>{(async()=>{try{console.log(" Fetching template workouts...");const re=await On(Yt(Ie,"TemplateWorkoutDetails")),Y=i.currentUser;if(!Y){console.error(" No authenticated user found.");return}const O=re.docs.map(H=>({workout_name:H.data().workout_name,exercise_doc_id:H.data().exercise_doc_id,trainer_uid:H.data().trainer_uid})).filter(H=>H.trainer_uid===Y.uid);console.log(" Filtered templates:",O),De(O)}catch(re){console.error(" Error fetching templates:",re)}})()},[]);const T=(B,re)=>{if(B==="name"){const Y=E.filter(O=>O.name.toLowerCase().includes(re.toLowerCase()));j(Y),ee(Y.length===0&&re.trim()!=="")}D(Y=>({...Y,[B]:re}))},A=()=>{if(!k.name||!k.reps||!k.sets||!k.weight){console.error(" Please fill in all fields.");return}if(!E.some(Y=>Y.name===k.name)){console.error(" Invalid exercise name. Please choose from suggestions.");return}let B=W.length?Math.max(...W.map(Y=>Y.index||0))+1:1,re={...k,circuit_id:null,type:k.type,index:B,tempo:k.tempo,tempoLength:k.tempoLength,notes:k.notes};if(C){const Y=W.find(O=>O.name===C);Y&&(re.circuit_id=Y.circuit_id||Oo(),Y.circuit_id=re.circuit_id,re.index=Y.index)}V(Y=>[...Y,re].sort((O,H)=>O.index-H.index)),D({name:"",reps:"",sets:"",weight:"",cues:"",type:"",videoDemo:"",circuit_id:null,tempo:"",tempoLength:"",notes:""}),Q("")},N=(B,re=null)=>{if(!B||typeof B!="string"){console.error(" Cannot remove exercise because name is missing or invalid:",B);return}console.log(` Attempting to remove exercise: ${B}, circuitId: ${re}`),V(Y=>{const O=Y.filter(H=>re?H.name!==B||H.circuit_id!==re:H.name!==B);return console.log(" Updated exercises after removal:",O),O})},R=async()=>{const B=Oo(),re={workout_name:h,client_uid:t,notes:m,exercise_doc_id:B,trainer_uid:l,created_at:rp(),type:"exercise"},Y=W.reduce((O,H)=>(O[H.name]={reps:H.reps,sets:H.sets,weight:H.weight,cues:H.cues,videoDemo:H.videoDemo,circuit_id:H.circuit_id,type:H.type,index:H.index,tempo:H.tempo||"",tempoLength:H.tempoLength||"",notes:H.notes||""},O),{});try{await $r(Oe(Ie,"CurrentWorkoutDetails",B),re),await $r(Oe(Ie,"CurrentWorkoutExercises",B),Y),console.log(" Workout saved!"),e("/workout-details",{state:{exercise_doc_id:B}})}catch(O){console.error(" Error saving workout:",O)}};[...W].sort((B,re)=>B.index-re.index);const Te={},nt=[];W.forEach(B=>{B.circuit_id?(Te[B.circuit_id]||(Te[B.circuit_id]=[]),W.some(re=>re.name===B.name)&&Te[B.circuit_id].push(B)):nt.push(B)});const He=async B=>{if(b(B),!!B)try{console.log(` Fetching exercises for template: ${B}`);const re=Oe(Ie,"TemplateWorkoutExercises",B),Y=await lt(re);if(Y.exists()){let O=Object.entries(Y.data()).map(([de,Pe])=>({name:de,...Pe}));console.log(" Template exercises fetched:",O);let H=W.length?Math.max(...W.map(de=>de.index||0))+1:1;O=O.map(de=>({...de,index:H++})),V(de=>[...de,...O])}else console.error(" No exercises found for this template.")}catch(re){console.error(" Error fetching template exercises:",re)}};return d.jsx("div",{className:"CreateWorkout",children:d.jsxs("div",{className:"create_workout_container",children:[d.jsx("h2",{children:"Create Workout"}),d.jsx("input",{type:"text",value:h,onChange:B=>p(B.target.value),placeholder:"Workout Name",className:"input_field"}),d.jsx("textarea",{placeholder:"Add Notes",value:m,onChange:B=>_(B.target.value),className:"input_field"}),d.jsx("h3",{children:"Select a Pre Made Template"}),d.jsxs("select",{className:"input_field",value:Se,onChange:B=>He(B.target.value),style:{width:"19.6rem"},children:[d.jsx("option",{value:"",children:"Select a Template Workout"}),oe.length>0?oe.map(B=>d.jsx("option",{value:B.exercise_doc_id,children:B.workout_name},B.exercise_doc_id)):d.jsx("option",{disabled:!0,children:"No templates found"})]}),d.jsx("h3",{children:"Add Exercise"}),d.jsxs("div",{className:"add_exercise_container",children:[d.jsx("input",{type:"text",placeholder:"Search For Exercise Here",value:k.name,className:"input_field",onChange:B=>T("name",B.target.value)}),d.jsxs("select",{className:"input_field",value:k.name,onChange:B=>{const re=E.find(Y=>Y.name===B.target.value);re&&D({...k,name:re.name,cues:re.cues,videoDemo:re.videoDemo})},children:[d.jsx("option",{value:"",children:"Select Exericse Here"}),(S.length>0?S:E).map((B,re)=>d.jsx("option",{children:B.name},`${B.name}-${re}`))]}),G&&d.jsx("div",{style:{position:"fixed",top:"55vh",left:"50%",transform:"translateX(-50%)",background:"#ff4d4d",color:"white",padding:"10px 20px",borderRadius:"5px",fontSize:"14px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},children:"This exercise isn't in the database. Please add it."}),d.jsx("textarea",{placeholder:"Add Exercise Notes",value:k.notes,onChange:B=>T("notes",B.target.value),className:"input_field"}),d.jsx("input",{className:"input_field",type:"text",placeholder:"Sets",value:k.sets,onChange:B=>T("sets",B.target.value)}),d.jsx("input",{className:"input_field",type:"text",placeholder:"Reps",value:k.reps,onChange:B=>T("reps",B.target.value)}),d.jsxs("select",{className:"input_field",value:k.tempo,onChange:B=>T("tempo",B.target.value),children:[d.jsx("option",{value:"",children:"Select Tempo"}),d.jsx("option",{value:"none",children:"None"}),d.jsx("option",{value:"eccentric",children:"Eccentric"}),d.jsx("option",{value:"concentric",children:"Concentric"}),d.jsx("option",{value:"isometric",children:"Isometric"})]}),d.jsx("input",{className:"input_field",type:"text",placeholder:"Tempo Length",value:k.tempoLength,onChange:B=>T("tempoLength",B.target.value)}),d.jsx("input",{className:"input_field",type:"text",placeholder:"Weight",value:k.weight,onChange:B=>T("weight",B.target.value)}),d.jsxs("select",{className:"input_field",value:k.type,onChange:B=>T("type",B.target.value),children:[d.jsx("option",{value:"exercise",children:"Strength"}),d.jsx("option",{value:"warm up",children:"Warm Up"}),d.jsx("option",{value:"cool down",children:"Cool Down"}),d.jsx("option",{value:"cardio",children:"Cardio"})]}),d.jsxs("select",{className:"input_field",value:C,onChange:B=>Q(B.target.value),children:[d.jsx("option",{value:"",children:"Make a circuit with..."}),W.map((B,re)=>d.jsx("option",{children:B.name},`${B.name}-${re}`))]})]}),d.jsx("button",{id:"button",onClick:A,children:"Add Exercise"}),W.length>0&&d.jsxs("div",{children:[d.jsx("h3",{children:"Workout Preview"}),[...Object.values(Te),...nt].map((B,re)=>Array.isArray(B)?d.jsxs("div",{style:{padding:"10px",marginBottom:"10px",borderRadius:"3rem",background:"#FDF8F6"},className:"exercise_block",children:[d.jsx("h3",{children:" Circuit"}),B.map((Y,O)=>d.jsxs("div",{style:{marginBottom:"10px"},children:[d.jsx("h4",{children:Y.name}),d.jsxs("p",{children:[d.jsx("strong",{children:"Notes:"})," ",Y.note]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Sets:"})," ",Y.sets]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reps:"})," ",Y.reps]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo"})," ",Y.tempo]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo Length"})," ",Y.tempoLength]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Weight:"})," ",Y.weight," lbs"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Cues:"})," ",Y.cues]}),d.jsx("button",{onClick:()=>N(Y.name,Y.circuit_id),children:" Remove"})]},O))]},re):d.jsxs("div",{style:{padding:"10px",marginBottom:"10px",borderRadius:"3rem",background:"#FDF8F6"},className:"exercise_block",children:[d.jsx("h4",{children:B.name}),d.jsxs("p",{children:[d.jsx("strong",{children:"Notes:"})," ",B.note]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Sets:"})," ",B.sets]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reps:"})," ",B.reps]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo"})," ",B.tempo]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo Length"})," ",B.tempoLength]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Weight:"})," ",B.weight," lbs"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Cues:"})," ",B.cues]}),d.jsx("button",{onClick:()=>N(B.name,B.circuit_id),children:" Remove"})]},B.index))]}),d.jsx("button",{id:"button",onClick:R,children:"Save Workout"})]})})},lA=()=>{xn();const r=ut(),t=Cc().currentUser,i=t?t.uid:null,[o,l]=F.useState(""),[h,p]=F.useState(""),[m,_]=F.useState([]),[E,I]=F.useState([]),[S,j]=F.useState([]),[W,V]=F.useState(""),[C,Q]=F.useState(!1),[G,ee]=F.useState({name:"",reps:"",sets:"",weight:"",cues:"",videoDemo:"",circuit_id:null,timestamp:"",type:"exercise",tempo:"",tempoLength:"",notes:""});if(!i){console.error(" Trainer is not logged in.");return}console.log(i),F.useEffect(()=>{(async()=>{try{console.log(" Fetching exercises from ExerciseDatabase...");const N=(await On(Yt(Ie,"ExerciseDatabase"))).docs.map(R=>({name:R.data().name,cues:R.data().cues,type:R.data().type,videoDemo:R.data().videoDemo}));_(N)}catch(A){console.error(" Error fetching exercises:",A)}})()},[]);const oe=(T,A)=>{if(T==="name"){const N=m.filter(R=>R.name.toLowerCase().includes(A.toLowerCase()));I(N),Q(N.length===0&&A.trim()!=="")}ee(N=>({...N,[T]:A}))},De=()=>{if(!G.name||!G.reps||!G.sets||!G.weight){console.error(" Please fill in all fields.");return}if(!m.some(N=>N.name===G.name)){console.error(" Invalid exercise name. Please choose from suggestions.");return}let T=S.length?Math.max(...S.map(N=>N.index||0))+1:1,A={...G,circuit_id:null,type:G.type,index:T,tempo:G.tempo,tempoLength:G.tempoLength,notes:G.notes};if(W){const N=S.find(R=>R.name===W);N&&(A.circuit_id=N.circuit_id||Oo(),N.circuit_id=A.circuit_id,A.index=N.index)}j(N=>[...N,A].sort((R,Te)=>R.index-Te.index)),ee({name:"",reps:"",sets:"",weight:"",cues:"",type:"",videoDemo:"",circuit_id:null,tempo:"",tempoLength:"",notes:""}),V("")},Se=(T,A=null)=>{if(!T||typeof T!="string"){console.error(" Cannot remove exercise because name is missing or invalid:",T);return}console.log(` Attempting to remove exercise: ${T}, circuitId: ${A}`),j(N=>{const R=N.filter(Te=>A?Te.name!==T||Te.circuit_id!==A:Te.name!==T);return console.log(" Updated exercises after removal:",R),R})},b=async()=>{const T=Oo(),A={workout_name:o,notes:h,exercise_doc_id:T,trainer_uid:i,created_at:rp(),type:"exercise"},N=S.reduce((R,Te)=>(R[Te.name]={reps:Te.reps,sets:Te.sets,weight:Te.weight,cues:Te.cues,videoDemo:Te.videoDemo,circuit_id:Te.circuit_id,type:Te.type,index:Te.index,tempo:Te.tempo||"",tempoLength:Te.tempoLength||"",notes:Te.notes||""},R),{});try{await $r(Oe(Ie,"TemplateWorkoutDetails",T),A),await $r(Oe(Ie,"TemplateWorkoutExercises",T),N),console.log(" Workout saved!"),r("/trainer-homepage",{state:{exercise_doc_id:T}})}catch(R){console.error(" Error saving workout:",R)}};[...S].sort((T,A)=>T.index-A.index);const k={},D=[];return S.forEach(T=>{T.circuit_id?(k[T.circuit_id]||(k[T.circuit_id]=[]),S.some(A=>A.name===T.name)&&k[T.circuit_id].push(T)):D.push(T)}),console.log(" Updated circuit groups after removal:",k),console.log(" Updated circuit groups:",k),d.jsx("div",{className:"CreateWorkout",children:d.jsxs("div",{className:"create_workout_container",children:[d.jsx("h2",{children:"Create Workout"}),d.jsx("input",{type:"text",value:o,onChange:T=>l(T.target.value),placeholder:"Workout Name",className:"input_field"}),d.jsx("textarea",{placeholder:"Add Notes",value:h,onChange:T=>p(T.target.value),className:"input_field"}),d.jsx("h3",{children:"Add Exercise"}),d.jsxs("div",{className:"add_exercise_container",children:[d.jsx("input",{type:"text",placeholder:"Search For Exercise Here",value:G.name,className:"input_field",onChange:T=>oe("name",T.target.value)}),d.jsxs("select",{className:"input_field",value:G.name,onChange:T=>{const A=m.find(N=>N.name===T.target.value);A&&ee({...G,name:A.name,cues:A.cues,videoDemo:A.videoDemo})},children:[d.jsx("option",{value:"",children:"Select Exericse Here"}),(E.length>0?E:m).map((T,A)=>d.jsx("option",{value:T.name,children:T.name},A))]}),C&&d.jsx("div",{style:{position:"fixed",top:"55vh",left:"50%",transform:"translateX(-50%)",background:"#ff4d4d",color:"white",padding:"10px 20px",borderRadius:"5px",fontSize:"14px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},children:"This exercise isn't in the database. Please add it."}),d.jsx("textarea",{placeholder:"Add Exercise Notes",value:G.notes,onChange:T=>oe("notes",T.target.value),className:"input_field"}),d.jsx("input",{className:"input_field",type:"text",placeholder:"Sets",value:G.sets,onChange:T=>oe("sets",T.target.value)}),d.jsx("input",{className:"input_field",type:"text",placeholder:"Reps",value:G.reps,onChange:T=>oe("reps",T.target.value)}),d.jsxs("select",{className:"input_field",value:G.tempo,onChange:T=>oe("tempo",T.target.value),children:[d.jsx("option",{value:"",children:"Select Tempo"}),d.jsx("option",{value:"none",children:"None"}),d.jsx("option",{value:"eccentric",children:"Eccentric"}),d.jsx("option",{value:"concentric",children:"Concentric"}),d.jsx("option",{value:"isometric",children:"Isometric"})]}),d.jsx("input",{className:"input_field",type:"text",placeholder:"Tempo Length",value:G.tempoLength,onChange:T=>oe("tempoLength",T.target.value)}),d.jsx("input",{className:"input_field",type:"text",placeholder:"Weight",value:G.weight,onChange:T=>oe("weight",T.target.value)}),d.jsxs("select",{className:"input_field",value:G.type,onChange:T=>oe("type",T.target.value),children:[d.jsx("option",{value:"exercise",children:"Strength"}),d.jsx("option",{value:"warm up",children:"Warm Up"}),d.jsx("option",{value:"cool down",children:"Cool Down"}),d.jsx("option",{value:"cardio",children:"Cardio"})]}),d.jsxs("select",{className:"input_field",value:W,onChange:T=>V(T.target.value),children:[d.jsx("option",{value:"",children:"Make a circuit with..."}),S.map((T,A)=>d.jsx("option",{value:T.name,children:T.name},A))]})]}),d.jsx("button",{id:"button",onClick:De,children:"Add Exercise"}),S.length>0&&d.jsxs("div",{children:[d.jsx("h3",{children:"Workout Preview"}),[...Object.values(k),...D].map((T,A)=>Array.isArray(T)?d.jsxs("div",{style:{padding:"10px",marginBottom:"10px",borderRadius:"3rem",background:"#FDF8F6"},className:"exercise_block",children:[d.jsx("h3",{children:" Circuit"}),T.map((N,R)=>d.jsxs("div",{style:{marginBottom:"10px"},children:[d.jsx("h4",{children:N.name}),d.jsxs("p",{children:[d.jsx("strong",{children:"Notes:"})," ",N.note]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Sets:"})," ",N.sets]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reps:"})," ",N.reps]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo"})," ",N.tempo]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo Length"})," ",N.tempoLength]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Weight:"})," ",N.weight," lbs"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Cues:"})," ",N.cues]}),d.jsx("button",{onClick:()=>Se(N.name,N.circuit_id),children:" Remove"})]},R))]},A):d.jsxs("div",{style:{padding:"10px",marginBottom:"10px",borderRadius:"3rem",background:"#FDF8F6"},className:"exercise_block",children:[d.jsx("h4",{children:T.name}),d.jsxs("p",{children:[d.jsx("strong",{children:"Notes:"})," ",T.note]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Sets:"})," ",T.sets]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reps:"})," ",T.reps]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo"})," ",T.tempo]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo Length"})," ",T.tempoLength]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Weight:"})," ",T.weight," lbs"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Cues:"})," ",T.cues]}),d.jsx("button",{onClick:()=>Se(T.name,T.circuit_id),children:" Remove"})]},T.index))]}),d.jsx("button",{id:"button",onClick:b,children:"Save Workout"})]})})},uA=()=>{const{user:r}=wr(),e=ut(),[t,i]=F.useState(null),[o,l]=F.useState(!0);return F.useEffect(()=>{if(!r||!r.uid)return;(async()=>{try{console.log(` Fetching profile for client UID: ${r.uid}`);const p=Oe(Ie,"Clients",r.uid),m=await lt(p);m.exists()?i(m.data()):console.error(" No client profile found.")}catch(p){console.error(" Error fetching client profile:",p)}finally{l(!1)}})()},[r]),o?d.jsx("div",{children:"Loading..."}):d.jsx("div",{className:"ClientHomePage",children:d.jsxs("div",{className:"client_homepage_container",children:[d.jsxs("p",{children:["Hi ",(t==null?void 0:t.name)||"Client"]}),d.jsxs("div",{className:"homepage_buttons",children:[d.jsx(pr,{onClick:()=>e("/view-workout"),children:"View Workouts"}),d.jsx(pr,{onClick:()=>e("/client-past-workouts"),children:"View Past Workouts"}),d.jsx(pr,{onClick:()=>e("/client-view-profile"),children:"View Profile"}),d.jsx(pr,{onClick:()=>Ic(tr),children:"Sign Out"})]})]})})},cA=()=>{const{user:r}=wr(),e=ut(),[t,i]=F.useState([]),[o,l]=F.useState(!0);return F.useEffect(()=>{if(!r||!r.uid)return;(async()=>{try{console.log(` Fetching workouts for client UID: ${r.uid}`);const p=Tl(Yt(Ie,"CurrentWorkoutDetails"),Il("client_uid","==",r.uid)),_=(await On(p)).docs.map(E=>({id:E.id,...E.data()}));console.log(" Workouts found:",_),i(_)}catch(p){console.error(" Error fetching workouts:",p)}finally{l(!1)}})()},[r==null?void 0:r.uid]),r?d.jsx("div",{className:"ViewWorkout",children:d.jsxs("div",{className:"view-workouts-container",children:[d.jsx("h2",{children:"Your Workouts"}),o?d.jsx("p",{children:"Loading workouts..."}):t.length===0?d.jsx("p",{children:"You have no assigned workouts yet."}):d.jsx("ul",{children:t.map(h=>d.jsx("li",{className:"workout_container",onClick:()=>e("/single-workout",{state:{exercise_doc_id:h.exercise_doc_id,workout_name:h.workout_name,trainer:h.trainer_uid,notes:h.notes}}),children:d.jsx("h3",{children:h.workout_name})},h.id))})]})}):d.jsx("p",{children:"You must be logged in to view workouts."})},hA=()=>{var V,C,Q,G;const r=xn(),e=ut(),t=(V=r.state)==null?void 0:V.exercise_doc_id,i=(C=r.state)==null?void 0:C.workout_name,o=(Q=r.state)==null?void 0:Q.trainer,l=(G=r.state)==null?void 0:G.notes,[h,p]=F.useState(null),[m,_]=F.useState(!0);if(F.useEffect(()=>{if(!t)return;(async()=>{try{console.log(` Fetching workout details for ID: ${t}`);const oe=Oe(Ie,"CurrentWorkoutExercises",t),De=await lt(oe);De.exists()?(console.log(" Workout details loaded:",De.data()),p(De.data())):console.error(" No workout found.")}catch(oe){console.error(" Error fetching workout details:",oe)}finally{_(!1)}})()},[t]),m)return d.jsx("p",{children:"Loading workout details..."});if(!h)return d.jsx("p",{children:"Workout not found."});const E=()=>{console.log(" Navigating with workout details:",h),e("/start-workout",{state:{workoutDetails:h,workout_name:i,trainer:o,notes:l}})},I={},S=Object.entries(h).map(([ee,oe])=>({exercise:ee,...oe})).sort((ee,oe)=>{const De=ee.circuit_id?I[ee.circuit_id]??ee.index:ee.index,Se=oe.circuit_id?I[oe.circuit_id]??oe.index:oe.index;return De-Se}),j=[],W=new Set;return S.forEach(ee=>{ee.circuit_id?W.has(ee.circuit_id)||(j.push({type:"circuit",circuit_id:ee.circuit_id,exercises:S.filter(oe=>oe.circuit_id===ee.circuit_id)}),W.add(ee.circuit_id)):j.push({type:"exercise",...ee})}),console.log("notes",l),d.jsx("div",{className:"ViewIndWorkout",children:d.jsxs("div",{className:"view_ind_workout_container",children:[i&&d.jsxs("h2",{children:["Workout ",i]}),l&&d.jsxs("p",{children:[d.jsx("strong",{children:"notes from your trainer:"})," ",l]}),d.jsx("button",{onClick:E,id:"button",children:"Start Workout"}),j.map(ee=>ee.type==="circuit"?d.jsxs("div",{style:{padding:"10px",marginBottom:"10px",borderRadius:"3rem",background:"#FDF8F6"},className:"exercise_block",children:[d.jsx("h3",{children:" Circuit"}),ee.exercises.map(oe=>d.jsxs("div",{children:[d.jsx("h3",{children:oe.exercise}),oe.videoDemo&&d.jsx("p",{children:d.jsx("a",{href:oe.videoDemo,target:"_blank",rel:"noopener noreferrer",style:{color:"#213547",cursor:"pointer"},children:"Click to View Video Demo"})}),d.jsxs("p",{className:"cues",children:[d.jsx("strong",{children:"Cues:"})," ",oe.cues]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reps:"})," ",oe.reps]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Sets:"})," ",oe.sets]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Weight:"})," ",oe.weight," lbs"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo:"})," ",oe.tempo?oe.tempo:"No Tempo"," ",d.jsx("strong",{children:"Tempo Length:"})," ",oe.tempoLength?oe.tempoLength:"No Tempo"]})]},oe.exercise))]},ee.circuit_id):d.jsxs("div",{style:{padding:"10px",marginBottom:"10px",borderRadius:"3rem",background:"#FDF8F6"},className:"exercise_block",children:[d.jsx("h3",{children:ee.exercise}),ee.videoDemo&&d.jsx("p",{children:d.jsx("a",{href:ee.videoDemo,target:"_blank",rel:"noopener noreferrer",style:{color:"#213547",cursor:"pointer"},children:"Click to View Video Demo"})}),d.jsxs("p",{className:"cues",children:[d.jsx("strong",{children:"Cues:"})," ",ee.cues]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reps:"})," ",ee.reps]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Sets:"})," ",ee.sets]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Weight:"})," ",ee.weight," lbs"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Tempo:"})," ",ee.tempo?ee.tempo:"No Tempo"," ",d.jsx("strong",{children:"Tempo Length:"})," ",ee.tempoLength?ee.tempoLength:"No Tempo"]})]},ee.exercise))]})})},dA=()=>{const{user:r}=wr(),[e,t]=F.useState(null),[i,o]=F.useState(!0),[l,h]=F.useState([]),[p,m]=F.useState(""),[_,E]=F.useState(""),[I,S]=F.useState(!1);F.useEffect(()=>{if(!r||!r.uid)return;(async()=>{try{console.log(` Fetching profile for client UID: ${r.uid}`);const C=Oe(Ie,"Clients",r.uid),Q=await lt(C);if(Q.exists()){const G=Q.data();t(G),m(G.trainer||""),E(G.trainer_name||"")}else console.error(" No client profile found.")}catch(C){console.error(" Error fetching client profile:",C)}finally{o(!1)}})()},[r]),F.useEffect(()=>{(async()=>{try{console.log(" Fetching trainers...");const C=Yt(Ie,"Trainers"),G=(await On(C)).docs.map(ee=>({uid:ee.id,name:ee.data().name}));h(G)}catch(C){console.error(" Error fetching trainers:",C)}})()},[]);const j=V=>{m(V);const C=l.find(Q=>Q.uid===V);E(C?C.name:"")},W=async()=>{if(!p||p===e.trainer){alert("Please select a different trainer.");return}S(!0);try{const V=Oe(Ie,"Clients",r.uid);await $c(V,{trainer:p,trainer_name:_});const C=await lt(V);if(C.exists()){const Q=C.data();console.log(" Firestore Updated:",Q),t(Q),alert(`Trainer updated to ${Q.trainer_name}!`)}else console.error(" Update failed, no data returned.")}catch(V){console.error(" Error updating trainer:",V)}finally{S(!1)}};return i?d.jsx("p",{children:"Loading profile..."}):d.jsxs("div",{className:"client-profile-container",children:[d.jsx("h2",{children:"Profile"}),e?d.jsxs("div",{children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Name:"})," ",e.name]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Email:"})," ",e.email]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Trainer Name:"})," ",e.trainer_name||"Not Assigned"]}),d.jsx("h3",{children:"Change Trainer"}),d.jsxs("select",{value:p,onChange:V=>j(V.target.value),children:[d.jsx("option",{value:"",children:"Select a Trainer"}),l.map(V=>d.jsx("option",{value:V.uid,children:V.name},V.uid))]}),d.jsx("button",{onClick:W,disabled:I,children:I?"Updating...":"Update Trainer"})]}):d.jsx("p",{children:" Profile not found."})]})},fA=()=>{var H,de,Pe,je;const r=xn(),e=ut(),t=(H=r.state)==null?void 0:H.workoutDetails,i=(de=r.state)==null?void 0:de.workout_name,o=(Pe=r.state)==null?void 0:Pe.trainer,l=(je=r.state)==null?void 0:je.notes,[h,p]=F.useState(0),[m,_]=F.useState(!1),[E,I]=F.useState({}),[S,j]=F.useState({}),[W,V]=F.useState(""),[C,Q]=F.useState({}),ee=Cc().currentUser,[oe,De]=F.useState({slept_6_hours:"",motivated:"",ate_enough:"",hydrated:""}),[Se,b]=F.useState(!1),[k,D]=F.useState(null),[T,A]=F.useState(!1);F.useEffect(()=>{r.state||(console.error(" No workout data found! Redirecting..."),e("/client-homepage"))},[r,e]),F.useEffect(()=>{const J=setInterval(()=>{p(le=>le+1)},1e3);return()=>clearInterval(J)},[]),F.useEffect(()=>{if(t){const J={},le={},ce={};Object.entries(t).forEach(([fe,xe])=>{J[fe]=new Array(Number(xe.sets)).fill(xe.weight||""),le[fe]=new Array(Number(xe.sets)).fill(xe.reps||""),ce[fe]=new Array(Number(xe.sets)).fill(!1)}),I(J),j(le),Q(ce)}},[t]),F.useEffect(()=>{let J;k&&clearInterval(k);const le=setInterval(()=>{p(xe=>xe+1)},1e3);D(le);const ce=()=>{clearInterval(le),b(!0),console.warn(" Timer stopped due to inactivity!")},fe=()=>{b(!1),clearTimeout(J),J=setTimeout(ce,20*60*1e3)};return window.addEventListener("mousemove",fe),window.addEventListener("keydown",fe),window.addEventListener("touchstart",fe),J=setTimeout(ce,20*60*1e3),()=>{clearInterval(le),clearTimeout(J),window.removeEventListener("mousemove",fe),window.removeEventListener("keydown",fe),window.removeEventListener("touchstart",fe)}},[i]);const N=(J,le,ce)=>{I(fe=>({...fe,[J]:fe[J].map((xe,Ke)=>Ke===le?ce:xe)}))},R=(J,le,ce)=>{j(fe=>({...fe,[J]:fe[J].map((xe,Ke)=>Ke===le?ce:xe)}))},Te=(J,le)=>{Q(ce=>({...ce,[J]:ce[J].map((fe,xe)=>xe===le?!fe:fe)}))},nt=(J,le)=>{De(ce=>{const fe={...ce,[J]:le},xe=Object.values(fe).every(Ke=>Ke!=="");return A(xe),fe})},He=async()=>{if(!t||!ee)return;_(!0);const J=Oo();try{clearInterval(h);let le=0,ce=0;Object.values(C).forEach(xe=>{le+=xe.length,ce+=xe.filter(Ke=>Ke).length}),await $r(Oe(Yt(Ie,"PastWorkoutDetails"),J),{uid:ee.uid,workout_name:i,trainer:o,timestamp:rp(),duration_seconds:h,notes:W.trim(),completed_sets_count:ce,total_sets_count:le,...oe});const fe={};Object.entries(t).forEach(([xe,Ke])=>{var rn;const Rt=(rn=C[xe])==null?void 0:rn.map((Et,sn)=>Et?sn:null).filter(Et=>Et!==null);Rt.length>0&&(fe[xe]={...Ke,actual_weights_per_set:Rt.map(Et=>{var sn;return((sn=E[xe])==null?void 0:sn[Et])??""}),actual_reps_per_set:Rt.map(Et=>{var sn;return((sn=S[xe])==null?void 0:sn[Et])??""}),completed_sets:Rt.map(()=>!0)})}),await $r(Oe(Yt(Ie,"PastWorkoutExercises"),J),fe),await $r(Oe(Yt(Ie,"PastWorkoutExercises"),J),fe,o),alert("Workout saved successfully!"),e("/client-homepage")}catch(le){console.error("Error saving workout:",le)}finally{_(!1)}};if(!t)return d.jsx("p",{children:"Workout data not found."});const Le={},B=Object.entries(t).map(([J,le])=>({exercise:J,...le})).sort((J,le)=>{const ce=J.circuit_id?Le[J.circuit_id]:J.index,fe=le.circuit_id?Le[le.circuit_id]:le.index;return ce-fe});B.forEach(J=>{J.circuit_id&&(Le[J.circuit_id]||(Le[J.circuit_id]=J.index))});const re=B.sort((J,le)=>{const ce=J.circuit_id?Le[J.circuit_id]:J.index,fe=le.circuit_id?Le[le.circuit_id]:le.index;return ce-fe}),Y=[],O=new Set;return re.forEach(J=>{J.circuit_id?O.has(J.circuit_id)||(Y.push({type:"circuit",circuit_id:J.circuit_id,exercises:re.filter(le=>le.circuit_id===J.circuit_id)}),O.add(J.circuit_id)):Y.push({type:"exercise",...J})}),d.jsx("div",{className:"ViewIndWorkout",children:d.jsxs("div",{className:"view_ind_workout_container",children:[Se&&d.jsx("p",{style:{color:"red",fontWeight:"bold"},children:" Timer paused due to inactivity."}),i&&d.jsxs("h2",{children:["Workout: ",i]}),l&&d.jsxs("p",{children:[d.jsx("strong",{children:"notes from your trainer:"})," ",l]}),T&&d.jsxs("p",{children:[d.jsx("strong",{children:"Time Elapsed:"})," ",h>=3600?`${Math.floor(h/3600)}h `:"",h>=60?`${Math.floor(h%3600/60)}m `:"",`${h%60}s`]}),!T&&d.jsx("h3",{children:"Fill out these questions, then your workout will show"}),!T&&d.jsx("div",{children:[{key:"slept_6_hours",question:"Did you sleep more than 6 hours last night?"},{key:"motivated",question:"Do you feel motivated to workout right now?"},{key:"ate_enough",question:"Have you had enough to eat/drink today?"},{key:"hydrated",question:"Have you had enough water today?"}].map(({key:J,question:le})=>d.jsxs("div",{children:[d.jsx("p",{children:d.jsx("strong",{children:le})}),d.jsx("button",{onClick:()=>nt(J,"Yes"),style:{backgroundColor:oe[J]==="Yes"?"#4CAF50":"#ddd"},children:"Yes"}),d.jsx("button",{onClick:()=>nt(J,"No"),style:{backgroundColor:oe[J]==="No"?"#FF5252":"#ddd"},children:"No"})]},J))}),T&&Y.map(J=>{var le;return J.type==="circuit"?d.jsxs("div",{style:{padding:"10px",marginBottom:"10px",borderRadius:"3rem",background:"#FDF8F6"},className:"exercise_block",id:"start_workout",children:[d.jsx("h3",{children:" Circuit"}),J.exercises.map(ce=>{var fe;return d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[d.jsx("h3",{children:ce.exercise}),d.jsxs("p",{className:"cues",children:[d.jsx("strong",{children:"Cues:"})," ",ce.cues]}),d.jsxs("p",{style:{margin:"0"},children:[d.jsx("strong",{children:"Tempo :"})," ",J.tempo?J.tempo:"No Tempo"," ",d.jsx("br",{}),d.jsx("strong",{children:"Tempo Length: "}),J.tempoLength?J.tempoLength:"No Tempo"]}),d.jsx("br",{}),d.jsx("a",{href:ce.videoDemo,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.9em",color:"#007bff",marginLeft:"10px",textDecoration:"underline"},children:"Click to Watch Demo"}),d.jsx("br",{}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",maxWidth:"200px"},children:[d.jsx("label",{style:{fontSize:"1em"},children:"Reps"}),d.jsx("label",{style:{fontSize:"1em"},children:"Weight"})]}),(fe=C[ce.exercise])==null?void 0:fe.map((xe,Ke)=>{var Rt,rn;return d.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:[d.jsx("input",{type:"checkbox",checked:xe,onChange:()=>Te(ce.exercise,Ke)}),d.jsx("input",{type:"number",disabled:!xe,value:((Rt=S[ce.exercise])==null?void 0:Rt[Ke])??"",onChange:Et=>R(ce.exercise,Ke,Et.target.value)}),d.jsx("input",{type:"number",disabled:!xe,value:((rn=E[ce.exercise])==null?void 0:rn[Ke])??"",onChange:Et=>N(ce.exercise,Ke,Et.target.value)})]},Ke)}),ce!==J.exercises[J.exercises.length-1]&&d.jsx("hr",{style:{width:"100%",color:"black",margin:"20px 0",border:"none",borderTop:"1px solid black"}})]},ce.exercise)})]},J.circuit_id):d.jsxs("div",{style:{padding:"10px",marginBottom:"10px",borderRadius:"3rem",background:"#FDF8F6",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},className:"exercise_block",children:[d.jsx("h3",{children:J.exercise}),d.jsxs("p",{className:"cues",children:[d.jsx("strong",{children:"Cues:"})," ",J.cues]}),d.jsxs("p",{style:{margin:"0"},children:[d.jsx("strong",{children:"Tempo :"})," ",J.tempo?J.tempo:"No Tempo"," ",d.jsx("br",{}),d.jsx("strong",{children:"Tempo Length: "}),J.tempoLength?J.tempoLength:"No Tempo"]}),d.jsx("br",{}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",maxWidth:"200px",textAlign:"left"},children:[d.jsx("label",{style:{fontSize:"1em"},children:"Reps"}),d.jsx("label",{style:{fontSize:"1em"},children:"Weight"})]}),(le=C[J.exercise])==null?void 0:le.map((ce,fe)=>{var xe,Ke;return d.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:[d.jsx("input",{type:"checkbox",checked:ce,onChange:()=>Te(J.exercise,fe)}),d.jsx("input",{type:"number",disabled:!ce,value:((xe=S[J.exercise])==null?void 0:xe[fe])??"",onChange:Rt=>R(J.exercise,fe,Rt.target.value)}),d.jsx("input",{type:"number",disabled:!ce,value:((Ke=E[J.exercise])==null?void 0:Ke[fe])??"",onChange:Rt=>N(J.exercise,fe,Rt.target.value)})]},fe)})]},J.exercise)}),T&&d.jsx("button",{onClick:He,disabled:m,id:"button",children:m?"Saving...":"End Workout"})]})})},pA=()=>{const{user:r}=wr(),e=ut(),[t,i]=F.useState([]),[o,l]=F.useState(!0);return F.useEffect(()=>{if(!r||!r.uid)return;(async()=>{try{console.log(` Fetching past workouts for client UID: ${r.uid}`);const p=Tl(Yt(Ie,"PastWorkoutDetails"),Il("uid","==",r.uid)),E=(await On(p)).docs.map(I=>({id:I.id,...I.data()})).sort((I,S)=>{var V,C;const j=(V=I.timestamp)!=null&&V.toDate?I.timestamp.toDate():new Date(0);return((C=S.timestamp)!=null&&C.toDate?S.timestamp.toDate():new Date(0))-j});console.log(" Past workouts found:",E),i(E)}catch(p){console.error(" Error fetching past workouts:",p)}finally{l(!1)}})()},[r==null?void 0:r.uid]),r?d.jsx("div",{className:"PastWorkouts",children:d.jsxs("div",{className:"past_workout_container",children:[d.jsx("h2",{children:"Your Past Workouts"}),o?d.jsx("p",{children:"Loading past workouts..."}):t.length===0?d.jsx("p",{children:"No past workouts recorded yet."}):d.jsx("ul",{children:t.map(h=>{var S;const p=(S=h.timestamp)!=null&&S.toDate?h.timestamp.toDate():null,m=p?p.toLocaleString():"Unknown Date",_=h.duration_seconds||0,E=Math.floor(_/60),I=_%60;return d.jsxs("li",{className:"ind_past_workout",onClick:()=>e("/client-ind-past-workout",{state:{workoutId:h.id}}),children:[d.jsx("h3",{children:h.workout_name}),d.jsxs("p",{children:[d.jsx("strong",{children:"Date:"})," ",m]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Duration:"})," ",E," min ",I," sec"]}),d.jsx("hr",{})]},h.id)})})]})}):d.jsx("p",{children:"You must be logged in to view past workouts."})},mA=()=>{var W;const r=xn(),e=ut(),t=(W=r.state)==null?void 0:W.workoutId,[i,o]=F.useState(null),[l,h]=F.useState(null),[p,m]=F.useState(!0);if(F.useEffect(()=>{if(!t)return;(async()=>{try{console.log(` Fetching workout data for ID: ${t}`);const C=await lt(Oe(Ie,"PastWorkoutDetails",t));C.exists()&&(console.log(" Workout status loaded:",C.data()),h(C.data()));const Q=await lt(Oe(Ie,"PastWorkoutExercises",t));Q.exists()?(console.log(" Workout exercises loaded:",Q.data()),o(Q.data())):console.error(" No exercises found.")}catch(C){console.error(" Error fetching workout data:",C)}finally{m(!1)}})()},[t]),p)return d.jsx("p",{children:"Loading exercises..."});if(!i)return d.jsx("p",{children:"No exercises found for this workout."});const _=()=>{e(-1)},E={},I=Object.entries(i).map(([V,C])=>({exercise:V,...C})).sort((V,C)=>{const Q=V.circuit_id?E[V.circuit_id]??V.index:V.index,G=C.circuit_id?E[C.circuit_id]??C.index:C.index;return Q-G}),S=[],j=new Set;return I.forEach(V=>{V.circuit_id?j.has(V.circuit_id)||(S.push({type:"circuit",circuit_id:V.circuit_id,exercises:I.filter(C=>C.circuit_id===V.circuit_id)}),j.add(V.circuit_id)):S.push({type:"exercise",...V})}),d.jsx("div",{className:"ViewIndWorkout",children:d.jsxs("div",{className:"view_ind_workout_container",children:[d.jsx("h2",{children:"Past Workout Details"}),d.jsxs("div",{className:"pre-workout-status",style:{padding:"15px",marginBottom:"20px",borderRadius:"1rem",background:"#FDF8F6",gap:"10px"},children:[d.jsxs("div",{children:[d.jsx("strong",{children:"Sleep more than 6 hours?"})," ",(l==null?void 0:l.slept_6_hours)||"Not recorded"]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Feeling motivated?"})," ",(l==null?void 0:l.motivated)||"Not recorded"]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Drink enough water?"})," ",(l==null?void 0:l.hydrated)||"Not recorded"]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Eat enough?"})," ",(l==null?void 0:l.ate_enough)||"Not recorded"]})]}),S.map(V=>d.jsxs("div",{style:{padding:"10px",marginBottom:"10px",borderRadius:"3rem",background:"#FDF8F6"},className:"exercise_block",children:[V.type==="circuit"&&d.jsx("h3",{children:" Circuit"}),V.type==="circuit"?V.exercises.map(C=>d.jsxs("div",{style:{marginBottom:"10px"},children:[d.jsx("h3",{children:C.exercise}),d.jsxs("p",{children:[d.jsx("strong",{children:"Cues:"})," ",C.cues]}),C.videoDemo&&d.jsx("p",{children:d.jsx("a",{href:C.videoDemo,target:"_blank",rel:"noopener noreferrer",style:{color:"#213547",cursor:"pointer"},children:"Click to View Video Demo"})}),d.jsx("p",{children:d.jsx("strong",{children:"Planned..."})}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reps:"})," ",C.reps," ",d.jsx("strong",{children:"Sets:"})," ",C.sets,","," ",d.jsx("strong",{children:"Weight:"})," ",C.weight," lbs",d.jsx("br",{}),C.tempo?C.tempo:"No Tempo"," ",d.jsx("strong",{children:"Tempo Length"})," ",C.tempoLength?C.tempoLength:"No Tempo"]}),d.jsx("p",{children:d.jsx("strong",{children:"Actual Performance..."})}),C.actual_reps_per_set&&C.actual_weights_per_set?d.jsxs("table",{border:"1",cellPadding:"5",style:{borderCollapse:"collapse",width:"100%"},children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Set #"}),d.jsx("th",{children:"Actual Reps"}),d.jsx("th",{children:"Actual Weight"})]})}),d.jsx("tbody",{children:C.actual_reps_per_set.map((Q,G)=>d.jsxs("tr",{children:[d.jsx("td",{children:G+1}),d.jsx("td",{children:Q}),d.jsx("td",{children:C.actual_weights_per_set[G]})]},G))})]}):d.jsx("p",{children:"No recorded actual reps/weights."})]},C.exercise)):(()=>{const C=V;return d.jsxs("div",{children:[d.jsx("h3",{children:C.exercise}),d.jsxs("p",{children:[d.jsx("strong",{children:"Cues:"})," ",C.cues]}),C.videoDemo&&d.jsx("p",{children:d.jsx("a",{href:C.videoDemo,target:"_blank",rel:"noopener noreferrer",style:{color:"#213547",cursor:"pointer"},children:"Click to View Video Demo"})}),d.jsx("p",{children:d.jsx("strong",{children:"Planned..."})}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reps:"})," ",C.reps," ",d.jsx("strong",{children:"Sets:"})," ",C.sets,","," ",d.jsx("strong",{children:"Weight:"})," ",C.weight," lbs",d.jsx("br",{}),d.jsx("strong",{children:"Tempo:"})," ",C.tempo?C.tempo:"No Tempo"," ",d.jsx("strong",{children:"Tempo Length:"})," ",C.tempoLength?C.tempoLength:"No Tempo"]}),d.jsx("p",{children:d.jsx("strong",{children:"Actual Performance..."})}),C.actual_reps_per_set&&C.actual_weights_per_set?d.jsxs("table",{border:"1",cellPadding:"5",style:{borderCollapse:"collapse",width:"100%"},children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Set #"}),d.jsx("th",{children:"Actual Reps"}),d.jsx("th",{children:"Actual Weight"})]})}),d.jsx("tbody",{children:C.actual_reps_per_set.map((Q,G)=>d.jsxs("tr",{children:[d.jsx("td",{children:G+1}),d.jsx("td",{children:Q}),d.jsx("td",{children:C.actual_weights_per_set[G]})]},G))})]}):d.jsx("p",{children:"No recorded actual reps/weights."})]},C.exercise)})()]},V.type==="circuit"?V.circuit_id:V.exercise)),d.jsx("button",{onClick:_,id:"button",children:"Back"})]})})},gA=()=>{const{user:r}=wr();return d.jsxs(UR,{children:[r&&d.jsx(qR,{}),d.jsxs(bR,{children:[!r&&d.jsxs(d.Fragment,{children:[d.jsx(Ye,{path:"/client-reg",element:d.jsx(BR,{})}),d.jsx(Ye,{path:"/trainer-reg",element:d.jsx(zR,{})}),d.jsx(Ye,{path:"/client-signin",element:d.jsx(WR,{})}),d.jsx(Ye,{path:"/trainer-signin",element:d.jsx($R,{})}),d.jsx(Ye,{path:"/",element:d.jsx(Hy,{})})]}),d.jsx(Ye,{path:"/trainer-homepage",element:d.jsx(gt,{element:d.jsx(HR,{})})}),d.jsx(Ye,{path:"/client-homepage",element:d.jsx(gt,{element:d.jsx(uA,{})})}),d.jsx(Ye,{path:"/profile",element:d.jsx(gt,{element:d.jsx(YR,{})})}),d.jsx(Ye,{path:"/exercise-database",element:d.jsx(gt,{element:d.jsx(GR,{}),trainerOnly:!0})}),d.jsx(Ye,{path:"/add-exercise",element:d.jsx(gt,{element:d.jsx(KR,{}),trainerOnly:!0})}),d.jsx(Ye,{path:"/edit-exercise/:exerciseId",element:d.jsx(gt,{element:d.jsx(QR,{}),trainerOnly:!0})}),d.jsx(Ye,{path:"/all-clients",element:d.jsx(gt,{element:d.jsx(XR,{}),trainerOnly:!0})}),d.jsx(Ye,{path:"/client-profile",element:d.jsx(gt,{element:d.jsx(JR,{}),trainerOnly:!0})}),d.jsx(Ye,{path:"/workout-details",element:d.jsx(gt,{element:d.jsx(ZR,{}),trainerOnly:!0})}),d.jsx(Ye,{path:"/edit-workout",element:d.jsx(gt,{element:d.jsx(iA,{}),trainerOnly:!0})}),d.jsx(Ye,{path:"/create-workout",element:d.jsx(gt,{element:d.jsx(aA,{}),trainerOnly:!0})}),d.jsx(Ye,{path:"/template",element:d.jsx(gt,{element:d.jsx(lA,{}),trainerOnly:!0})}),d.jsx(Ye,{path:"/past-workouts",element:d.jsx(gt,{element:d.jsx(sA,{}),trainerOnly:!0})}),d.jsx(Ye,{path:"/ind-past-workout",element:d.jsx(gt,{element:d.jsx(oA,{}),trainerOnly:!0})}),d.jsx(Ye,{path:"/view-workout",element:d.jsx(gt,{element:d.jsx(cA,{}),clientOnly:!0})}),d.jsx(Ye,{path:"/single-workout",element:d.jsx(gt,{element:d.jsx(hA,{}),clientOnly:!0})}),d.jsx(Ye,{path:"/client-view-profile",element:d.jsx(gt,{element:d.jsx(dA,{}),clientOnly:!0})}),d.jsx(Ye,{path:"/start-workout",element:d.jsx(gt,{element:d.jsx(fA,{}),clientOnly:!0})}),d.jsx(Ye,{path:"/client-past-workouts",element:d.jsx(gt,{element:d.jsx(pA,{}),clientOnly:!0})}),d.jsx(Ye,{path:"/client-ind-past-workout",element:d.jsx(gt,{element:d.jsx(mA,{}),clientOnly:!0})}),d.jsx(Ye,{path:"/",element:d.jsx(Hy,{})})]})]})};function yA(){return d.jsx(Hk,{children:d.jsx(gA,{})})}Ww.createRoot(document.getElementById("root")).render(d.jsx(F.StrictMode,{children:d.jsx(yA,{})}));
